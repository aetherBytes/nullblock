var R=Object.defineProperty;var q=(n,e,t)=>e in n?R(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var m=(n,e,t)=>q(n,typeof e!="symbol"?e+"":e,t);import{e as l,j as s,m as G,o as k,d as L,A as W,i as _,L as A,b as O,u as M,f as w,I as x}from"./index-DdF6IaCF.js";import{t as Y,p as z}from"./suspense-query-DPlGAHmt.js";import{a as B}from"./axios-upsvKRUO.js";const H=l.createContext({}),$=!0;function J({baseColor:n,highlightColor:e,width:t,height:r,borderRadius:c,circle:u,direction:f,duration:d,enableAnimation:h=$}){const i={};return f==="rtl"&&(i["--animation-direction"]="reverse"),typeof d=="number"&&(i["--animation-duration"]=`${d}s`),h||(i["--pseudo-element-display"]="none"),(typeof t=="string"||typeof t=="number")&&(i.width=t),(typeof r=="string"||typeof r=="number")&&(i.height=r),(typeof c=="string"||typeof c=="number")&&(i.borderRadius=c),u&&(i.borderRadius="50%"),typeof n<"u"&&(i["--base-color"]=n),typeof e<"u"&&(i["--highlight-color"]=e),i}function K({count:n=1,wrapper:e,className:t,containerClassName:r,containerTestId:c,circle:u=!1,style:f,...d}){var h,i,j;const C=l.useContext(H),I={...d};for(const[a,o]of Object.entries(d))typeof o>"u"&&delete I[a];const y={...C,...I,circle:u},D={...f,...J(y)};let v="react-loading-skeleton";t&&(v+=` ${t}`);const F=(h=y.inline)!==null&&h!==void 0?h:!1,p=[],b=Math.ceil(n);for(let a=0;a<b;a++){let o=D;if(b>n&&a===b-1){const g=(i=o.width)!==null&&i!==void 0?i:"100%",U=n%1,P=typeof g=="number"?g*U:`calc(${g} * ${U})`;o={...o,width:P}}const S=l.createElement("span",{className:v,style:o,key:a},"â€Œ");F?p.push(S):p.push(l.createElement(l.Fragment,{key:a},S,l.createElement("br",null)))}return l.createElement("span",{className:r,"data-testid":c,"aria-live":"polite","aria-busy":(j=y.enableAnimation)!==null&&j!==void 0?j:$},e?p.map((a,o)=>l.createElement(e,{key:o},a)):p)}const N=({count:n=1})=>s.jsx(K,{count:n,highlightColor:"#969696"});class T{constructor(){m(this,"user",null);m(this,"error",null);m(this,"isLoading",!1);m(this,"suspense");m(this,"getUser",async e=>{this.setIsLoading(!0),this.setError(null);try{const{data:t}=await B.request({url:`${W}/?seed=${e}`}),r=e==="user-1"?1e3:e==="user-3"?3e3:2e3;await new Promise(d=>{setTimeout(d,r)});const[{name:c,email:u,picture:f}]=t.results;this.setUser({id:e,name:Object.values(c).join(" "),email:u,avatar:f.medium})}catch(t){this.setError(t==null?void 0:t.message)}this.setIsLoading(!1)});this.suspense=new Y(this),G(this,{user:k,error:k,isLoading:k,setUser:L.bound,setError:L.bound,setIsLoading:L.bound})}setUser(e){this.user=e}setError(e){this.error=e}setIsLoading(e){this.isLoading=e}}m(T,"id","Sc");const Q={mainStore:T},V="_col_1s2ah_1",X={col:V},Z=({userId:n,mainStore:{user:e,suspense:t,getUser:r}})=>(t.query(()=>r(n)),s.jsxs(s.Fragment,{children:[(e==null?void 0:e.id)==="user-1"&&s.jsxs(_,{children:[s.jsxs("title",{children:["User: ",e==null?void 0:e.id]}),s.jsx("meta",{name:"keywords",content:"user"})]}),s.jsxs("div",{children:[s.jsx("span",{className:X.col,children:"User from suspense:"})," ",s.jsxs(A,{to:O.makeURL("details.user",{id:e.id}),children:[e==null?void 0:e.id," (",e==null?void 0:e.name,")"]})]})]})),E=z(Z,Q),ee=()=>{const{userIds:n}=M(),e=w(),t=w();return s.jsxs(s.Fragment,{children:[s.jsxs(_,{children:[s.jsx("title",{children:"Details page"}),s.jsx("meta",{name:"description",content:"Details page"}),s.jsx("body",{"data-id":e,style:{border:"5px"}})]}),s.jsxs("p",{style:{border:"1px"},children:["This is about page. Stable ids: ",s.jsx("strong",{children:e})," and ",s.jsx("strong",{children:t})]}),s.jsxs("p",{children:["Load users for id's: ",s.jsx("strong",{children:n.join(", ")})]}),s.jsxs("div",{children:[s.jsx(x,{fallback:s.jsx(N,{count:2}),children:s.jsxs(s.Fragment,{children:[s.jsx(x.NS,{children:s.jsx(E,{userId:"user-1"})}),s.jsx(x.NS,{children:s.jsx(E,{userId:"user-3"})})]})}),s.jsx(x,{fallback:s.jsx(N,{}),children:s.jsx(E,{userId:"user-2"})})]}),s.jsx("div",{className:"mr20",children:s.jsx(A,{to:O.makeURL("home"),children:"Go back"})})]})};ee.loader=()=>({userIds:["user-1","user-2","user-3"]});export{ee as default};
