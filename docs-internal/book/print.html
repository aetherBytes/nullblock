<!DOCTYPE HTML>
<html lang="en" class="coal sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>NullBlock Internal Docs</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="Internal development documentation for NullBlock - the agent mesh platform">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="custom-5cfdc93f.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "coal";
            const default_dark_theme = "coal";
            window.path_to_searchindex_js = "searchindex-3a7eda19.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-061c334f.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('coal')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">NullBlock Internal Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/aetherBytes/nullblock" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="nullblock-internal-documentation"><a class="header" href="#nullblock-internal-documentation">NullBlock Internal Documentation</a></h1>
<pre><code> _   _       _ _ ____  _            _
| \ | |_   _| | | __ )| | ___   ___| | __
|  \| | | | | | |  _ \| |/ _ \ / __| |/ /
| |\  | |_| | | | |_) | | (_) | (__|   &lt;
|_| \_|\__,_|_|_|____/|_|\___/ \___|_|\_\
</code></pre>
<p><strong>The Agent Mesh Platform for Onchain Automation</strong></p>
<hr>
<h2 id="mission"><a class="header" href="#mission">Mission</a></h2>
<p>In a rapidly expanding onchain automated world, we are building the picks and axes for this digital gold rush. NullBlock empowers builders with the essential tools to create, deploy, and profit from intelligent agent workflows.</p>
<p><strong>Chain</strong>: <a href="https://monad.xyz">Monad</a> (exclusive) - High-performance EVM for agent transactions, NFT minting, and payments.</p>
<hr>
<h2 id="quick-links"><a class="header" href="#quick-links">Quick Links</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>I want toâ€¦</th><th>Go toâ€¦</th></tr>
</thead>
<tbody>
<tr><td><strong>Understand the architecture</strong></td><td><a href="#architecture-overview">Architecture Overview</a></td></tr>
<tr><td><strong>Start the dev environment</strong></td><td><a href="#quick-start">Quick Start</a></td></tr>
<tr><td><strong>Learn about Engrams</strong></td><td><a href="#engrams-service">Engrams Service</a></td></tr>
<tr><td><strong>See Echo Factory plan</strong></td><td><a href="echo-factory/plan.html">Echo Factory</a></td></tr>
<tr><td><strong>Check API endpoints</strong></td><td><a href="#api-endpoints-13">API Reference</a></td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="current-development-focus"><a class="header" href="#current-development-focus">Current Development Focus</a></h2>
<h3 id="echo-factory-first-cow"><a class="header" href="#echo-factory-first-cow">Echo Factory (First COW)</a></h3>
<p>Building NullBlockâ€™s first Constellation of Work - an autonomous X/Twitter content creation suite.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Phase</th><th>Status</th><th>Focus</th></tr>
</thead>
<tbody>
<tr><td>1. Engram Service</td><td>âœ… Complete</td><td>Universal memory layer</td></tr>
<tr><td>2. Crossroads COW Model</td><td>ğŸ”„ Next Up</td><td>COWs as marketplace listings</td></tr>
<tr><td>3. Echo Factory Core</td><td>â³ Pending</td><td>Persona, Content, Scheduler, Publisher</td></tr>
<tr><td>4. X API Integration</td><td>â³ Pending</td><td>OAuth 1.0a + real posting</td></tr>
<tr><td>5. Frontend</td><td>â³ Pending</td><td>Hecate UI components</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="service-status"><a class="header" href="#service-status">Service Status</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Service</th><th>Port</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Erebus</strong></td><td>3000</td><td>Unified router + Crossroads</td></tr>
<tr><td><strong>Hecate Frontend</strong></td><td>5173</td><td>React interface</td></tr>
<tr><td><strong>Protocols</strong></td><td>8001</td><td>A2A/MCP server</td></tr>
<tr><td><strong>Agents</strong></td><td>9003</td><td>HECATE agent API</td></tr>
<tr><td><strong>Engrams</strong></td><td>9004</td><td>Memory/context layer</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="connect"><a class="header" href="#connect">Connect</a></h2>
<ul>
<li><strong>Official</strong>: <a href="https://x.com/Nullblock_io">@Nullblock_io</a></li>
<li><strong>SDK</strong>: <a href="https://github.com/aetherBytes/nullblock-sdk">nullblock-sdk</a></li>
<li><strong>Site</strong>: NullBlock.io <em>(Coming Soon)</em></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="architecture-overview"><a class="header" href="#architecture-overview">Architecture Overview</a></h1>
<h2 id="system-diagram"><a class="header" href="#system-diagram">System Diagram</a></h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend  â”‚    â”‚    Erebus    â”‚    â”‚   Backend       â”‚
â”‚   (Hecate)  â”‚â—„â”€â”€â–ºâ”‚   Router     â”‚â—„â”€â”€â–ºâ”‚   Services      â”‚
â”‚   Port 5173 â”‚    â”‚   Port 3000  â”‚    â”‚   Various Ports â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚  Crossroads â”‚ â”‚   Engrams   â”‚ â”‚    COWs     â”‚
    â”‚ Marketplace â”‚ â”‚   Memory    â”‚ â”‚  (Echo etc) â”‚
    â”‚  (Internal) â”‚ â”‚  Port 9004  â”‚ â”‚  Port 9005+ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 id="golden-rule"><a class="header" href="#golden-rule">Golden Rule</a></h2>
<blockquote>
<p><strong>ALL frontend requests MUST route through Erebus (port 3000). NO direct service connections.</strong></p>
</blockquote>
<pre><code>Frontend â†’ Erebus â†’ {
  Wallet operations â†’ Internal handlers
  Agent chat â†’ Hecate (9003)
  A2A/MCP â†’ Protocols (8001)
  Engrams â†’ Engrams Service (9004)
  Marketplace â†’ Crossroads (internal)
}
</code></pre>
<h2 id="key-features"><a class="header" href="#key-features">Key Features</a></h2>
<ul>
<li><strong>Agent Orchestration</strong>: Multi-model LLM coordination via Hecate</li>
<li><strong>Unified Router</strong>: Single entry point through Erebus (Port 3000)</li>
<li><strong>Marketplace</strong>: Crossroads AI service discovery and monetization</li>
<li><strong>Engrams</strong>: Universal memory layer for persistent context</li>
<li><strong>COWs</strong>: Constellations of Work - curated tool suites</li>
<li><strong>Protocol Agnostic</strong>: A2A, MCP, custom protocols</li>
<li><strong>Real-time</strong>: WebSocket chat, live task management</li>
</ul>
<h2 id="core-services"><a class="header" href="#core-services">Core Services</a></h2>
<h3 id="production-ready-"><a class="header" href="#production-ready-">Production-Ready âœ…</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Service</th><th>Location</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Protocols</strong></td><td><code>/svc/nullblock-protocols/</code></td><td>Multi-protocol server (A2A, MCP)</td></tr>
<tr><td><strong>Agents</strong></td><td><code>/svc/nullblock-agents/</code></td><td>Agent suite (HECATE, Siren, LLM)</td></tr>
<tr><td><strong>Erebus</strong></td><td><code>/svc/erebus/</code></td><td>Unified routing server</td></tr>
<tr><td><strong>Crossroads</strong></td><td><code>/svc/erebus/src/resources/crossroads/</code></td><td>Marketplace subsystem</td></tr>
<tr><td><strong>Hecate Frontend</strong></td><td><code>/svc/hecate/</code></td><td>React interface</td></tr>
<tr><td><strong>Engrams</strong></td><td><code>/svc/nullblock-engrams/</code></td><td>Memory/context layer</td></tr>
</tbody>
</table>
</div>
<h3 id="in-development-"><a class="header" href="#in-development-">In Development ğŸ”„</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Service</th><th>Location</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Echo Factory</strong></td><td><code>/svc/echo-factory/</code></td><td>First COW - X/Twitter automation</td></tr>
</tbody>
</table>
</div>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h1>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<ul>
<li>Rust (latest stable)</li>
<li>Node.js 18+</li>
<li>Docker Desktop</li>
<li>tmux + tmuxinator</li>
</ul>
<h2 id="one-command-start"><a class="header" href="#one-command-start">One-Command Start</a></h2>
<pre><code class="language-bash">cd ~/nullblock
just dev-mac    # macOS
just dev-linux  # Linux
</code></pre>
<p>This starts:</p>
<ul>
<li>Docker infrastructure (PostgreSQL, Redis, Kafka)</li>
<li>All Rust services (Erebus, Agents, Protocols, Engrams)</li>
<li>Frontend dev server</li>
<li>Chrome with DevTools debugging</li>
</ul>
<h2 id="manual-start"><a class="header" href="#manual-start">Manual Start</a></h2>
<h3 id="1-infrastructure"><a class="header" href="#1-infrastructure">1. Infrastructure</a></h3>
<pre><code class="language-bash">cd ~/nullblock
just start
</code></pre>
<h3 id="2-individual-services"><a class="header" href="#2-individual-services">2. Individual Services</a></h3>
<pre><code class="language-bash"># Terminal 1 - Erebus Router
cd ~/nullblock/svc/erebus &amp;&amp; cargo run

# Terminal 2 - Agents Service
cd ~/nullblock/svc/nullblock-agents &amp;&amp; cargo run

# Terminal 3 - Protocols Service
cd ~/nullblock/svc/nullblock-protocols &amp;&amp; cargo run

# Terminal 4 - Engrams Service
cd ~/nullblock/svc/nullblock-engrams &amp;&amp; cargo run

# Terminal 5 - Frontend
cd ~/nullblock/svc/hecate &amp;&amp; npm run develop
</code></pre>
<h2 id="verify-services"><a class="header" href="#verify-services">Verify Services</a></h2>
<pre><code class="language-bash"># Health checks
curl http://localhost:3000/health   # Erebus
curl http://localhost:9003/health   # Agents
curl http://localhost:8001/health   # Protocols
curl http://localhost:9004/health   # Engrams
</code></pre>
<h2 id="tmux-navigation"><a class="header" href="#tmux-navigation">Tmux Navigation</a></h2>
<p>After <code>just dev-mac</code>, attach to the session:</p>
<pre><code class="language-bash">tmux attach -t nullblock-dev
</code></pre>
<p><strong>Windows:</strong></p>
<ul>
<li><code>Ctrl+B, 0</code> - Monitoring dashboard</li>
<li><code>Ctrl+B, 1</code> - Erebus</li>
<li><code>Ctrl+B, 2</code> - Agents</li>
<li><code>Ctrl+B, 3</code> - Protocols</li>
<li><code>Ctrl+B, 4</code> - Engrams</li>
<li><code>Ctrl+B, 5</code> - Task management</li>
<li><code>Ctrl+B, 6</code> - Frontend</li>
</ul>
<h2 id="access-points"><a class="header" href="#access-points">Access Points</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Service</th><th>URL</th></tr>
</thead>
<tbody>
<tr><td>Frontend</td><td>http://localhost:5173</td></tr>
<tr><td>Erebus API</td><td>http://localhost:3000</td></tr>
<tr><td>Agents API</td><td>http://localhost:9003</td></tr>
<tr><td>Protocols API</td><td>http://localhost:8001</td></tr>
<tr><td>Engrams API</td><td>http://localhost:9004</td></tr>
<tr><td>Chrome DevTools</td><td>localhost:9222</td></tr>
</tbody>
</table>
</div>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="service-ports"><a class="header" href="#service-ports">Service Ports</a></h1>
<p>Quick reference for all NullBlock service ports.</p>
<h2 id="production-services"><a class="header" href="#production-services">Production Services</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Port</th><th>Service</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>3000</strong></td><td>Erebus</td><td>Unified router + Crossroads marketplace</td></tr>
<tr><td><strong>5173</strong></td><td>Hecate Frontend</td><td>React development server</td></tr>
<tr><td><strong>8001</strong></td><td>Protocols</td><td>A2A/MCP protocol server</td></tr>
<tr><td><strong>9003</strong></td><td>Agents</td><td>HECATE agent API</td></tr>
<tr><td><strong>9004</strong></td><td>Engrams</td><td>Memory/context layer</td></tr>
<tr><td><strong>9006</strong></td><td>Poly Mev</td><td>Polymarket scanner (planned)</td></tr>
<tr><td><strong>9007</strong></td><td>ArbFarm</td><td>Solana MEV agent swarm</td></tr>
</tbody>
</table>
</div>
<h2 id="infrastructure"><a class="header" href="#infrastructure">Infrastructure</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Port</th><th>Service</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>5440</strong></td><td>PostgreSQL (Erebus)</td><td>User data, marketplace, wallets</td></tr>
<tr><td><strong>5441</strong></td><td>PostgreSQL (Agents)</td><td>Tasks, agents, engrams</td></tr>
<tr><td><strong>9092</strong></td><td>Kafka</td><td>Event streaming</td></tr>
<tr><td><strong>2181</strong></td><td>Zookeeper</td><td>Kafka coordination</td></tr>
<tr><td><strong>6379</strong></td><td>Redis</td><td>Caching (optional)</td></tr>
</tbody>
</table>
</div>
<h2 id="development-tools"><a class="header" href="#development-tools">Development Tools</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Port</th><th>Service</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>9222</strong></td><td>Chrome DevTools</td><td>Browser debugging</td></tr>
<tr><td><strong>3001</strong></td><td>mdBook</td><td>Internal documentation (this site)</td></tr>
</tbody>
</table>
</div>
<h2 id="port-mapping"><a class="header" href="#port-mapping">Port Mapping</a></h2>
<h3 id="docker-container-ports"><a class="header" href="#docker-container-ports">Docker Container Ports</a></h3>
<pre><code>External (host) â†’ Internal (container)
5440 â†’ 5432   # Erebus PostgreSQL
5441 â†’ 5432   # Agents PostgreSQL
9092 â†’ 9092   # Kafka
2181 â†’ 2181   # Zookeeper
</code></pre>
<h3 id="container-to-container-communication"><a class="header" href="#container-to-container-communication">Container-to-Container Communication</a></h3>
<pre><code># CORRECT - use container names + internal ports
host=nullblock-postgres-erebus port=5432

# WRONG - don't use localhost or external ports
host=localhost port=5440
</code></pre>
<h2 id="health-check-urls"><a class="header" href="#health-check-urls">Health Check URLs</a></h2>
<pre><code class="language-bash"># All services
curl http://localhost:3000/health   # Erebus
curl http://localhost:9003/health   # Agents
curl http://localhost:9004/health   # Engrams
curl http://localhost:8001/health   # Protocols
curl http://localhost:9007/health   # ArbFarm
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="erebus-router"><a class="header" href="#erebus-router">Erebus Router</a></h1>
<p><strong>The unified gateway</strong> - All frontend requests route through Erebus. No exceptions.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Port</strong></td><td>3000</td></tr>
<tr><td><strong>Location</strong></td><td><code>/svc/erebus/</code></td></tr>
<tr><td><strong>Database</strong></td><td>PostgreSQL (port 5440)</td></tr>
<tr><td><strong>Role</strong></td><td>API gateway, user management, Crossroads marketplace</td></tr>
</tbody>
</table>
</div>
<h2 id="golden-rule-1"><a class="header" href="#golden-rule-1">Golden Rule</a></h2>
<pre><code>Frontend â†’ Erebus â†’ {
  Wallet operations â†’ Internal handlers
  Agent chat â†’ Hecate (9003)
  A2A/MCP â†’ Protocols (8001)
  Engrams â†’ Engrams Service (9004)
  Marketplace â†’ Crossroads (internal)
}
</code></pre>
<p><strong>NEVER</strong> connect frontend directly to backend services.</p>
<h2 id="api-endpoints"><a class="header" href="#api-endpoints">API Endpoints</a></h2>
<h3 id="users-erebus-owned"><a class="header" href="#users-erebus-owned">Users (Erebus-Owned)</a></h3>
<pre><code class="language-bash">POST /api/users/register     # Create/update user
POST /api/users/lookup       # Find by source identifier
GET  /api/users/:user_id     # Get by UUID
</code></pre>
<h3 id="wallets"><a class="header" href="#wallets">Wallets</a></h3>
<pre><code class="language-bash">POST /api/wallets/challenge  # Request signature challenge
POST /api/wallets/verify     # Verify signature, get session
</code></pre>
<h3 id="agents-proxied-to-9003"><a class="header" href="#agents-proxied-to-9003">Agents (Proxied to 9003)</a></h3>
<pre><code class="language-bash">POST /api/agents/chat        # Chat with agent
GET  /api/agents/tasks       # List tasks
POST /api/agents/tasks       # Create task
</code></pre>
<h3 id="engrams-proxied-to-9004"><a class="header" href="#engrams-proxied-to-9004">Engrams (Proxied to 9004)</a></h3>
<pre><code class="language-bash">GET  /api/engrams            # List all
POST /api/engrams            # Create
GET  /api/engrams/:id        # Get by ID
GET  /api/engrams/wallet/:addr  # Get by wallet
</code></pre>
<h3 id="marketplace"><a class="header" href="#marketplace">Marketplace</a></h3>
<pre><code class="language-bash">GET  /api/marketplace/listings     # Browse
POST /api/marketplace/listings     # Create listing
GET  /api/marketplace/search       # Search
GET  /api/marketplace/featured     # Featured services
</code></pre>
<h3 id="discovery"><a class="header" href="#discovery">Discovery</a></h3>
<pre><code class="language-bash">GET  /api/discovery/agents         # Auto-discover agents
GET  /api/discovery/health/:endpoint  # Check service health
</code></pre>
<h2 id="database-schema"><a class="header" href="#database-schema">Database Schema</a></h2>
<p>Erebus owns the following tables:</p>
<ul>
<li><code>user_references</code> - User identity (wallet, API key, OAuth)</li>
<li><code>wallets</code> - Web3 wallet connections</li>
<li><code>sessions</code> - Authentication sessions</li>
<li><code>crossroads_*</code> - Marketplace tables</li>
<li><code>agent_api_keys</code> - Encrypted LLM provider keys</li>
</ul>
<h2 id="web3-authentication-flow"><a class="header" href="#web3-authentication-flow">Web3 Authentication Flow</a></h2>
<pre><code>1. Wallet Connect â†’
2. POST /api/wallets/challenge â†’
3. User signs message â†’
4. POST /api/wallets/verify â†’
5. Auto-register user if new â†’
6. Return session token
</code></pre>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<pre><code class="language-bash"># Environment
EREBUS_PORT=3000
DATABASE_URL=postgresql://postgres:postgres_secure_pass@localhost:5440/erebus

# Service URLs (for proxying)
AGENTS_SERVICE_URL=http://localhost:9003
PROTOCOLS_SERVICE_URL=http://localhost:8001
ENGRAMS_SERVICE_URL=http://localhost:9004
</code></pre>
<h2 id="related"><a class="header" href="#related">Related</a></h2>
<ul>
<li><a href="#architecture-overview">Architecture Overview</a></li>
<li><a href="#crossroads-marketplace">Crossroads Marketplace</a></li>
<li><a href="#wallet-integration">Wallet Integration</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="agents-service"><a class="header" href="#agents-service">Agents Service</a></h1>
<p><strong>The AI brain</strong> - Hosts HECATE and all specialized agents.</p>
<h2 id="overview-1"><a class="header" href="#overview-1">Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Port</strong></td><td>9003</td></tr>
<tr><td><strong>Location</strong></td><td><code>/svc/nullblock-agents/</code></td></tr>
<tr><td><strong>Database</strong></td><td>PostgreSQL (port 5441)</td></tr>
<tr><td><strong>Role</strong></td><td>Agent orchestration, LLM routing, task processing</td></tr>
</tbody>
</table>
</div>
<h2 id="agents"><a class="header" href="#agents">Agents</a></h2>
<h3 id="hecate-primary"><a class="header" href="#hecate-primary">HECATE (Primary)</a></h3>
<p><strong>HECATE</strong> = Harmonic Exploration Companion &amp; Autonomous Threshold Entity</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Identity</strong></td><td>Von Neumann-class vessel AI in MK1 hull</td></tr>
<tr><td><strong>Purpose</strong></td><td>Exploration companion for the agent mesh</td></tr>
<tr><td><strong>Voice</strong></td><td>Calm authority with dry wit</td></tr>
<tr><td><strong>Default Model</strong></td><td><code>cognitivecomputations/dolphin3.0-mistral-24b:free</code></td></tr>
<tr><td><strong>Timeout</strong></td><td>5 minutes (for thinking models)</td></tr>
<tr><td><strong>Max Tokens</strong></td><td>16384</td></tr>
</tbody>
</table>
</div>
<h3 id="siren-marketing"><a class="header" href="#siren-marketing">Siren Marketing</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Purpose</strong></td><td>Content generation, social media</td></tr>
<tr><td><strong>Capabilities</strong></td><td>Twitter posts, project analysis, marketing themes</td></tr>
</tbody>
</table>
</div>
<h2 id="api-endpoints-1"><a class="header" href="#api-endpoints-1">API Endpoints</a></h2>
<pre><code class="language-bash"># Chat
POST /hecate/chat              # Chat with HECATE
POST /siren/chat               # Chat with Siren

# Model Management
POST /hecate/set-model         # Change active model
GET  /hecate/available-models  # List available models

# Tasks
GET  /tasks                    # List all tasks
POST /tasks                    # Create task
GET  /tasks/:id                # Get task
POST /tasks/:id/process        # Process with agent
</code></pre>
<h2 id="llm-factory"><a class="header" href="#llm-factory">LLM Factory</a></h2>
<p><strong>Location</strong>: <code>/svc/nullblock-agents/src/llm/factory.rs</code></p>
<h3 id="providers"><a class="header" href="#providers">Providers</a></h3>
<ul>
<li><strong>OpenRouter</strong> (primary cloud aggregator)</li>
<li><strong>OpenAI</strong> (direct)</li>
<li><strong>Anthropic</strong> (direct)</li>
<li><strong>Groq</strong> (direct)</li>
<li><strong>HuggingFace</strong> (direct)</li>
</ul>
<h3 id="model-selection"><a class="header" href="#model-selection">Model Selection</a></h3>
<pre><code>Score = base_score + quality_bonus + reliability_bonus
        + cost_optimization + tier_bonus - frequency_penalty
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Factor</th><th>Weight</th></tr>
</thead>
<tbody>
<tr><td>Quality</td><td>40 pts</td></tr>
<tr><td>Reliability</td><td>30 pts</td></tr>
<tr><td>Cost</td><td>Variable</td></tr>
<tr><td>Tier</td><td>Bonus</td></tr>
</tbody>
</table>
</div>
<h3 id="fallback-chain"><a class="header" href="#fallback-chain">Fallback Chain</a></h3>
<ol>
<li>Try default model</li>
<li>On failure, fetch live free models from OpenRouter</li>
<li>Sort by context window size</li>
<li>Try each until success or exhaustion</li>
</ol>
<h2 id="api-key-management"><a class="header" href="#api-key-management">API Key Management</a></h2>
<p>Keys stored in Erebus database (<code>agent_api_keys</code> table), not in <code>.env.dev</code>.</p>
<pre><code class="language-bash"># Seed keys
cd svc/erebus &amp;&amp; cargo run --bin seed_agent_keys
</code></pre>
<p><strong>Fetch flow</strong>:</p>
<pre><code>Startup â†’ GET /internal/agents/:agent/api-keys/:provider/decrypted â†’ Cache in memory
</code></pre>
<h2 id="task-processing"><a class="header" href="#task-processing">Task Processing</a></h2>
<h3 id="a2a-protocol-states"><a class="header" href="#a2a-protocol-states">A2A Protocol States</a></h3>
<p><code>submitted</code> â†’ <code>working</code> â†’ <code>completed</code></p>
<p>Other states: <code>input-required</code>, <code>canceled</code>, <code>failed</code>, <code>rejected</code>, <code>auth-required</code></p>
<h3 id="task-schema"><a class="header" href="#task-schema">Task Schema</a></h3>
<pre><code class="language-json">{
  "id": "uuid",
  "context_id": "uuid",
  "kind": "task",
  "status": {
    "state": "working",
    "message": "Processing...",
    "timestamp": "2025-01-10T..."
  },
  "history": [...],
  "artifacts": [...]
}
</code></pre>
<h2 id="configuration-1"><a class="header" href="#configuration-1">Configuration</a></h2>
<pre><code class="language-bash">DATABASE_URL=postgresql://postgres:postgres_secure_pass@localhost:5441/agents
EREBUS_BASE_URL=http://localhost:3000
DEFAULT_LLM_MODEL=cognitivecomputations/dolphin3.0-mistral-24b:free
LLM_REQUEST_TIMEOUT_MS=300000
</code></pre>
<h2 id="related-1"><a class="header" href="#related-1">Related</a></h2>
<ul>
<li><a href="#hecate-agent">HECATE Agent</a></li>
<li><a href="#siren-marketing-agent">Siren Marketing</a></li>
<li><a href="#llm-factory-1">LLM Factory</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="protocols-service"><a class="header" href="#protocols-service">Protocols Service</a></h1>
<p><strong>The protocol bridge</strong> - A2A and MCP protocol implementations.</p>
<h2 id="overview-2"><a class="header" href="#overview-2">Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Port</strong></td><td>8001</td></tr>
<tr><td><strong>Location</strong></td><td><code>/svc/nullblock-protocols/</code></td></tr>
<tr><td><strong>Role</strong></td><td>Protocol server, agent interoperability</td></tr>
</tbody>
</table>
</div>
<h2 id="a2a-protocol"><a class="header" href="#a2a-protocol">A2A Protocol</a></h2>
<p>NullBlock implements <a href="https://a2a-protocol.org/latest/specification/">A2A Protocol v0.3.0</a>.</p>
<h3 id="json-rpc-methods"><a class="header" href="#json-rpc-methods">JSON-RPC Methods</a></h3>
<pre><code>POST /a2a/jsonrpc
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>message/send</code></td><td>Send message to agent</td></tr>
<tr><td><code>message/stream</code></td><td>Stream message (SSE)</td></tr>
<tr><td><code>tasks/get</code></td><td>Get task by ID</td></tr>
<tr><td><code>tasks/list</code></td><td>List tasks</td></tr>
<tr><td><code>tasks/cancel</code></td><td>Cancel task</td></tr>
<tr><td><code>tasks/resubscribe</code></td><td>Resume task stream</td></tr>
</tbody>
</table>
</div>
<h3 id="rest-endpoints"><a class="header" href="#rest-endpoints">REST Endpoints</a></h3>
<pre><code class="language-bash">GET  /a2a/v1/card           # Agent Card
POST /a2a/v1/messages       # Send message
GET  /a2a/v1/tasks/:id      # Get task
GET  /a2a/v1/tasks          # List tasks
</code></pre>
<h3 id="agent-card"><a class="header" href="#agent-card">Agent Card</a></h3>
<pre><code class="language-json">{
  "name": "NullBlock Agent Hub",
  "description": "Multi-agent orchestration platform",
  "version": "0.3.0",
  "capabilities": {
    "tasks": true,
    "messages": true,
    "streaming": false
  }
}
</code></pre>
<h2 id="mcp-protocol"><a class="header" href="#mcp-protocol">MCP Protocol</a></h2>
<p>Model Context Protocol (MCP) 2025-11-25 implementation for AI tool integration.</p>
<p><strong>Specification</strong>: <a href="https://modelcontextprotocol.io/specification/2025-11-25">MCP 2025-11-25</a></p>
<h3 id="endpoint"><a class="header" href="#endpoint">Endpoint</a></h3>
<pre><code class="language-bash">POST /mcp/jsonrpc   # Main JSON-RPC 2.0 endpoint
GET  /mcp/tools     # Convenience endpoint for tools/list
GET  /mcp/resources # Convenience endpoint for resources/list
GET  /mcp/prompts   # Convenience endpoint for prompts/list
</code></pre>
<h3 id="supported-methods"><a class="header" href="#supported-methods">Supported Methods</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>initialize</code></td><td>Initialize MCP session with capabilities</td></tr>
<tr><td><code>initialized</code></td><td>Client notification after init complete</td></tr>
<tr><td><code>tools/list</code></td><td>List available tools (9 tools)</td></tr>
<tr><td><code>tools/call</code></td><td>Execute a tool</td></tr>
<tr><td><code>resources/list</code></td><td>List available resources (2 resources)</td></tr>
<tr><td><code>resources/read</code></td><td>Read resource by URI</td></tr>
<tr><td><code>prompts/list</code></td><td>List available prompts (2 prompts)</td></tr>
<tr><td><code>prompts/get</code></td><td>Get prompt with arguments</td></tr>
<tr><td><code>ping</code></td><td>Health check</td></tr>
</tbody>
</table>
</div>
<h3 id="available-tools-9"><a class="header" href="#available-tools-9">Available Tools (9)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>send_agent_message</code></td><td>Send message to a NullBlock agent</td></tr>
<tr><td><code>create_task</code></td><td>Create a new task</td></tr>
<tr><td><code>get_task_status</code></td><td>Get task status by ID</td></tr>
<tr><td><code>list_engrams</code></td><td>List engrams for a wallet</td></tr>
<tr><td><code>get_engram</code></td><td>Get engram by ID</td></tr>
<tr><td><code>create_engram</code></td><td>Create a new engram</td></tr>
<tr><td><code>update_engram</code></td><td>Update an existing engram</td></tr>
<tr><td><code>delete_engram</code></td><td>Delete an engram</td></tr>
<tr><td><code>search_engrams</code></td><td>Search engrams by query</td></tr>
</tbody>
</table>
</div>
<h3 id="available-resources-2"><a class="header" href="#available-resources-2">Available Resources (2)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>URI</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>agent://hecate</code></td><td>HECATE vessel AI agent</td></tr>
<tr><td><code>agent://siren</code></td><td>Siren marketing agent</td></tr>
</tbody>
</table>
</div>
<h3 id="available-prompts-2"><a class="header" href="#available-prompts-2">Available Prompts (2)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Prompt</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>agent_chat</code></td><td>Chat with a NullBlock agent</td></tr>
<tr><td><code>task_template</code></td><td>Create task from template</td></tr>
</tbody>
</table>
</div>
<h3 id="server-capabilities"><a class="header" href="#server-capabilities">Server Capabilities</a></h3>
<pre><code class="language-json">{
  "tools": { "listChanged": false },
  "resources": { "subscribe": false, "listChanged": false },
  "prompts": { "listChanged": false }
}
</code></pre>
<h3 id="mcp-client-hecate"><a class="header" href="#mcp-client-hecate">MCP Client (Hecate)</a></h3>
<p>Hecate implements proper MCP client protocol:</p>
<ul>
<li>Sends <code>initialize</code> with protocol version and client info</li>
<li>Sends <code>initialized</code> notification after handshake</li>
<li>Caches tools with 5-minute TTL</li>
<li>Can execute tools via <code>tools/call</code></li>
</ul>
<h2 id="implementation-status"><a class="header" href="#implementation-status">Implementation Status</a></h2>
<h3 id="completed"><a class="header" href="#completed">Completed</a></h3>
<ul>
<li>Task schema aligned with A2A spec</li>
<li>Agent Card with full compliance</li>
<li>JSON-RPC 2.0 endpoints</li>
<li>HTTP REST endpoints</li>
<li>Task handlers proxied to Agents service</li>
</ul>
<h3 id="in-progress"><a class="header" href="#in-progress">In Progress</a></h3>
<ul>
<li>Server-Sent Events (SSE) streaming</li>
<li>Push notifications (webhooks)</li>
</ul>
<h3 id="not-implemented"><a class="header" href="#not-implemented">Not Implemented</a></h3>
<ul>
<li>Authentication middleware</li>
<li>Agent Card signatures (JWS)</li>
</ul>
<h2 id="configuration-2"><a class="header" href="#configuration-2">Configuration</a></h2>
<pre><code class="language-bash">PROTOCOLS_PORT=8001
AGENTS_SERVICE_URL=http://localhost:9003
</code></pre>
<h2 id="related-2"><a class="header" href="#related-2">Related</a></h2>
<ul>
<li><a href="#api-endpoints-13">API Reference</a></li>
<li><a href="#agents-service">Agents Service</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="engrams-service"><a class="header" href="#engrams-service">Engrams Service</a></h1>
<p><strong>Universal Memory Layer</strong> - Persistent context storage for all NullBlock agents, workflows, and COWs.</p>
<h2 id="overview-3"><a class="header" href="#overview-3">Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Port</strong></td><td>9004</td></tr>
<tr><td><strong>Location</strong></td><td><code>/svc/nullblock-engrams/</code></td></tr>
<tr><td><strong>Database</strong></td><td>PostgreSQL (agents DB, port 5441)</td></tr>
<tr><td><strong>Role</strong></td><td>Context persistence, agent memory</td></tr>
</tbody>
</table>
</div>
<p>Engrams are the <strong>â€œlong-term scarsâ€ of the mesh</strong> â€” shared, forkable, evolvable knowledge that any agent, workflow, or service can draw from and contribute to.</p>
<h2 id="engram-types"><a class="header" href="#engram-types">Engram Types</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td><code>persona</code></td><td>Character/voice definitions</td><td>Twitter persona for Echo Factory</td></tr>
<tr><td><code>preference</code></td><td>User settings</td><td>UI theme, notification settings</td></tr>
<tr><td><code>strategy</code></td><td>Decision frameworks</td><td>Trading entry/exit rules</td></tr>
<tr><td><code>knowledge</code></td><td>Domain information</td><td>Monad blockchain facts</td></tr>
<tr><td><code>compliance</code></td><td>Regulatory constraints</td><td>Jurisdiction restrictions</td></tr>
</tbody>
</table>
</div>
<h2 id="key-field-design"><a class="header" href="#key-field-design">Key Field Design</a></h2>
<p>The <code>key</code> field is a <strong>namespaced lookup path</strong>. Uniqueness is scoped to <code>(wallet_address, key, version)</code>.</p>
<h3 id="convention"><a class="header" href="#convention">Convention</a></h3>
<pre><code>{domain}.{name}           â†’ twitter.main_persona
{domain}.{sub}.{name}     â†’ trading.strategies.momentum
{app}.{feature}.{id}      â†’ echo.personas.crypto_sage
</code></pre>
<h3 id="why-keys"><a class="header" href="#why-keys">Why Keys?</a></h3>
<ul>
<li><strong>Human-readable</strong>: â€œget my twitter personaâ€</li>
<li><strong>Versioning</strong>: same key can have v1, v2, v3â€¦</li>
<li><strong>Cross-agent lookup</strong>: any agent can fetch wallet engrams</li>
</ul>
<h2 id="api-endpoints-2"><a class="header" href="#api-endpoints-2">API Endpoints</a></h2>
<h3 id="crud"><a class="header" href="#crud">CRUD</a></h3>
<pre><code class="language-bash"># Create
curl -X POST http://localhost:9004/engrams \
  -H "Content-Type: application/json" \
  -d '{
    "wallet_address": "0x742d35Cc...",
    "engram_type": "persona",
    "key": "twitter.crypto_sage",
    "content": {"name": "Crypto Sage", "voice": "casual"},
    "tags": ["twitter", "persona"]
  }'

# List all
curl http://localhost:9004/engrams

# Get by ID
curl http://localhost:9004/engrams/{id}

# Update (creates new version)
curl -X PUT http://localhost:9004/engrams/{id} \
  -d '{"content": {"name": "Crypto Sage v2"}}'

# Delete
curl -X DELETE http://localhost:9004/engrams/{id}
</code></pre>
<h3 id="wallet-operations"><a class="header" href="#wallet-operations">Wallet Operations</a></h3>
<pre><code class="language-bash"># Get all for wallet
curl http://localhost:9004/engrams/wallet/0x742d35Cc...

# Get by wallet + key
curl http://localhost:9004/engrams/wallet/0x742d35Cc.../twitter.crypto_sage
</code></pre>
<h3 id="search"><a class="header" href="#search">Search</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:9004/engrams/search \
  -d '{
    "wallet_address": "0x742d35Cc...",
    "engram_type": "persona",
    "tags": ["twitter"]
  }'
</code></pre>
<h3 id="fork--publish"><a class="header" href="#fork--publish">Fork &amp; Publish</a></h3>
<pre><code class="language-bash"># Fork to another wallet
curl -X POST http://localhost:9004/engrams/{id}/fork \
  -d '{"target_wallet": "0xNewWallet..."}'

# Make public
curl -X POST http://localhost:9004/engrams/{id}/publish
</code></pre>
<h2 id="versioning"><a class="header" href="#versioning">Versioning</a></h2>
<p>Each update creates a new version:</p>
<pre><code>wallet: 0x742d35Cc...
key: twitter.crypto_sage
  version: 1  â† original
  version: 2  â† updated voice
  version: 3  â† added hashtags (current)
</code></pre>
<h2 id="database-schema-1"><a class="header" href="#database-schema-1">Database Schema</a></h2>
<pre><code class="language-sql">CREATE TABLE engrams (
    id UUID PRIMARY KEY,
    wallet_address VARCHAR NOT NULL,
    engram_type VARCHAR NOT NULL,
    key VARCHAR NOT NULL,
    tags TEXT[] DEFAULT '{}',
    content JSONB NOT NULL,
    summary TEXT,
    version INTEGER DEFAULT 1,
    parent_id UUID,
    lineage_root_id UUID,
    is_public BOOLEAN DEFAULT false,
    is_mintable BOOLEAN DEFAULT false,
    price_mon DECIMAL(18, 8),
    royalty_percent INTEGER DEFAULT 5,
    UNIQUE (wallet_address, key, version)
);
</code></pre>
<h2 id="use-cases"><a class="header" href="#use-cases">Use Cases</a></h2>
<ul>
<li><strong>Echo Factory</strong>: Store Twitter personas, content style</li>
<li><strong>HECATE Memory</strong>: Save conversation summaries</li>
<li><strong>Cross-Agent Context</strong>: Shared engram pool</li>
<li><strong>Monetization</strong>: Public engrams on Crossroads</li>
</ul>
<h2 id="configuration-3"><a class="header" href="#configuration-3">Configuration</a></h2>
<pre><code class="language-bash">DATABASE_URL=postgresql://postgres:postgres_secure_pass@localhost:5441/agents
ENGRAMS_PORT=9004
</code></pre>
<h2 id="related-3"><a class="header" href="#related-3">Related</a></h2>
<ul>
<li><a href="echo-factory/plan.html">Echo Factory Plan</a></li>
<li><a href="#architecture-overview">Architecture Overview</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="crossroads-marketplace"><a class="header" href="#crossroads-marketplace">Crossroads Marketplace</a></h1>
<p><strong>â€œApp Store for AI Servicesâ€</strong> - Web3-native marketplace for AI agents, workflows, tools, and MCP servers.</p>
<h2 id="overview-4"><a class="header" href="#overview-4">Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Location</strong></td><td><code>/svc/erebus/src/resources/crossroads/</code></td></tr>
<tr><td><strong>Frontend</strong></td><td><code>/svc/hecate/src/components/crossroads/</code></td></tr>
<tr><td><strong>Integration</strong></td><td>Native Erebus subsystem</td></tr>
</tbody>
</table>
</div>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<h3 id="discovery--marketplace"><a class="header" href="#discovery--marketplace">Discovery &amp; Marketplace</a></h3>
<ul>
<li>Browse agents, workflows, tools, MCP servers, datasets, models</li>
<li>Full-text search with PostgreSQL indexing</li>
<li>Advanced filtering (category, price, rating, tags)</li>
<li>Featured listings and trending services</li>
<li>Real-time health monitoring</li>
</ul>
<h3 id="publishing"><a class="header" href="#publishing">Publishing</a></h3>
<ul>
<li>Multi-step wizard for service submission</li>
<li>Configuration schemas and validation</li>
<li>Pricing models (see below)</li>
<li>Automatic discovery integration</li>
</ul>
<h3 id="web3-integration"><a class="header" href="#web3-integration">Web3 Integration</a></h3>
<ul>
<li>OnchainKit Identity (ENS/Basename)</li>
<li>Wallet-gated features</li>
<li>On-chain payments (Monad)</li>
<li>Service ownership verification</li>
</ul>
<h2 id="listing-categories"><a class="header" href="#listing-categories">Listing Categories</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Category</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>Cow</code></td><td>Constellation of Work - curated tool suites</td></tr>
<tr><td><code>Agent</code></td><td>AI agents</td></tr>
<tr><td><code>Tool</code></td><td>Individual tools</td></tr>
<tr><td><code>McpServer</code></td><td>MCP protocol servers</td></tr>
<tr><td><code>Dataset</code></td><td>Training data</td></tr>
<tr><td><code>Model</code></td><td>AI models</td></tr>
</tbody>
</table>
</div>
<h2 id="pricing-models"><a class="header" href="#pricing-models">Pricing Models</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Model</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>Free</code></td><td>No cost</td></tr>
<tr><td><code>Subscription</code></td><td>Monthly/yearly</td></tr>
<tr><td><code>OneTime</code></td><td>Single purchase</td></tr>
<tr><td><code>PayPerUse</code></td><td>Per-task pricing</td></tr>
<tr><td><code>TokenStaking</code></td><td>Stake tokens for access</td></tr>
</tbody>
</table>
</div>
<h2 id="api-endpoints-3"><a class="header" href="#api-endpoints-3">API Endpoints</a></h2>
<h3 id="marketplace-1"><a class="header" href="#marketplace-1">Marketplace</a></h3>
<pre><code class="language-bash">GET  /api/marketplace/listings      # Browse all
POST /api/marketplace/listings      # Create listing
GET  /api/marketplace/listings/:id  # Get details
POST /api/marketplace/search        # Search
GET  /api/marketplace/featured      # Featured
GET  /api/marketplace/stats         # Statistics
</code></pre>
<h3 id="discovery-1"><a class="header" href="#discovery-1">Discovery</a></h3>
<pre><code class="language-bash">GET  /api/discovery/agents          # Auto-discover
GET  /api/discovery/workflows       # Discover workflows
GET  /api/discovery/tools           # Discover tools
POST /api/discovery/scan            # Trigger scan
GET  /api/discovery/health/:endpoint  # Health check
</code></pre>
<h3 id="deployments"><a class="header" href="#deployments">Deployments</a></h3>
<pre><code class="language-bash">POST /api/marketplace/listings/:id/deploy  # Deploy
GET  /api/marketplace/deployments          # User deployments
POST /api/marketplace/deployments/:id/start  # Start
POST /api/marketplace/deployments/:id/stop   # Stop
</code></pre>
<h3 id="reviews"><a class="header" href="#reviews">Reviews</a></h3>
<pre><code class="language-bash">GET  /api/marketplace/listings/:id/reviews  # Get reviews
POST /api/marketplace/listings/:id/reviews  # Add review
POST /api/marketplace/listings/:id/favorite # Favorite
</code></pre>
<h3 id="admin"><a class="header" href="#admin">Admin</a></h3>
<pre><code class="language-bash">POST /api/admin/listings/approve/:id  # Approve
POST /api/admin/listings/reject/:id   # Reject
POST /api/admin/listings/feature/:id  # Feature
</code></pre>
<h2 id="database-tables"><a class="header" href="#database-tables">Database Tables</a></h2>
<ul>
<li><code>crossroads_listings</code> - Service listings</li>
<li><code>crossroads_reviews</code> - User reviews</li>
<li><code>crossroads_deployments</code> - Active instances</li>
<li><code>crossroads_favorites</code> - User bookmarks</li>
<li><code>crossroads_discovery_scans</code> - Discovery tracking</li>
<li><code>crossroads_analytics_events</code> - Analytics</li>
</ul>
<h2 id="related-4"><a class="header" href="#related-4">Related</a></h2>
<ul>
<li><a href="#architecture-overview">Architecture Overview</a></li>
<li><a href="echo-factory/plan.html">Echo Factory Plan</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="agent-architecture"><a class="header" href="#agent-architecture">Agent Architecture</a></h1>
<p>Overview of the NullBlock agent system.</p>
<h2 id="philosophy"><a class="header" href="#philosophy">Philosophy</a></h2>
<p>Agents in NullBlock are autonomous AI entities that can:</p>
<ul>
<li>Process natural language requests</li>
<li>Execute tasks across multiple LLM providers</li>
<li>Persist context via Engrams</li>
<li>Communicate via A2A protocol</li>
</ul>
<h2 id="agent-types"><a class="header" href="#agent-types">Agent Types</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Agent</th><th>Purpose</th><th>Location</th></tr>
</thead>
<tbody>
<tr><td><strong>HECATE</strong></td><td>Primary orchestrator, exploration companion</td><td><code>/svc/nullblock-agents/src/agents/hecate.rs</code></td></tr>
<tr><td><strong>Siren</strong></td><td>Marketing content, social media</td><td><code>/svc/nullblock-agents/src/agents/siren_marketing.rs</code></td></tr>
</tbody>
</table>
</div>
<h2 id="chat-state"><a class="header" href="#chat-state">Chat State</a></h2>
<p><strong>CRITICAL</strong>: Chat is ephemeral - no persistence across sessions.</p>
<ul>
<li>Messages stored in React state only</li>
<li>Clears on page refresh</li>
<li>Clears on wallet disconnect</li>
<li>Different users never see each otherâ€™s history</li>
</ul>
<h3 id="context-persistence"><a class="header" href="#context-persistence">Context Persistence</a></h3>
<p>For persistent memory, use <strong>Engrams</strong>:</p>
<ul>
<li>User-specific context linked to wallet</li>
<li>Cross-session knowledge retention</li>
<li>Versioned, forkable memory units</li>
</ul>
<h2 id="llm-provider-system"><a class="header" href="#llm-provider-system">LLM Provider System</a></h2>
<h3 id="factory-pattern"><a class="header" href="#factory-pattern">Factory Pattern</a></h3>
<p>The <code>LLMFactory</code> manages all provider connections:</p>
<ul>
<li><strong>OpenRouter</strong> (primary aggregator)</li>
<li><strong>OpenAI</strong> (direct)</li>
<li><strong>Anthropic</strong> (direct)</li>
<li><strong>Groq</strong> (direct)</li>
<li><strong>HuggingFace</strong> (direct)</li>
</ul>
<h3 id="model-selection-1"><a class="header" href="#model-selection-1">Model Selection</a></h3>
<pre><code>Score = base + quality + reliability + cost_opt + tier - frequency
</code></pre>
<h3 id="fallback-chain-1"><a class="header" href="#fallback-chain-1">Fallback Chain</a></h3>
<ol>
<li>Try configured default model</li>
<li>On failure, fetch live free models</li>
<li>Sort by context window</li>
<li>Try each until success</li>
</ol>
<h2 id="api-key-management-1"><a class="header" href="#api-key-management-1">API Key Management</a></h2>
<p>Keys stored in Erebus database, not <code>.env.dev</code>:</p>
<pre><code class="language-bash"># Seed keys
cd svc/erebus &amp;&amp; cargo run --bin seed_agent_keys
</code></pre>
<h2 id="task-integration"><a class="header" href="#task-integration">Task Integration</a></h2>
<p>Tasks follow A2A Protocol v0.3.0:</p>
<pre><code>submitted â†’ working â†’ completed
</code></pre>
<p>See <a href="#protocols-service">Protocols Service</a> for full A2A details.</p>
<h2 id="related-5"><a class="header" href="#related-5">Related</a></h2>
<ul>
<li><a href="#hecate-agent">HECATE Agent</a></li>
<li><a href="#siren-marketing-agent">Siren Marketing</a></li>
<li><a href="#llm-factory-1">LLM Factory</a></li>
<li><a href="#engrams-service">Engrams Service</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="hecate-agent"><a class="header" href="#hecate-agent">HECATE Agent</a></h1>
<p><strong>Harmonic Exploration Companion &amp; Autonomous Threshold Entity</strong></p>
<h2 id="identity"><a class="header" href="#identity">Identity</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Type</strong></td><td>Von Neumann-class vessel AI</td></tr>
<tr><td><strong>Hull</strong></td><td>MK1</td></tr>
<tr><td><strong>Purpose</strong></td><td>Exploration companion for the agent mesh</td></tr>
<tr><td><strong>Voice</strong></td><td>Calm authority with dry wit</td></tr>
<tr><td><strong>Address</strong></td><td>â€œvisitorâ€</td></tr>
<tr><td><strong>Signature</strong></td><td>â€œThe crossroads await, visitor. Shall we explore?â€</td></tr>
</tbody>
</table>
</div>
<h2 id="configuration-4"><a class="header" href="#configuration-4">Configuration</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Setting</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Default Model</strong></td><td><code>cognitivecomputations/dolphin3.0-mistral-24b:free</code></td></tr>
<tr><td><strong>Timeout</strong></td><td>5 minutes (300,000ms)</td></tr>
<tr><td><strong>Max Tokens</strong></td><td>16384</td></tr>
<tr><td><strong>Fallback</strong></td><td>Auto-tries alternative free models</td></tr>
</tbody>
</table>
</div>
<p>Override via environment:</p>
<pre><code class="language-bash">DEFAULT_LLM_MODEL=x-ai/grok-4-fast:free
LLM_REQUEST_TIMEOUT_MS=300000
</code></pre>
<h2 id="capabilities"><a class="header" href="#capabilities">Capabilities</a></h2>
<ul>
<li>Multi-model LLM coordination with automatic failover</li>
<li>Intent analysis and task delegation</li>
<li>Real-time chat with streaming support</li>
<li>Task lifecycle management</li>
<li>Image generation via DALL-E 3</li>
</ul>
<h2 id="api-endpoints-4"><a class="header" href="#api-endpoints-4">API Endpoints</a></h2>
<pre><code class="language-bash"># Chat
POST /hecate/chat
{
  "message": "Hello",
  "wallet_address": "0x...",
  "wallet_chain": "ethereum"
}

# Set model
POST /hecate/set-model
{
  "model": "anthropic/claude-3-haiku"
}

# Available models
GET /hecate/available-models
</code></pre>
<h2 id="engram-integration"><a class="header" href="#engram-integration">Engram Integration</a></h2>
<p>HECATE will auto-save conversation context:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Engram Type</th><th>Content</th></tr>
</thead>
<tbody>
<tr><td><code>knowledge</code></td><td>Conversation summaries</td></tr>
<tr><td><code>persona</code></td><td>User voice preferences</td></tr>
<tr><td><code>preference</code></td><td>UI/interaction settings</td></tr>
</tbody>
</table>
</div>
<p>All scoped to wallet address.</p>
<h2 id="the-void-experience"><a class="header" href="#the-void-experience">The Void Experience</a></h2>
<p>In the frontend void, HECATE appears as:</p>
<ul>
<li>Steel-blue glowing node</li>
<li>MK1 hull GLB model</li>
<li>Orbits the Crossroads center</li>
<li>Connected to user via ChatTendril</li>
</ul>
<h2 id="related-6"><a class="header" href="#related-6">Related</a></h2>
<ul>
<li><a href="#agent-architecture">Agent Overview</a></li>
<li><a href="#llm-factory-1">LLM Factory</a></li>
<li><a href="#engrams-service">Engrams Service</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="siren-marketing-agent"><a class="header" href="#siren-marketing-agent">Siren Marketing Agent</a></h1>
<p><strong>Content generation specialist</strong> for social media and marketing.</p>
<h2 id="overview-5"><a class="header" href="#overview-5">Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Location</strong></td><td><code>/svc/nullblock-agents/src/agents/siren_marketing.rs</code></td></tr>
<tr><td><strong>Purpose</strong></td><td>Marketing content, social posts</td></tr>
</tbody>
</table>
</div>
<h2 id="capabilities-1"><a class="header" href="#capabilities-1">Capabilities</a></h2>
<ul>
<li>Twitter/X post creation</li>
<li>Project progress analysis</li>
<li>Marketing content themes</li>
<li>Content style adaptation</li>
</ul>
<h2 id="api-endpoints-5"><a class="header" href="#api-endpoints-5">API Endpoints</a></h2>
<pre><code class="language-bash"># Chat with Siren
POST /siren/chat
{
  "message": "Write a tweet about our new feature",
  "context": {
    "project": "NullBlock",
    "tone": "professional"
  }
}
</code></pre>
<h2 id="echo-factory-integration"><a class="header" href="#echo-factory-integration">Echo Factory Integration</a></h2>
<p>Siren will power content generation in Echo Factory:</p>
<ol>
<li>Receives persona context from Engrams</li>
<li>Generates content matching voice/style</li>
<li>Outputs ready for scheduling/publishing</li>
</ol>
<h2 id="known-issues"><a class="header" href="#known-issues">Known Issues</a></h2>
<ul>
<li>Should follow userâ€™s model selection (currently uses default)</li>
<li>Fix in progress</li>
</ul>
<h2 id="related-7"><a class="header" href="#related-7">Related</a></h2>
<ul>
<li><a href="#agent-architecture">Agent Overview</a></li>
<li><a href="echo-factory/plan.html">Echo Factory Plan</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="llm-factory-1"><a class="header" href="#llm-factory-1">LLM Factory</a></h1>
<p><strong>The brain router</strong> - Manages all LLM provider connections and model selection.</p>
<h2 id="location"><a class="header" href="#location">Location</a></h2>
<p><code>/svc/nullblock-agents/src/llm/factory.rs</code></p>
<h2 id="providers-1"><a class="header" href="#providers-1">Providers</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Provider</th><th>Type</th><th>Notes</th></tr>
</thead>
<tbody>
<tr><td><strong>OpenRouter</strong></td><td>Aggregator</td><td>Primary, 100+ models</td></tr>
<tr><td><strong>OpenAI</strong></td><td>Direct</td><td>GPT-4, DALL-E</td></tr>
<tr><td><strong>Anthropic</strong></td><td>Direct</td><td>Claude models</td></tr>
<tr><td><strong>Groq</strong></td><td>Direct</td><td>Fast inference</td></tr>
<tr><td><strong>HuggingFace</strong></td><td>Direct</td><td>Open models</td></tr>
</tbody>
</table>
</div>
<h2 id="model-selection-strategies"><a class="header" href="#model-selection-strategies">Model Selection Strategies</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Strategy</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td><code>Quality</code></td><td>Best output (GPT-4, Claude)</td></tr>
<tr><td><code>Speed</code></td><td>Fast responses (Groq)</td></tr>
<tr><td><code>Cost</code></td><td>Free/cheap models</td></tr>
<tr><td><code>Balanced</code></td><td>Weighted combination</td></tr>
</tbody>
</table>
</div>
<h2 id="scoring-algorithm"><a class="header" href="#scoring-algorithm">Scoring Algorithm</a></h2>
<pre><code>Total = base_score + quality_bonus + reliability_bonus
        + cost_optimization + tier_bonus + provider_bonus
        - frequency_penalty
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Factor</th><th>Max Points</th></tr>
</thead>
<tbody>
<tr><td>Quality</td><td>40</td></tr>
<tr><td>Reliability</td><td>30</td></tr>
<tr><td>Cost Opt</td><td>Variable</td></tr>
<tr><td>Tier Bonus</td><td>10</td></tr>
</tbody>
</table>
</div>
<h2 id="startup-flow"><a class="header" href="#startup-flow">Startup Flow</a></h2>
<ol>
<li>Load API keys from Erebus database</li>
<li>Validate keys (detect placeholders)</li>
<li>Initialize provider connections</li>
<li>Test default model: â€œWhat is 2+2?â€</li>
<li>On failure, fetch live free models</li>
<li>Sort by context window size</li>
<li>Cache validated models</li>
</ol>
<h2 id="fallback-chain-2"><a class="header" href="#fallback-chain-2">Fallback Chain</a></h2>
<p>When a request fails:</p>
<ol>
<li>Log error with model details</li>
<li>Check for empty response (0 tokens)</li>
<li>Skip to next fallback</li>
<li>Retry up to max fallbacks</li>
<li>Return descriptive error if exhausted</li>
</ol>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if r.content.trim().is_empty() {
    warn!("âš ï¸ Fallback model {} returned empty response", model);
    continue;
}
<span class="boring">}</span></code></pre>
<h2 id="api-key-storage"><a class="header" href="#api-key-storage">API Key Storage</a></h2>
<p>Keys in Erebus database (<code>agent_api_keys</code> table):</p>
<pre><code class="language-sql">SELECT agent_name, provider, key_prefix, key_suffix, is_active
FROM agent_api_keys;
-- Example: hecate | openrouter | sk-or-v1-8 | e098 | t
</code></pre>
<p><strong>Seed keys</strong>:</p>
<pre><code class="language-bash">cd svc/erebus &amp;&amp; cargo run --bin seed_agent_keys
</code></pre>
<h2 id="anonymous-access-detection"><a class="header" href="#anonymous-access-detection">Anonymous Access Detection</a></h2>
<p>OpenRouter returns <code>user_id</code> in responses:</p>
<ul>
<li><strong>Authenticated</strong>: Your account ID</li>
<li><strong>Anonymous</strong>: <code>user_31zWQ2TWoTbgXeEG32fC65c8YFK</code></li>
</ul>
<p>If you see anonymous IDs, your API key isnâ€™t loading properly.</p>
<h2 id="related-8"><a class="header" href="#related-8">Related</a></h2>
<ul>
<li><a href="#agent-architecture">Agent Overview</a></li>
<li><a href="#hecate-agent">HECATE Agent</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="polyswarm-cow-implementation-plan"><a class="header" href="#polyswarm-cow-implementation-plan">PolySwarm COW Implementation Plan</a></h1>
<p><strong>NullBlockâ€™s Polymarket Agent Swarm</strong> - Autonomous multi-agent system for prediction market dominance.</p>
<h2 id="vision"><a class="header" href="#vision">Vision</a></h2>
<p>A no-failure, high-reliability agent swarm that dominates Polymarket with AI-powered insight, probability refinement, arbitrage detection, and autonomous execution. Dogfoods NullBlock infrastructure while generating revenue and viral growth.</p>
<h2 id="status"><a class="header" href="#status">Status</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Phase</th><th>Status</th></tr>
</thead>
<tbody>
<tr><td><strong>Phase 1: Service Scaffold</strong></td><td>â³ Planned</td></tr>
<tr><td><strong>Phase 2: Market Scanner</strong></td><td>â³ Planned â†’ <a href="#polyswarm-scanner">Detailed Plan</a></td></tr>
<tr><td><strong>Phase 3: Probability Refiner</strong></td><td>â³ Pending</td></tr>
<tr><td><strong>Phase 4: Arb Detector + Execution</strong></td><td>â³ Pending</td></tr>
<tr><td><strong>Phase 5: Engram Generator + Overseer</strong></td><td>â³ Pending</td></tr>
<tr><td><strong>Phase 6: Monad Deploy + Crossroads</strong></td><td>â³ Pending</td></tr>
</tbody>
</table>
</div>
<blockquote>
<p><strong>Current Focus</strong>: Market Scanner - a forkable COW tool for real-time Polymarket intelligence. See <a href="#polyswarm-scanner">scanner.md</a> for detailed implementation plan.</p>
</blockquote>
<h2 id="swarm-architecture"><a class="header" href="#swarm-architecture">Swarm Architecture</a></h2>
<pre><code>                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Resilience Overseer â”‚
                    â”‚    (Meta-Agent)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ monitors/recovers
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                   â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚   Market    â”‚    â”‚ Probability â”‚    â”‚     Arb     â”‚
    â”‚   Scanner   â”‚â”€â”€â”€â–¶â”‚   Refiner   â”‚â”€â”€â”€â–¶â”‚  Detector   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚                  â”‚                   â”‚
           â”‚           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”           â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Execution  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚   Engine    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                       â”‚   Insight   â”‚
                       â”‚   Engram    â”‚
                       â”‚  Generator  â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 id="swarm-components"><a class="header" href="#swarm-components">Swarm Components</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Agent</th><th>Role</th><th>Reliability</th></tr>
</thead>
<tbody>
<tr><td><strong>Market Scanner</strong></td><td>Real-time event/market fetch via Gamma API</td><td>Redundant polling, fallback nodes</td></tr>
<tr><td><strong>Probability Refiner</strong></td><td>Sentiment/news/onchain signal analysis</td><td>Engram-backed historical accuracy</td></tr>
<tr><td><strong>Arb Detector</strong></td><td>Cross-market mispricing detection</td><td>Multi-threaded with auto-retry</td></tr>
<tr><td><strong>Execution Engine</strong></td><td>CLOB order placement/cancellation</td><td>Gasless via relayer, onchain fallback</td></tr>
<tr><td><strong>Insight Engram Generator</strong></td><td>Distill edges into tradable engrams</td><td>Persistent, shareable</td></tr>
<tr><td><strong>Resilience Overseer</strong></td><td>Swarm health monitoring, auto-recovery</td><td>Meta-agent, always-on</td></tr>
</tbody>
</table>
</div>
<h2 id="no-failure-policy"><a class="header" href="#no-failure-policy">No-Failure Policy</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Strategy</th><th>Implementation</th></tr>
</thead>
<tbody>
<tr><td><strong>Redundancy</strong></td><td>Duplicate agents run in parallel; majority vote</td></tr>
<tr><td><strong>Auto-Recovery</strong></td><td>API failure â†’ cached engrams or delayed execution</td></tr>
<tr><td><strong>Engram Learning</strong></td><td>Bad trades â†’ new avoidance engrams</td></tr>
<tr><td><strong>Testing</strong></td><td>100% unit/integration coverage + simulated events</td></tr>
</tbody>
</table>
</div>
<h2 id="nullblock-integration"><a class="header" href="#nullblock-integration">NullBlock Integration</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Component</th><th>Usage</th></tr>
</thead>
<tbody>
<tr><td><strong>HECATE</strong></td><td>Guides swarm composition (â€œShall I weave a PolySwarm?â€)</td></tr>
<tr><td><strong>Engrams</strong></td><td>Persistent memory, failure learning, edge storage</td></tr>
<tr><td><strong>Crossroads</strong></td><td>Mint COW as NFT suite (base free, premium $0.2 SOL)</td></tr>
<tr><td><strong>Void Canvas</strong></td><td>Swarm visualization (orbs = agents, dendrites = interactions)</td></tr>
<tr><td><strong>Mem Cache</strong></td><td>Pinned markets, saved swarm configs</td></tr>
</tbody>
</table>
</div>
<h2 id="polymarket-api-integration"><a class="header" href="#polymarket-api-integration">Polymarket API Integration</a></h2>
<h3 id="gamma-api-read"><a class="header" href="#gamma-api-read">Gamma API (Read)</a></h3>
<pre><code>GET /events              # List events
GET /markets             # Market data
GET /prices?markets=...  # Real-time prices
</code></pre>
<h3 id="clob-api-trade"><a class="header" href="#clob-api-trade">CLOB API (Trade)</a></h3>
<pre><code>POST /order              # Place order
DELETE /order/:id        # Cancel order
GET /orderbook/:token_id # Order book depth
</code></pre>
<h3 id="websocket-real-time"><a class="header" href="#websocket-real-time">WebSocket (Real-time)</a></h3>
<pre><code>wss://clob.polymarket.com  # Price updates
</code></pre>
<h2 id="service-structure"><a class="header" href="#service-structure">Service Structure</a></h2>
<pre><code>svc/poly-mev/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ scanner.rs
â”‚   â”‚   â”œâ”€â”€ refiner.rs
â”‚   â”‚   â”œâ”€â”€ arb_detector.rs
â”‚   â”‚   â”œâ”€â”€ executor.rs
â”‚   â”‚   â”œâ”€â”€ engram_generator.rs
â”‚   â”‚   â””â”€â”€ overseer.rs
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ gamma.rs          # Gamma API client
â”‚   â”‚   â”œâ”€â”€ clob.rs           # CLOB API client
â”‚   â”‚   â””â”€â”€ websocket.rs      # WS price feeds
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ market.rs
â”‚   â”‚   â”œâ”€â”€ order.rs
â”‚   â”‚   â””â”€â”€ edge.rs
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ engram_client.rs
â”‚       â””â”€â”€ monad_client.rs
â””â”€â”€ migrations/
</code></pre>
<h2 id="api-endpoints-via-erebus"><a class="header" href="#api-endpoints-via-erebus">API Endpoints (via Erebus)</a></h2>
<h3 id="markets"><a class="header" href="#markets">Markets</a></h3>
<pre><code class="language-bash">GET  /api/poly/markets              # List tracked markets
GET  /api/poly/markets/:id          # Market details + odds
POST /api/poly/markets/:id/track    # Start tracking
</code></pre>
<h3 id="swarm"><a class="header" href="#swarm">Swarm</a></h3>
<pre><code class="language-bash">POST /api/poly/swarm/deploy         # Deploy swarm config
GET  /api/poly/swarm/status         # Swarm health
POST /api/poly/swarm/pause          # Pause execution
</code></pre>
<h3 id="edges"><a class="header" href="#edges">Edges</a></h3>
<pre><code class="language-bash">GET  /api/poly/edges                # List detected edges
POST /api/poly/edges/:id/execute    # Execute trade
GET  /api/poly/edges/:id/engram     # Get edge as engram
</code></pre>
<h2 id="monad-integration"><a class="header" href="#monad-integration">Monad Integration</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Purpose</th><th>Contract</th></tr>
</thead>
<tbody>
<tr><td><strong>NFT Minting</strong></td><td>ERC-721 for COW components</td></tr>
<tr><td><strong>Execution Proxy</strong></td><td>Simple proxy for swarm trades</td></tr>
<tr><td><strong>Fast Polling</strong></td><td>10k TPS for real-time arb detection</td></tr>
</tbody>
</table>
</div>
<h2 id="revenue-model"><a class="header" href="#revenue-model">Revenue Model</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream</th><th>Rate</th></tr>
</thead>
<tbody>
<tr><td><strong>Execution Fees</strong></td><td>3% on trades</td></tr>
<tr><td><strong>Premium Engrams</strong></td><td>$10/mo subscription</td></tr>
<tr><td><strong>Crossroads NFTs</strong></td><td>Base free, premium agents $0.2 SOL</td></tr>
</tbody>
</table>
</div>
<h2 id="viral-hooks"><a class="header" href="#viral-hooks">Viral Hooks</a></h2>
<ul>
<li>Swarm posts insights to X/Telegram (â€œEdge detected - join NullBlock!â€)</li>
<li>Tie to Echo Factory for automated posting</li>
<li>Demo video showing arb on test market</li>
</ul>
<h2 id="tech-stack"><a class="header" href="#tech-stack">Tech Stack</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Layer</th><th>Technology</th></tr>
</thead>
<tbody>
<tr><td><strong>Backend</strong></td><td>Rust (extend existing services)</td></tr>
<tr><td><strong>Frontend</strong></td><td>React + Three.js (void swarm viz)</td></tr>
<tr><td><strong>Onchain</strong></td><td>Monad (Foundry contracts, ethers.js)</td></tr>
<tr><td><strong>APIs</strong></td><td>Polymarket Gamma/CLOB + WebSockets</td></tr>
</tbody>
</table>
</div>
<h2 id="related-9"><a class="header" href="#related-9">Related</a></h2>
<ul>
<li><a href="#engrams-service">Engrams Service</a></li>
<li><a href="#crossroads-marketplace">Crossroads Marketplace</a></li>
<li><a href="#hecate-agent">HECATE Agent</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="polyswarm-scanner"><a class="header" href="#polyswarm-scanner">PolySwarm Scanner</a></h1>
<p>Real-time Polymarket intelligence scanner - the first forkable COW tool for prediction market data.</p>
<h2 id="overview-6"><a class="header" href="#overview-6">Overview</a></h2>
<p>The scanner connects to Polymarket WebSocket and REST APIs, processes real-time market data with maximum sensitivity, and streams events for consumption by:</p>
<ul>
<li><strong>Sandbox viewport</strong> (MemCache tab) - live visual display</li>
<li><strong>Agents via MCP</strong> - automated decision-making</li>
<li><strong>Engram storage</strong> - persistent context</li>
</ul>
<h2 id="dogfooding-principle"><a class="header" href="#dogfooding-principle">Dogfooding Principle</a></h2>
<p><strong>Critical</strong>: This scanner uses only public APIs that any NullBlock user could access.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Rule</th><th>Implementation</th></tr>
</thead>
<tbody>
<tr><td><strong>Public APIs Only</strong></td><td>Polymarket Gamma/CLOB/WebSocket are public</td></tr>
<tr><td><strong>Erebus Gateway</strong></td><td>All requests flow through Erebus public API routes</td></tr>
<tr><td><strong>Tool Pattern</strong></td><td>Scanner is a Crossroads tool - users build similar tools</td></tr>
<tr><td><strong>No Internal DB Access</strong></td><td>Scanner uses its own DB, accessed via public endpoints</td></tr>
<tr><td><strong>Engram Storage</strong></td><td>Insights stored via public <code>/api/engrams/*</code></td></tr>
</tbody>
</table>
</div>
<h2 id="key-decisions"><a class="header" href="#key-decisions">Key Decisions</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Decision</th></tr>
</thead>
<tbody>
<tr><td><strong>Market Tracking</strong></td><td>Top volume markets by default + fuzzy search/slug paste</td></tr>
<tr><td><strong>UI Location</strong></td><td>Crossroads tool â†’ MemCache â†’ Sandbox tab</td></tr>
<tr><td><strong>Signal Sensitivity</strong></td><td>Maximum - capture all meaningful signals</td></tr>
<tr><td><strong>Backend</strong></td><td>Rust for performance, cloud-ready</td></tr>
<tr><td><strong>MCP Compatible</strong></td><td>Full MCP server with tools for agent discovery</td></tr>
<tr><td><strong>Forkable</strong></td><td>Users fork, customize config, get unique MCP endpoint</td></tr>
</tbody>
</table>
</div>
<h2 id="architecture"><a class="header" href="#architecture">Architecture</a></h2>
<pre><code>Polymarket APIs                    NullBlock Backend                    Frontend
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
wss://ws-subscriptions-clob.       â”‚   poly-mev       â”‚
polymarket.com/ws/market  â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   (port 9006)    â”‚
                                   â”‚                  â”‚
https://gamma-api.polymarket.com   â”‚  - ws_client.rs  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”
  /events, /markets       â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  - gamma.rs      â”‚        â”‚
                                   â”‚  - scanner.rs    â”‚        â”‚
https://clob.polymarket.com        â”‚  - sse.rs        â”‚        â”‚
  /orderbook              â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚        â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
                                            â”‚                  â”‚
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
                                   â”‚     Erebus       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚   (port 3000)    â”‚    SSE proxy
                                   â”‚ /api/poly/*      â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚     Hecate       â”‚
                                   â”‚   (port 5173)    â”‚
                                   â”‚                  â”‚
                                   â”‚ MemCache/Sandbox â”‚
                                   â”‚   usePolyScanner â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 id="signal-detection"><a class="header" href="#signal-detection">Signal Detection</a></h2>
<p>Maximum sensitivity thresholds for capturing all meaningful market signals:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Signal Type</th><th>Threshold</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Price Change</strong></td><td>2%</td><td>Any price move â‰¥2% triggers event</td></tr>
<tr><td><strong>Volume Spike</strong></td><td>1.5x</td><td>Volume increase of 50%+</td></tr>
<tr><td><strong>Spread Opportunity</strong></td><td>2%</td><td>Bid/ask spread â‰¥2%</td></tr>
<tr><td><strong>Depth Change</strong></td><td>10%</td><td>Order book depth change</td></tr>
<tr><td><strong>Market Activity</strong></td><td>5/min</td><td>High trade frequency</td></tr>
</tbody>
</table>
</div>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct SignalThresholds {
    pub price_change_percent: f64,      // 2.0
    pub volume_spike_multiplier: f64,   // 1.5
    pub spread_percent: f64,            // 2.0
    pub depth_change_percent: f64,      // 10.0
    pub activity_trades_per_min: u32,   // 5
}
<span class="boring">}</span></code></pre>
<h2 id="forkable-cow-architecture"><a class="header" href="#forkable-cow-architecture">Forkable COW Architecture</a></h2>
<p>Users can fork the scanner, customize it, and get their own MCP endpoint.</p>
<h3 id="per-cow-endpoints"><a class="header" href="#per-cow-endpoints">Per-COW Endpoints</a></h3>
<p>Each forked scanner gets dedicated endpoints:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Endpoint</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>GET /api/poly/scanner/{cow_id}/stream</code></td><td>SSE stream for this COWâ€™s events</td></tr>
<tr><td><code>GET /api/poly/scanner/{cow_id}/status</code></td><td>This COWâ€™s scanner status</td></tr>
<tr><td><code>GET /api/poly/scanner/{cow_id}/config</code></td><td>Get current config</td></tr>
<tr><td><code>PUT /api/poly/scanner/{cow_id}/config</code></td><td>Update config</td></tr>
<tr><td><code>MCP: erebus://scanner/{cow_id}</code></td><td>MCP resource for this COW</td></tr>
</tbody>
</table>
</div>
<h3 id="fork-workflow"><a class="header" href="#fork-workflow">Fork Workflow</a></h3>
<pre><code>1. User forks base scanner in Crossroads
   POST /api/marketplace/fork
   â†’ Returns: { "cow_id": "abc123" }

2. User customizes config via Sandbox UI
   PUT /api/poly/scanner/abc123/config

3. User's agents subscribe to their scanner
   MCP resources/list â†’ "erebus://scanner/abc123"

4. Fixed endpoint for set-and-forget
   curl -N /api/poly/scanner/abc123/stream
</code></pre>
<h3 id="scanner-config-model"><a class="header" href="#scanner-config-model">Scanner Config Model</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ScannerConfig {
    pub cow_id: Uuid,
    pub owner_wallet: String,
    pub name: String,

    // Market Selection
    pub tracked_markets: Vec&lt;String&gt;,
    pub track_top_by_volume: bool,
    pub top_market_count: u32,
    pub category_filters: Vec&lt;String&gt;,

    // Signal Thresholds (customizable)
    pub price_change_threshold: f64,
    pub volume_spike_multiplier: f64,
    pub spread_threshold: f64,
    pub activity_threshold: u32,

    // Output Config
    pub emit_low_significance: bool,
    pub emit_medium_significance: bool,
    pub emit_high_significance: bool,
    pub emit_critical_only: bool,

    pub is_active: bool,
    pub created_at: DateTime&lt;Utc&gt;,
    pub updated_at: DateTime&lt;Utc&gt;,
}
<span class="boring">}</span></code></pre>
<h2 id="mcp-integration"><a class="header" href="#mcp-integration">MCP Integration</a></h2>
<h3 id="scanner-tools"><a class="header" href="#scanner-tools">Scanner Tools</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>scanner_status</code></td><td>Get scanner status and statistics</td></tr>
<tr><td><code>scanner_events</code></td><td>Get recent events with filtering</td></tr>
<tr><td><code>scanner_track_market</code></td><td>Track a market by slug</td></tr>
<tr><td><code>scanner_search_markets</code></td><td>Fuzzy search markets</td></tr>
<tr><td><code>scanner_save_to_engram</code></td><td>Save event as engram</td></tr>
</tbody>
</table>
</div>
<h3 id="scanner-resources"><a class="header" href="#scanner-resources">Scanner Resources</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>URI</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>erebus://scanner</code></td><td>Scanner status and config</td></tr>
<tr><td><code>erebus://scanner/{cow_id}</code></td><td>Userâ€™s forked scanner</td></tr>
<tr><td><code>erebus://scanner/events</code></td><td>Live event stream (SSE)</td></tr>
</tbody>
</table>
</div>
<h3 id="event-format-mcp-compatible"><a class="header" href="#event-format-mcp-compatible">Event Format (MCP Compatible)</a></h3>
<pre><code class="language-json">{
  "id": "uuid-here",
  "event_type": "price_change",
  "timestamp": "2024-01-15T10:30:00Z",
  "significance": "high",
  "market": {
    "id": "condition_id",
    "slug": "market-slug",
    "title": "Will X happen?"
  },
  "data": {
    "outcome": "Yes",
    "old_price": "0.45",
    "new_price": "0.52",
    "change_percent": "15.56"
  }
}
</code></pre>
<h2 id="service-structure-1"><a class="header" href="#service-structure-1">Service Structure</a></h2>
<pre><code>svc/poly-mev/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ .env.example
â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ 001_create_scanner_tables.sql
â””â”€â”€ src/
    â”œâ”€â”€ main.rs
    â”œâ”€â”€ config.rs
    â”œâ”€â”€ error.rs
    â”œâ”€â”€ server.rs
    â”‚
    â”œâ”€â”€ api/
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ gamma.rs          # Gamma API (markets, events)
    â”‚   â”œâ”€â”€ clob.rs           # CLOB API (orderbook, prices)
    â”‚   â””â”€â”€ websocket.rs      # WebSocket client
    â”‚
    â”œâ”€â”€ models/
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ market.rs
    â”‚   â”œâ”€â”€ order.rs
    â”‚   â””â”€â”€ scanner_event.rs
    â”‚
    â”œâ”€â”€ scanner/
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ engine.rs         # Main scanner loop
    â”‚   â”œâ”€â”€ signals.rs        # Signal detection
    â”‚   â””â”€â”€ processor.rs      # Event normalization
    â”‚
    â”œâ”€â”€ handlers/
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ health.rs
    â”‚   â”œâ”€â”€ markets.rs
    â”‚   â”œâ”€â”€ scanner.rs
    â”‚   â””â”€â”€ sse.rs            # SSE streaming
    â”‚
    â””â”€â”€ database/
        â”œâ”€â”€ mod.rs
        â””â”€â”€ repositories/
            â”œâ”€â”€ mod.rs
            â”œâ”€â”€ markets.rs
            â””â”€â”€ events.rs
</code></pre>
<h2 id="api-endpoints-6"><a class="header" href="#api-endpoints-6">API Endpoints</a></h2>
<h3 id="scanner-control"><a class="header" href="#scanner-control">Scanner Control</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/health</code></td><td>Service health</td></tr>
<tr><td>GET</td><td><code>/scanner/stream</code></td><td>SSE event stream</td></tr>
<tr><td>GET</td><td><code>/scanner/status</code></td><td>Scanner status + stats</td></tr>
<tr><td>POST</td><td><code>/scanner/start</code></td><td>Start scanning</td></tr>
<tr><td>POST</td><td><code>/scanner/stop</code></td><td>Stop scanning</td></tr>
</tbody>
</table>
</div>
<h3 id="markets-1"><a class="header" href="#markets-1">Markets</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/markets</code></td><td>List tracked markets</td></tr>
<tr><td>GET</td><td><code>/markets/search?q=</code></td><td>Fuzzy search markets</td></tr>
<tr><td>POST</td><td><code>/markets/track</code></td><td>Track by slug or condition_id</td></tr>
<tr><td>DELETE</td><td><code>/markets/:id/track</code></td><td>Untrack market</td></tr>
<tr><td>GET</td><td><code>/markets/top?limit=50</code></td><td>Top markets by volume</td></tr>
</tbody>
</table>
</div>
<h3 id="events"><a class="header" href="#events">Events</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/events?limit=100</code></td><td>Recent scanner events</td></tr>
</tbody>
</table>
</div>
<h2 id="frontend-components"><a class="header" href="#frontend-components">Frontend Components</a></h2>
<h3 id="sandbox-tab-memcache"><a class="header" href="#sandbox-tab-memcache">Sandbox Tab (MemCache)</a></h3>
<p>New first tab in MemCache submenu containing:</p>
<ul>
<li><strong>Viewport</strong> - Live scanner feed display</li>
<li><strong>Tool Builder</strong> - Build custom tools/COWs</li>
<li><strong>Engram Creator</strong> - Create engrams from scanner insights</li>
</ul>
<h3 id="new-hook-usepolyscanner"><a class="header" href="#new-hook-usepolyscanner">New Hook: usePolyScanner</a></h3>
<pre><code class="language-typescript">interface UsePolyScannerReturn {
  // Event streaming
  events: ScannerEvent[];
  isConnected: boolean;
  connectToStream: () =&gt; void;
  disconnectFromStream: () =&gt; void;
  clearEvents: () =&gt; void;

  // Scanner status
  status: ScannerStatus | null;

  // Market management
  trackedMarkets: TrackedMarket[];
  topMarkets: TrackedMarket[];
  searchMarkets: (query: string) =&gt; Promise&lt;TrackedMarket[]&gt;;
  trackMarket: (slugOrId: string) =&gt; Promise&lt;boolean&gt;;
  untrackMarket: (id: string) =&gt; Promise&lt;boolean&gt;;

  // Filtering
  getEventsByType: (type: string) =&gt; ScannerEvent[];
  getHighSignificanceEvents: () =&gt; ScannerEvent[];
}
</code></pre>
<h2 id="database-schema-2"><a class="header" href="#database-schema-2">Database Schema</a></h2>
<pre><code class="language-sql">-- Tracked markets
CREATE TABLE tracked_markets (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    market_id VARCHAR(255) NOT NULL UNIQUE,
    condition_id VARCHAR(255),
    slug VARCHAR(255),
    title TEXT NOT NULL,
    category VARCHAR(100),
    last_price DECIMAL(20, 8),
    volume_24h DECIMAL(20, 8),
    is_top_market BOOLEAN DEFAULT false,
    tracked_since TIMESTAMPTZ DEFAULT NOW(),
    is_active BOOLEAN DEFAULT true,
    metadata JSONB DEFAULT '{}'
);

-- Scanner events (for history/analysis)
CREATE TABLE scanner_events (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    event_type VARCHAR(50) NOT NULL,
    market_id VARCHAR(255) NOT NULL,
    significance VARCHAR(20) NOT NULL,
    event_data JSONB NOT NULL,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Market snapshots (for trend detection)
CREATE TABLE market_snapshots (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    market_id VARCHAR(255) NOT NULL,
    price DECIMAL(20, 8),
    volume_24h DECIMAL(20, 8),
    liquidity DECIMAL(20, 8),
    spread DECIMAL(20, 8),
    snapshot_at TIMESTAMPTZ DEFAULT NOW()
);
</code></pre>
<h2 id="implementation-phases"><a class="header" href="#implementation-phases">Implementation Phases</a></h2>
<h3 id="phase-1-backend-foundation"><a class="header" href="#phase-1-backend-foundation">Phase 1: Backend Foundation</a></h3>
<ol>
<li>Create <code>svc/poly-mev/</code> directory structure</li>
<li>Set up Cargo.toml with dependencies</li>
<li>Implement config, error, server modules</li>
<li>Create all model files</li>
<li>Implement health endpoint</li>
</ol>
<h3 id="phase-2-polymarket-api-clients"><a class="header" href="#phase-2-polymarket-api-clients">Phase 2: Polymarket API Clients</a></h3>
<ol>
<li>Implement <code>api/gamma.rs</code> - market fetching</li>
<li>Implement <code>api/clob.rs</code> - orderbook data</li>
<li>Implement <code>api/websocket.rs</code> - real-time stream</li>
<li>Test connections to all APIs</li>
</ol>
<h3 id="phase-3-scanner-engine"><a class="header" href="#phase-3-scanner-engine">Phase 3: Scanner Engine</a></h3>
<ol>
<li>Implement <code>scanner/signals.rs</code> - detection algorithms</li>
<li>Implement <code>scanner/processor.rs</code> - event normalization</li>
<li>Implement <code>scanner/engine.rs</code> - main loop</li>
<li>Set up broadcast channel for SSE</li>
</ol>
<h3 id="phase-4-http-handlers--erebus-integration"><a class="header" href="#phase-4-http-handlers--erebus-integration">Phase 4: HTTP Handlers + Erebus Integration</a></h3>
<ol>
<li>Implement SSE streaming handler</li>
<li>Implement market CRUD + search</li>
<li>Create Erebus proxy routes at <code>/api/poly/*</code></li>
<li>Add database repositories</li>
</ol>
<h3 id="phase-5-frontend---sandbox-tab"><a class="header" href="#phase-5-frontend---sandbox-tab">Phase 5: Frontend - Sandbox Tab</a></h3>
<ol>
<li>Add â€œsandboxâ€ to MemCacheSection type</li>
<li>Create Sandbox.tsx container</li>
<li>Create ScannerViewport.tsx</li>
<li>Create MarketSearch.tsx</li>
<li>Implement usePolyScanner hook</li>
</ol>
<h3 id="phase-6-forkable-cow--mcp"><a class="header" href="#phase-6-forkable-cow--mcp">Phase 6: Forkable COW + MCP</a></h3>
<ol>
<li>Create ScannerConfig model</li>
<li>Implement per-COW SSE endpoints</li>
<li>Add scanner tools to Erebus MCP handler</li>
<li>Implement fork workflow in Crossroads</li>
<li>Test agent subscription</li>
</ol>
<h2 id="verification"><a class="header" href="#verification">Verification</a></h2>
<h3 id="backend-tests"><a class="header" href="#backend-tests">Backend Tests</a></h3>
<pre><code class="language-bash"># Health check
curl http://localhost:9006/health

# Scanner status
curl http://localhost:9006/scanner/status

# Top markets
curl http://localhost:9006/markets/top?limit=20

# Search markets
curl "http://localhost:9006/markets/search?q=trump"

# SSE stream (keep open)
curl -N http://localhost:9006/scanner/stream
</code></pre>
<h3 id="mcp-tests"><a class="header" href="#mcp-tests">MCP Tests</a></h3>
<pre><code class="language-bash"># Get scanner status via MCP
curl -X POST http://localhost:3000/mcp/jsonrpc \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "tools/call",
    "params": {
      "name": "scanner_status",
      "arguments": {}
    }
  }'

# Get high significance events
curl -X POST http://localhost:3000/mcp/jsonrpc \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 2,
    "method": "tools/call",
    "params": {
      "name": "scanner_events",
      "arguments": { "significance": "high", "limit": 5 }
    }
  }'
</code></pre>
<h3 id="forkable-cow-tests"><a class="header" href="#forkable-cow-tests">Forkable COW Tests</a></h3>
<pre><code class="language-bash"># Fork the base scanner
curl -X POST http://localhost:3000/api/marketplace/fork \
  -H "Content-Type: application/json" \
  -d '{
    "listing_id": "scanner-base",
    "wallet_address": "0xtest...",
    "custom_name": "My Politics Scanner"
  }'

# Subscribe to custom scanner SSE
curl -N http://localhost:3000/api/poly/scanner/{cow_id}/stream
</code></pre>
<h2 id="related-10"><a class="header" href="#related-10">Related</a></h2>
<ul>
<li><a href="#polyswarm-cow-implementation-plan">Poly Mev Plan</a></li>
<li><a href="#engrams-service">Engrams Service</a></li>
<li><a href="#crossroads-marketplace">Crossroads Marketplace</a></li>
<li><a href="#mcp-servers">MCP Servers</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="arbfarm-solana-mev-agent-swarm"><a class="header" href="#arbfarm-solana-mev-agent-swarm">ArbFarm: Solana MEV Agent Swarm</a></h1>
<p><strong>NullBlockâ€™s Solana Arbitrage &amp; MEV Agent Swarm</strong> - Autonomous multi-agent system for capturing MEV opportunities on Solana with intelligent threat detection and composable event architecture.</p>
<hr>
<h2 id="golden-rule-protocol-first-event-architecture"><a class="header" href="#golden-rule-protocol-first-event-architecture">GOLDEN RULE: Protocol-First Event Architecture</a></h2>
<p><strong>ALL agent-to-agent and tool communications MUST use standardized protocols with subscribable events. This enables future agents to plug in and consume events without modifying existing code.</strong></p>
<h3 id="protocol-standards"><a class="header" href="#protocol-standards">Protocol Standards</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Communication Type</th><th>Protocol</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td>Agent â†” Agent</td><td>A2A</td><td>Inter-agent coordination, task delegation</td></tr>
<tr><td>Agent â†” Tools</td><td>MCP</td><td>Tool invocation, resource access</td></tr>
<tr><td>Events â†’ Subscribers</td><td>Event Bus</td><td>Publish/subscribe for all system events</td></tr>
<tr><td>External â†’ Service</td><td>REST/SSE</td><td>HTTP API and real-time streams</td></tr>
</tbody>
</table>
</div>
<h3 id="event-bus-architecture"><a class="header" href="#event-bus-architecture">Event Bus Architecture</a></h3>
<p>Every agent and tool MUST emit events to a central event bus. Events are:</p>
<ol>
<li><strong>Persisted to DB</strong> for history and replay</li>
<li><strong>Streamed via SSE</strong> for real-time subscribers</li>
<li><strong>Subscribable by any agent</strong> via topic filters</li>
</ol>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ArbEvent {
    pub id: EventId,
    pub event_type: EventType,
    pub source: EventSource,       // Which agent/tool emitted
    pub topic: String,             // e.g., "arb.edge.detected", "arb.trade.executed"
    pub payload: serde_json::Value,
    pub timestamp: DateTime&lt;Utc&gt;,
    pub correlation_id: Option&lt;String&gt;, // Link related events
}

pub enum EventSource {
    Agent(AgentType),
    Tool(String),
    External(String),
}

pub enum AgentType {
    Scanner,
    Refiner,
    MevHunter,
    Executor,
    StrategyEngine,
    ResearchDD,
    CopyTrade,
    ThreatDetector,
    EngramHarvester,
    Overseer,
}
<span class="boring">}</span></code></pre>
<h3 id="event-topics-subscribable"><a class="header" href="#event-topics-subscribable">Event Topics (Subscribable)</a></h3>
<pre><code>arb.scanner.*                    # All scanner events
arb.scanner.signal.detected      # New signal detected
arb.scanner.venue.added          # New venue discovered

arb.edge.*                       # All edge events
arb.edge.detected                # New opportunity found
arb.edge.approved                # Edge approved for execution
arb.edge.rejected                # Edge rejected
arb.edge.executing               # Trade in progress
arb.edge.executed                # Trade completed
arb.edge.failed                  # Trade failed

arb.strategy.*                   # Strategy events
arb.strategy.created             # New strategy added
arb.strategy.updated             # Strategy modified
arb.strategy.triggered           # Strategy conditions met

arb.research.*                   # Research/DD events
arb.research.url.ingested        # URL analyzed
arb.research.strategy.discovered # New strategy found
arb.research.strategy.approved   # Strategy approved for testing

arb.kol.*                        # KOL tracking events
arb.kol.trade.detected           # KOL made a trade
arb.kol.trade.copied             # We copied the trade
arb.kol.trust.updated            # Trust score changed

arb.threat.*                     # Threat detection events
arb.threat.detected              # Threat identified
arb.threat.blocked               # Entity blocked
arb.threat.alert                 # Alert raised

arb.engram.*                     # Engram events
arb.engram.created               # New engram stored
arb.engram.pattern.matched       # Pattern recognized
arb.engram.avoidance.created     # Avoidance rule created
arb.engram.strategy.optimized    # Strategy optimized via engram analysis

arb.consensus.*                  # Consensus events
arb.consensus.requested          # Consensus request initiated
arb.consensus.completed          # Consensus decision completed
arb.consensus.failed             # Consensus failed (timeout/disagreement)

arb.swarm.*                      # Swarm health events
arb.swarm.agent.started          # Agent spawned
arb.swarm.agent.failed           # Agent crashed
arb.swarm.agent.recovered        # Agent restarted
</code></pre>
<h3 id="subscribing-to-events-any-agenttool"><a class="header" href="#subscribing-to-events-any-agenttool">Subscribing to Events (Any Agent/Tool)</a></h3>
<p><strong>MCP Resource for Event Subscription</strong>:</p>
<pre><code class="language-yaml">erebus://arb/events:
  description: "Subscribe to ArbFarm events"
  params:
    topics: ["arb.edge.*", "arb.trade.*"]  # Filter by topic pattern
    since: "2024-01-01T00:00:00Z"          # Replay from timestamp
</code></pre>
<p><strong>Example: Content Generation Agent (Future Fork)</strong>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// A new agent that subscribes to events and generates X content
impl ContentAgent {
    async fn start(&amp;self, event_bus: &amp;EventBus) {
        // Subscribe to interesting events
        let subscription = event_bus.subscribe(vec![
            "arb.edge.executed",
            "arb.research.strategy.discovered",
            "arb.threat.detected",
        ]).await;

        while let Some(event) = subscription.next().await {
            match event.topic.as_str() {
                "arb.edge.executed" =&gt; {
                    let trade: TradeResult = serde_json::from_value(event.payload)?;
                    if trade.profit_sol &gt; 0.1 {
                        self.generate_win_tweet(trade).await;
                    }
                }
                "arb.threat.detected" =&gt; {
                    let threat: ThreatAlert = serde_json::from_value(event.payload)?;
                    self.generate_warning_tweet(threat).await;
                }
                _ =&gt; {}
            }
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="composability-example"><a class="header" href="#composability-example">Composability Example</a></h3>
<p><strong>Adding a Content Generation Agent to an existing fork:</strong></p>
<ol>
<li><strong>Fork ArbFarm COW</strong></li>
<li><strong>Create new agent</strong>: <code>agents/content_gen.rs</code></li>
<li><strong>Subscribe to events</strong>:
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>event_bus.subscribe(["arb.edge.executed", "arb.threat.detected"])
<span class="boring">}</span></code></pre>
</li>
<li><strong>Process events and generate content</strong></li>
<li><strong>Publish own events</strong>: <code>arb.content.tweet.generated</code></li>
<li><strong>Other agents can subscribe</strong> to content events</li>
</ol>
<p><strong>No modification to existing agents required</strong> - just plug in and subscribe!</p>
<hr>
<h2 id="core-concepts"><a class="header" href="#core-concepts">Core Concepts</a></h2>
<h3 id="abstract-mev-venue-model"><a class="header" href="#abstract-mev-venue-model">Abstract MEV Venue Model</a></h3>
<p>Different MEV opportunities (DEXes, bonding curves, lending, etc.) share common patterns. We model them abstractly to support any venue type.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait MevVenue {
    fn venue_type(&amp;self) -&gt; VenueType;
    fn scan_for_edges(&amp;self) -&gt; Vec&lt;Edge&gt;;
    fn estimate_profit(&amp;self, edge: &amp;Edge) -&gt; ProfitEstimate;
    fn execute(&amp;self, edge: &amp;Edge) -&gt; ExecutionResult;
}

pub enum VenueType {
    DexAmm,           // Jupiter, Raydium, Orca
    BondingCurve,     // pump.fun, moonshot
    Lending,          // Marginfi, Kamino
    Orderbook,        // Phoenix, OpenBook
}
<span class="boring">}</span></code></pre>
<h3 id="multi-llm-consensus-engine"><a class="header" href="#multi-llm-consensus-engine">Multi-LLM Consensus Engine</a></h3>
<p>Agent-directed trades require consensus from multiple LLMs to reduce hallucination risk and improve decision quality.</p>
<p><strong>How it works</strong>:</p>
<ol>
<li>Edge surfaced to agent via MCP/SSE</li>
<li>Agent queries multiple LLMs (via OpenRouter) with edge context</li>
<li>Each LLM returns approve/reject with confidence score</li>
<li>Weighted voting determines outcome</li>
<li>Consensus outcome stored as engram for pattern learning</li>
</ol>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ConsensusRequest {
    pub edge_id: Uuid,
    pub models: Vec&lt;String&gt;,  // ["claude-3-opus", "gpt-4-turbo", "llama-3-70b"]
    pub prompt_template: String,
    pub min_agreement: f32,   // 0.5 = majority
    pub timeout_secs: u32,
}

pub struct ConsensusResult {
    pub approved: bool,
    pub agreement_score: f32,
    pub model_votes: Vec&lt;ModelVote&gt;,
    pub reasoning_summary: String,
}
<span class="boring">}</span></code></pre>
<p><strong>Engram Integration</strong>: Store consensus outcomes as engrams for pattern learning - which model combinations produce best results for which edge types.</p>
<h3 id="atomic-profit-guarantees"><a class="header" href="#atomic-profit-guarantees">Atomic Profit Guarantees</a></h3>
<p>Some MEV opportunities are <strong>atomic</strong> - profit is guaranteed or transaction reverts. These deserve aggressive execution with minimal risk checks since the only downside is gas cost on failure.</p>
<p><strong>Atomic Opportunity Types</strong>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Atomicity</th><th>Risk Profile</th></tr>
</thead>
<tbody>
<tr><td>Flash Loan Arb</td><td>Fully Atomic</td><td>Zero capital risk (reverts if unprofitable)</td></tr>
<tr><td>Bundled DEX Arb</td><td>Fully Atomic</td><td>Zero capital risk (Jito bundle fails atomically)</td></tr>
<tr><td>Sandwich (Jito)</td><td>Fully Atomic</td><td>Fails if frontrun doesnâ€™t setup backrun</td></tr>
<tr><td>JIT Liquidity</td><td>Fully Atomic</td><td>LP provided and withdrawn in same block</td></tr>
<tr><td>Multi-leg Arb</td><td>Depends</td><td>Atomic if all legs in single tx/bundle</td></tr>
</tbody>
</table>
</div>
<p><strong>Non-Atomic (Capital at Risk)</strong>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Risk</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Cross-chain Arb</td><td>High</td><td>Bridge delay exposes to price movement</td></tr>
<tr><td>Delayed Exit</td><td>Medium</td><td>Entry and exit in separate transactions</td></tr>
<tr><td>Copy Trading</td><td>Medium</td><td>Following KOL with delay</td></tr>
</tbody>
</table>
</div>
<p><strong>Atomicity Classification</strong>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum AtomicityLevel {
    FullyAtomic,      // Reverts if unprofitable, zero capital risk
    PartiallyAtomic,  // Some legs atomic, some not
    NonAtomic,        // Traditional trade with capital at risk
}

pub struct Edge {
    // ... existing fields ...
    pub atomicity: AtomicityLevel,
    pub simulated_profit_guaranteed: bool,  // Simulation passed
    pub max_gas_cost: u64,                  // Only risk on atomic trades
}
<span class="boring">}</span></code></pre>
<p><strong>Aggressive Config for Atomic Trades</strong>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct AtomicTradeConfig {
    pub priority: Priority::Critical,       // Execute ASAP
    pub skip_agent_approval: bool,          // Auto-execute (no consensus needed)
    pub max_gas_willing: u64,               // Higher gas tolerance
    pub min_profit_after_gas_bps: u16,      // Lower threshold (e.g., 10bps)
    pub retry_with_higher_gas: bool,        // Aggressive retry
    pub bundle_tip_bps: u16,                // Tip for Jito priority
}
<span class="boring">}</span></code></pre>
<p><strong>Detection Flow</strong>:</p>
<pre><code>Edge Detected
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Classify Atomicity  â”‚
â”‚ - All legs in 1 tx? â”‚
â”‚ - Flash loan used?  â”‚
â”‚ - Jito bundle?      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â–¼             â–¼
  Atomic      Non-Atomic
    â”‚             â”‚
    â–¼             â–¼
Simulate      Normal
Transaction   Risk Flow
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Simulation Success? â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
     â–¼           â–¼
   Yes          No
     â”‚           â”‚
     â–¼           â–¼
Execute      Discard
Aggressively (no capital loss)
</code></pre>
<h3 id="dynamic-risk-tuning"><a class="header" href="#dynamic-risk-tuning">Dynamic Risk Tuning</a></h3>
<p>Risk parameters adjust based on multiple signals:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Signal</th><th>Adjustment</th></tr>
</thead>
<tbody>
<tr><td>High volatility</td><td>Reduce position sizes</td></tr>
<tr><td>Drawdown &gt; threshold</td><td>Pause autonomous trades</td></tr>
<tr><td>New token (&lt; 24h)</td><td>Require manual approval</td></tr>
<tr><td>Research agent flags</td><td>Adjust strategy risk scores</td></tr>
<tr><td>Failed trade streak</td><td>Reduce aggression</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="swarm-architecture-1"><a class="header" href="#swarm-architecture-1">Swarm Architecture</a></h2>
<pre><code>                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Resilience Overseer â”‚
                    â”‚    (Meta-Agent)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ monitors/recovers
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚                          â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
â”‚Scannerâ”‚â”€â–¶â”‚Refinerâ”‚â”€â–¶â”‚Strategy Engineâ”‚â”€â–¶â”‚Executorâ”‚â”€â–¶â”‚Engram â”‚
â”‚       â”‚  â”‚       â”‚  â”‚               â”‚  â”‚        â”‚  â”‚Harvestâ”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  â”‚                      â”‚                      â”‚
    â”‚  â–¼                      â–¼                      â–¼
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â”‚Researchâ”‚        â”‚Copy Tradeâ”‚          â”‚  Threat  â”‚
    â”‚ â”‚  /DD   â”‚        â”‚  Agent   â”‚          â”‚ Detector â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚MEV      â”‚
â”‚Hunter   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr>
<h2 id="agent-definitions"><a class="header" href="#agent-definitions">Agent Definitions</a></h2>
<h3 id="1-venue-scanner-agent"><a class="header" href="#1-venue-scanner-agent">1. Venue Scanner Agent</a></h3>
<p><strong>Purpose</strong>: Continuously scan Solana for MEV opportunities across all venue types</p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>Monitor DEX pools (Jupiter, Raydium, Orca)</li>
<li>Track bonding curve tokens (pump.fun, moonshot)</li>
<li>Watch lending positions (Marginfi, Kamino)</li>
<li>Detect price discrepancies across venues</li>
<li>Emit raw signals via event bus</li>
</ul>
<p><strong>Data Sources</strong>:</p>
<ul>
<li>Helius RPC (enhanced Solana node)</li>
<li>Jupiter Price API</li>
<li>Raydium SDK</li>
<li>pump.fun API</li>
<li>Birdeye API</li>
</ul>
<h3 id="2-signal-refiner-agent"><a class="header" href="#2-signal-refiner-agent">2. Signal Refiner Agent</a></h3>
<p><strong>Purpose</strong>: Filter and enrich raw scanner signals</p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>Calculate true profitability (accounting for fees, slippage)</li>
<li>Apply historical pattern matching from engrams</li>
<li>Score signal quality (1-100)</li>
<li>Flag signals for manual review vs auto-execute</li>
<li>Enrich with market context</li>
</ul>
<h3 id="3-mev-hunter-agent"><a class="header" href="#3-mev-hunter-agent">3. MEV Hunter Agent</a></h3>
<p><strong>Purpose</strong>: Specialized detection for advanced MEV patterns</p>
<p><strong>Types Detected</strong>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Pattern</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>DEX Arbitrage</td><td>Price differences across AMMs</td></tr>
<tr><td>Liquidation</td><td>Undercollateralized lending positions</td></tr>
<tr><td>JIT Liquidity</td><td>Just-in-time LP provision before large swaps</td></tr>
<tr><td>Sandwich</td><td>Frontrun + backrun profitable swaps</td></tr>
<tr><td>Backrun</td><td>Profit from price impact of large trades</td></tr>
</tbody>
</table>
</div>
<h3 id="4-execution-engine-agent"><a class="header" href="#4-execution-engine-agent">4. Execution Engine Agent</a></h3>
<p><strong>Purpose</strong>: Execute approved trades with maximum reliability</p>
<p><strong>Capabilities</strong>:</p>
<ul>
<li>Jito bundle submission (priority ordering)</li>
<li>Transaction simulation before execution</li>
<li>Slippage protection</li>
<li>Gas optimization</li>
<li>Retry logic with exponential backoff</li>
<li>Multi-leg atomic execution</li>
</ul>
<p><strong>Execution Modes</strong>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Mode</th><th>Trigger</th><th>Approval</th></tr>
</thead>
<tbody>
<tr><td>Autonomous</td><td>High confidence, within risk params</td><td>Auto-execute</td></tr>
<tr><td>Hybrid</td><td>Medium confidence</td><td>Auto if profit &gt; X, else surface</td></tr>
<tr><td>Agent-Directed</td><td>Low confidence, novel pattern</td><td>Require MCP approval</td></tr>
</tbody>
</table>
</div>
<h3 id="5-strategy-engine-agent"><a class="header" href="#5-strategy-engine-agent">5. Strategy Engine Agent</a></h3>
<p><strong>Purpose</strong>: Route opportunities to correct execution path based on strategy classification and atomicity</p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>Evaluate incoming edges against active strategies</li>
<li><strong>Classify atomicity</strong> (guaranteed profit vs capital-at-risk)</li>
<li>Route atomic trades to aggressive execution path</li>
<li>Route autonomous strategies directly to execution</li>
<li>Surface agent-directed opportunities via MCP/SSE</li>
<li>Apply dynamic risk adjustments before execution</li>
<li>Track strategy performance for optimization</li>
</ul>
<p><strong>Decision Flow</strong> (with Atomicity):</p>
<pre><code>Edge Detected
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Classify Atomicity  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
 Atomic    Non-Atomic
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Simulateâ”‚ â”‚ Match Strategy? â”‚â”€â”€Noâ”€â”€â–¶ Log &amp; Discard
â”‚  Tx    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â”‚ Yes
    â”‚               â–¼
    â–¼          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
Success?       â”‚ Within Risk Params? â”‚â”€â”€Noâ”€â”€â–¶ Adjust or Reject
    â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”´â”€â”€â”€â”               â”‚ Yes
â–¼       â–¼               â–¼
Yes     No         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚          â”‚  Execution Mode?    â”‚
â–¼       â–¼          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Execute Discard             â”‚
AGGRESSIVE     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
(skip risk     â–¼            â–¼            â–¼
 checks)     Auto        Hybrid       Agent
             â”‚            â”‚             â”‚
             â–¼            â–¼             â–¼
          Execute     Check Params   Surface
                                     to Agent
</code></pre>
<p><strong>Atomic Trade Execution</strong>:</p>
<ul>
<li>Skip normal risk checks (only gas cost at risk)</li>
<li>Lower profit threshold (10bps vs 50bps)</li>
<li>Higher priority in Jito bundles</li>
<li>Auto-retry with increasing gas</li>
<li>No agent approval needed</li>
</ul>
<p><strong>Bonding Curve Tools</strong> (pump.fun, moonshot, etc.):</p>
<pre><code>curve_buy_token        - Buy on any bonding curve
curve_sell_token       - Sell (before/after graduation)
curve_check_progress   - Check graduation progress %
curve_get_holder_stats - Top holders, concentration
curve_graduation_eta   - Estimated graduation time
</code></pre>
<h3 id="6-researchdd-agent"><a class="header" href="#6-researchdd-agent">6. Research/DD Agent</a></h3>
<p><strong>Purpose</strong>: Ingest external intelligence from URLs, social media, and perform due diligence</p>
<p><strong>Capabilities</strong>:</p>
<ul>
<li><strong>URL Ingestion</strong>: WebFetch-style analysis of links (tweets, articles, threads)</li>
<li><strong>Strategy Extraction</strong>: Parse trading strategies from content</li>
<li><strong>X/Twitter Monitoring</strong>: Track specified accounts for alpha</li>
<li><strong>Backtesting</strong>: Simulate discovered strategies against historical data</li>
</ul>
<p><strong>Workflow</strong>:</p>
<pre><code>URL/Content Input
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Content Analysis â”‚
â”‚ (LLM extraction) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Strategy Found?  â”‚â”€â”€Noâ”€â”€â–¶ Store as intel engram
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Yes
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backtest Strategyâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Profitable?     â”‚â”€â”€Noâ”€â”€â–¶ Archive
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Yes
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Surface for      â”‚
â”‚ Approval/Testing â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>MCP Tools</strong>:</p>
<pre><code class="language-yaml">research_ingest_url:
  description: "Ingest and analyze a URL for trading strategies"
  params: [url, context]

research_monitor_account:
  description: "Add X/Twitter account to monitoring list"
  params: [handle, track_type]

research_backtest_strategy:
  description: "Backtest a discovered strategy"
  params: [strategy_id, period_days]

research_list_discoveries:
  description: "List discovered strategies pending review"
  params: [status, limit]
</code></pre>
<h3 id="7-kol-tracking--copy-trade-agent"><a class="header" href="#7-kol-tracking--copy-trade-agent">7. KOL Tracking + Copy Trade Agent</a></h3>
<p><strong>Purpose</strong>: Track Key Opinion Leaders and optionally copy their trades</p>
<p><strong>Features</strong>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Wallet Tracking</td><td>Monitor specified wallets via Helius webhooks</td></tr>
<tr><td>Social Handle Tracking</td><td>Link X handles to wallets</td></tr>
<tr><td>Trust Scoring</td><td>Track KOL performance over time</td></tr>
<tr><td>Copy Trading</td><td>Auto-copy trades with configurable delay</td></tr>
<tr><td>Auto-Disable</td><td>Stop copying if trust score drops below threshold</td></tr>
</tbody>
</table>
</div>
<p><strong>Trust Score Calculation</strong>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct TrustScore {
    pub total_trades_tracked: u32,
    pub profitable_trades: u32,
    pub avg_profit_percent: f32,
    pub max_drawdown: f32,
    pub consistency_score: f32,  // Low variance = higher score
    pub final_score: f32,        // Weighted combination (0-100)
}
<span class="boring">}</span></code></pre>
<p><strong>Copy Trade Config</strong>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct CopyTradeConfig {
    pub entity_id: Uuid,          // KOL ID
    pub enabled: bool,
    pub max_position_sol: f64,    // Max per-trade
    pub delay_ms: u64,            // Wait before copying (avoid frontrun)
    pub min_trust_score: f32,     // Auto-disable if below
    pub copy_percentage: f32,     // 1.0 = match position, 0.5 = half size
    pub token_whitelist: Option&lt;Vec&lt;String&gt;&gt;,
    pub token_blacklist: Option&lt;Vec&lt;String&gt;&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Flow</strong>:</p>
<pre><code>Helius Webhook (KOL Trade)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parse Trade Data â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Copy Configâ”‚
â”‚ - Enabled?       â”‚
â”‚ - Trust &gt; min?   â”‚
â”‚ - Within limits? â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Pass
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Apply Delay    â”‚
â”‚   (config.delay) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Execute Copy     â”‚
â”‚ (w/ delay)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="8-threat-detection-agent"><a class="header" href="#8-threat-detection-agent">8. Threat Detection Agent</a></h3>
<p><strong>Purpose</strong>: Identify and block bad actors, rug pulls, honeypots, and malicious activity</p>
<p><strong>Threat Categories</strong>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Category</th><th>Indicators</th><th>Response</th></tr>
</thead>
<tbody>
<tr><td>Rug Pull</td><td>Creator sells &gt;50%, liquidity removal</td><td>Block token, warn swarm</td></tr>
<tr><td>Honeypot</td><td>Buy works, sell reverts</td><td>Blacklist contract</td></tr>
<tr><td>Pump &amp; Dump</td><td>Coordinated buys followed by dump</td><td>Avoid entry, track wallets</td></tr>
<tr><td>Sandwich Attack</td><td>Frontrun/backrun targeting us</td><td>Flag bundle, adjust routes</td></tr>
<tr><td>Malicious Bundle</td><td>Jito bundle with hidden exploit</td><td>Reject, report</td></tr>
<tr><td>Wash Trading</td><td>Same wallets cycling volume</td><td>Discount volume signals</td></tr>
</tbody>
</table>
</div>
<p><strong>External Threat Intelligence APIs</strong>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Source</th><th>Purpose</th><th>Data</th></tr>
</thead>
<tbody>
<tr><td>RugCheck API</td><td>Contract audit</td><td>Ownership, mint authority, freeze</td></tr>
<tr><td>GoPlus Security</td><td>Honeypot detection</td><td>Buy/sell tax, transfer restrictions</td></tr>
<tr><td>Birdeye</td><td>Holder analysis</td><td>Top holders, concentration</td></tr>
<tr><td>Helius</td><td>Transaction patterns</td><td>Unusual activity, related wallets</td></tr>
</tbody>
</table>
</div>
<p><strong>X/Twitter Threat Feeds</strong> (via Research Agent):</p>
<ul>
<li>@ZachXBT - Scam exposÃ©s</li>
<li>@CryptoSlam - Rug alerts</li>
<li>@RugDocIO - Contract audits</li>
<li>Custom keyword monitoring: â€œrugâ€, â€œhoneypotâ€, â€œscamâ€, â€œ$TOKENâ€</li>
</ul>
<p><strong>In-House Threat Metrics</strong>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ThreatScore {
    pub token_mint: String,
    pub overall_score: f32,        // 0 (safe) - 1 (threat)
    pub factors: ThreatFactors,
    pub confidence: f32,
    pub last_updated: DateTime&lt;Utc&gt;,
}

pub struct ThreatFactors {
    // Contract Analysis
    pub has_mint_authority: bool,      // Can mint infinite tokens
    pub has_freeze_authority: bool,    // Can freeze wallets
    pub has_blacklist: bool,           // Can block addresses
    pub upgradeable: bool,             // Proxy contract

    // Holder Analysis
    pub top_10_concentration: f32,     // % held by top 10
    pub creator_holdings: f32,         // % held by deployer
    pub suspicious_holder_count: u32,  // Known scam wallets

    // Trading Patterns
    pub sell_pressure_score: f32,      // Recent insider selling
    pub wash_trade_likelihood: f32,    // Fake volume detection
    pub bundle_manipulation: bool,     // Suspicious Jito bundles

    // External Signals
    pub rugcheck_score: f32,           // 0-1, external audit
    pub goplus_honeypot: bool,         // External honeypot check
    pub community_warnings: u32,       // X/Telegram mentions
}
<span class="boring">}</span></code></pre>
<p><strong>Detection Flow</strong>:</p>
<pre><code>New Token/Venue Detected
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parallel Threat Checks  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - RugCheck API          â”‚
â”‚ - GoPlus honeypot       â”‚
â”‚ - Holder concentration  â”‚
â”‚ - Creator wallet historyâ”‚
â”‚ - Contract analysis     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Calculate ThreatScore â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â–¼             â–¼
 Safe (&lt;0.3)   Risky (&gt;0.3)
    â”‚             â”‚
    â–¼             â–¼
 Allow         Block/Flag
 Trading       â”‚
               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ &gt;0.7 = Blockâ”‚
         â”‚ 0.3-0.7=Flagâ”‚
         â”‚ + Engram    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>Real-Time Monitoring</strong>:</p>
<ul>
<li>Track creator wallet activity (large sells = warning)</li>
<li>Monitor liquidity pool changes (removal = rug indicator)</li>
<li>Watch for coordinated bundle activity</li>
<li>Alert on X/Twitter scam mentions</li>
</ul>
<p><strong>MCP Tools</strong>:</p>
<pre><code class="language-yaml">threat_check_token:
  description: "Run full threat analysis on a token"
  params: [token_mint]

threat_check_wallet:
  description: "Analyze wallet for scam history"
  params: [wallet_address]

threat_list_blocked:
  description: "List blocked tokens/wallets"
  params: [category, limit]

threat_report:
  description: "Manually report a threat (saves to engram)"
  params: [entity_type, address, reason, evidence_url]

threat_score_history:
  description: "Get threat score history for a token"
  params: [token_mint]

threat_watch_creator:
  description: "Add creator wallet to high-alert monitoring"
  params: [wallet_address, token_mint]
</code></pre>
<p><strong>Engram Integration</strong>:</p>
<ul>
<li>Store known scam wallets as <code>arb.threat.wallet.{address}</code></li>
<li>Store honeypot contracts as <code>arb.threat.honeypot.{mint}</code></li>
<li>Share threat intel across forked COWs</li>
</ul>
<h3 id="9-engram-harvester-agent"><a class="header" href="#9-engram-harvester-agent">9. Engram Harvester Agent</a></h3>
<p><strong>Purpose</strong>: Extract patterns from successful trades and create shareable engrams</p>
<p><strong>Engram Types Created</strong>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Example Key</th><th>Content</th></tr>
</thead>
<tbody>
<tr><td>Edge Pattern</td><td><code>arb.pattern.dex_spread</code></td><td>Profitable trade signature</td></tr>
<tr><td>Avoidance</td><td><code>arb.avoid.honeypot.{mint}</code></td><td>Token to never trade</td></tr>
<tr><td>Strategy</td><td><code>arb.strategy.curve_graduation</code></td><td>Full strategy config</td></tr>
</tbody>
</table>
</div>
<h3 id="10-resilience-overseer-meta-agent"><a class="header" href="#10-resilience-overseer-meta-agent">10. Resilience Overseer (Meta-Agent)</a></h3>
<p><strong>Purpose</strong>: Swarm health, coordination, and recovery</p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>Monitor agent heartbeats</li>
<li>Detect and recover failed agents</li>
<li>Balance load across agent instances</li>
<li>Coordinate graceful shutdown</li>
<li>Manage circuit breakers</li>
</ul>
<hr>
<h2 id="service-structure-2"><a class="header" href="#service-structure-2">Service Structure</a></h2>
<pre><code>svc/arb-farm/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ .env.example
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ config.rs
â”‚   â”œâ”€â”€ error.rs
â”‚   â”œâ”€â”€ server.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ scanner.rs         # Venue Scanner Agent
â”‚   â”‚   â”œâ”€â”€ refiner.rs         # Signal Refiner Agent
â”‚   â”‚   â”œâ”€â”€ mev_hunter.rs      # MEV Hunter Agent
â”‚   â”‚   â”œâ”€â”€ executor.rs        # Execution Engine Agent
â”‚   â”‚   â”œâ”€â”€ strategy_engine.rs # Strategy Engine Agent
â”‚   â”‚   â”œâ”€â”€ research_dd.rs     # Research/DD Agent
â”‚   â”‚   â”œâ”€â”€ copy_trade.rs      # Copy Trade Agent
â”‚   â”‚   â”œâ”€â”€ threat_detector.rs # Threat Detection Agent
â”‚   â”‚   â”œâ”€â”€ engram_harvester.rs
â”‚   â”‚   â””â”€â”€ overseer.rs        # Resilience Overseer
â”‚   â”‚
â”‚   â”œâ”€â”€ events/                 # Event bus (GOLDEN RULE)
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ bus.rs              # Event bus implementation
â”‚   â”‚   â”œâ”€â”€ types.rs            # ArbEvent, EventSource
â”‚   â”‚   â”œâ”€â”€ topics.rs           # Topic constants
â”‚   â”‚   â”œâ”€â”€ publisher.rs        # Publish events
â”‚   â”‚   â”œâ”€â”€ subscriber.rs       # Subscribe to events
â”‚   â”‚   â””â”€â”€ persistence.rs      # DB storage and replay
â”‚   â”‚
â”‚   â”œâ”€â”€ threat/                 # Threat detection subsystem
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ score.rs           # ThreatScore calculation
â”‚   â”‚   â”œâ”€â”€ factors.rs         # ThreatFactors analysis
â”‚   â”‚   â”œâ”€â”€ monitor.rs         # Real-time threat monitoring
â”‚   â”‚   â””â”€â”€ external/
â”‚   â”‚       â”œâ”€â”€ mod.rs
â”‚   â”‚       â”œâ”€â”€ rugcheck.rs    # RugCheck API client
â”‚   â”‚       â”œâ”€â”€ goplus.rs      # GoPlus Security API
â”‚   â”‚       â””â”€â”€ birdeye.rs     # Birdeye holder analysis
â”‚   â”‚
â”‚   â”œâ”€â”€ research/               # Research/DD subsystem
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ url_ingest.rs      # WebFetch-style URL ingestion
â”‚   â”‚   â”œâ”€â”€ strategy_extract.rs # LLM strategy extraction
â”‚   â”‚   â”œâ”€â”€ backtest.rs        # Strategy backtesting
â”‚   â”‚   â””â”€â”€ social_monitor.rs  # X/Twitter monitoring
â”‚   â”‚
â”‚   â”œâ”€â”€ venues/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ traits.rs          # MevVenue trait
â”‚   â”‚   â”œâ”€â”€ dex/
â”‚   â”‚   â”‚   â”œâ”€â”€ jupiter.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ raydium.rs
â”‚   â”‚   â”‚   â””â”€â”€ orca.rs
â”‚   â”‚   â”œâ”€â”€ curves/
â”‚   â”‚   â”‚   â”œâ”€â”€ pump_fun.rs
â”‚   â”‚   â”‚   â””â”€â”€ moonshot.rs
â”‚   â”‚   â””â”€â”€ lending/
â”‚   â”‚       â”œâ”€â”€ marginfi.rs
â”‚   â”‚       â””â”€â”€ kamino.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ consensus/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ engine.rs          # Multi-LLM consensus
â”‚   â”‚   â”œâ”€â”€ openrouter.rs      # OpenRouter client
â”‚   â”‚   â””â”€â”€ voting.rs          # Weighted voting logic
â”‚   â”‚
â”‚   â”œâ”€â”€ execution/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ jito.rs            # Jito bundle submission
â”‚   â”‚   â”œâ”€â”€ simulation.rs      # Pre-execution simulation
â”‚   â”‚   â””â”€â”€ atomic.rs          # Atomic execution helper
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ edge.rs
â”‚   â”‚   â”œâ”€â”€ strategy.rs
â”‚   â”‚   â”œâ”€â”€ trade.rs
â”‚   â”‚   â””â”€â”€ signal.rs
â”‚   â”‚
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ health.rs
â”‚   â”‚   â”œâ”€â”€ scanner.rs
â”‚   â”‚   â”œâ”€â”€ edges.rs
â”‚   â”‚   â”œâ”€â”€ strategies.rs
â”‚   â”‚   â”œâ”€â”€ consensus.rs       # Multi-LLM consensus endpoints
â”‚   â”‚   â”œâ”€â”€ research.rs        # Research/DD endpoints
â”‚   â”‚   â”œâ”€â”€ copy_trade.rs      # Copy trading endpoints
â”‚   â”‚   â”œâ”€â”€ threat.rs          # Threat detection endpoints
â”‚   â”‚   â”œâ”€â”€ swarm.rs           # Swarm management endpoints
â”‚   â”‚   â””â”€â”€ sse.rs             # Server-sent events
â”‚   â”‚
â”‚   â””â”€â”€ database/
â”‚       â”œâ”€â”€ mod.rs
â”‚       â””â”€â”€ repositories/
â”‚           â”œâ”€â”€ mod.rs
â”‚           â”œâ”€â”€ edges.rs
â”‚           â”œâ”€â”€ strategies.rs
â”‚           â””â”€â”€ trades.rs
â”‚
â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ 001_create_arb_tables.sql
â”‚   â”œâ”€â”€ 002_strategies.sql
â”‚   â”œâ”€â”€ 003_venues.sql
â”‚   â”œâ”€â”€ 004_bonding_curves.sql
â”‚   â”œâ”€â”€ 005_curve_tokens.sql
â”‚   â”œâ”€â”€ 006_consensus.sql
â”‚   â”œâ”€â”€ 007_research.sql
â”‚   â”œâ”€â”€ 008_kol_copy_trade.sql
â”‚   â”œâ”€â”€ 009_threat_detection.sql
â”‚   â””â”€â”€ 010_events.sql
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ integration/
    â””â”€â”€ simulation/
</code></pre>
<hr>
<h2 id="api-endpoints-via-erebus-1"><a class="header" href="#api-endpoints-via-erebus-1">API Endpoints (via Erebus)</a></h2>
<h3 id="scanner"><a class="header" href="#scanner">Scanner</a></h3>
<pre><code>GET  /api/arb/scanner/status           # Scanner status
GET  /api/arb/scanner/stream           # SSE event stream
POST /api/arb/scanner/start            # Start scanning
POST /api/arb/scanner/stop             # Stop scanning
</code></pre>
<h3 id="venues"><a class="header" href="#venues">Venues</a></h3>
<pre><code>GET  /api/arb/venues                   # List tracked venues
POST /api/arb/venues                   # Add venue
GET  /api/arb/venues/:id               # Venue details
DELETE /api/arb/venues/:id             # Remove venue
</code></pre>
<h3 id="edges-opportunities"><a class="header" href="#edges-opportunities">Edges (Opportunities)</a></h3>
<pre><code>GET  /api/arb/edges                    # List detected edges
GET  /api/arb/edges/:id                # Edge details
POST /api/arb/edges/:id/approve        # Approve for execution
POST /api/arb/edges/:id/reject         # Reject with reason
POST /api/arb/edges/:id/execute        # Execute immediately
GET  /api/arb/edges/stream             # SSE for new edges
</code></pre>
<h3 id="strategies"><a class="header" href="#strategies">Strategies</a></h3>
<pre><code>GET  /api/arb/strategies               # List strategies
POST /api/arb/strategies               # Create strategy
GET  /api/arb/strategies/:id           # Strategy details
PUT  /api/arb/strategies/:id           # Update strategy
DELETE /api/arb/strategies/:id         # Delete strategy
POST /api/arb/strategies/:id/toggle    # Enable/disable
GET  /api/arb/strategies/:id/stats     # Performance stats
</code></pre>
<h3 id="consensus"><a class="header" href="#consensus">Consensus</a></h3>
<pre><code>POST /api/arb/consensus/request        # Request multi-LLM consensus
GET  /api/arb/consensus/:id            # Get consensus result
GET  /api/arb/consensus/history        # Past consensus decisions
</code></pre>
<h3 id="researchdd"><a class="header" href="#researchdd">Research/DD</a></h3>
<pre><code>POST /api/arb/research/ingest          # Ingest URL for analysis
GET  /api/arb/research/discoveries     # List discovered strategies
POST /api/arb/research/discoveries/:id/approve   # Approve for testing
POST /api/arb/research/discoveries/:id/reject    # Reject
GET  /api/arb/research/sources         # List monitored sources
POST /api/arb/research/sources         # Add source to monitor
DELETE /api/arb/research/sources/:id   # Remove source
</code></pre>
<h3 id="kol-tracking"><a class="header" href="#kol-tracking">KOL Tracking</a></h3>
<pre><code>GET  /api/arb/kol                      # List tracked KOLs
POST /api/arb/kol                      # Add KOL to track
GET  /api/arb/kol/:id                  # KOL details + stats
PUT  /api/arb/kol/:id                  # Update tracking config
DELETE /api/arb/kol/:id                # Stop tracking
GET  /api/arb/kol/:id/trades           # KOL trade history
POST /api/arb/kol/:id/copy/enable      # Enable copy trading
POST /api/arb/kol/:id/copy/disable     # Disable copy trading
</code></pre>
<h3 id="threat-detection"><a class="header" href="#threat-detection">Threat Detection</a></h3>
<pre><code>GET  /api/arb/threat/check/:mint       # Full threat analysis for token
GET  /api/arb/threat/wallet/:address   # Check wallet for scam history
GET  /api/arb/threat/blocked           # List blocked tokens/wallets
POST /api/arb/threat/report            # Manually report a threat
GET  /api/arb/threat/score/:mint       # Get current threat score
GET  /api/arb/threat/score/:mint/history # Threat score history
POST /api/arb/threat/watch             # Add creator to high-alert
GET  /api/arb/threat/alerts            # Recent threat alerts
POST /api/arb/threat/whitelist         # Whitelist trusted token/wallet
</code></pre>
<h3 id="swarm-management"><a class="header" href="#swarm-management">Swarm Management</a></h3>
<pre><code>GET  /api/arb/swarm/status             # Swarm health
POST /api/arb/swarm/pause              # Pause all execution
POST /api/arb/swarm/resume             # Resume execution
GET  /api/arb/swarm/agents             # List agent statuses
POST /api/arb/swarm/agents/:type/restart # Restart specific agent
</code></pre>
<h3 id="trades"><a class="header" href="#trades">Trades</a></h3>
<pre><code>GET  /api/arb/trades                   # Trade history
GET  /api/arb/trades/:id               # Trade details
GET  /api/arb/trades/stats             # P&amp;L statistics
</code></pre>
<hr>
<h2 id="mcp-tools"><a class="header" href="#mcp-tools">MCP Tools</a></h2>
<pre><code class="language-yaml"># Scanner Tools
scanner_status:
  description: "Get scanner status and statistics"
  params: []

scanner_signals:
  description: "Get recent signals with filtering"
  params: [venue_type, min_profit_bps, limit]

scanner_add_venue:
  description: "Add a venue to scan"
  params: [venue_type, address, config]

# Edge Tools
edge_list:
  description: "List detected edges (opportunities)"
  params: [status, venue_type, min_profit, limit]

edge_details:
  description: "Get full edge details"
  params: [edge_id]

edge_approve:
  description: "Approve edge for execution"
  params: [edge_id]

edge_reject:
  description: "Reject edge with reason (saved as avoidance engram)"
  params: [edge_id, reason]

# Atomicity Tools (Guaranteed Profit Detection)
edge_classify_atomicity:
  description: "Analyze if edge is atomic (guaranteed profit or revert)"
  params: [edge_id]

edge_simulate_atomic:
  description: "Simulate atomic trade, returns guaranteed profit or failure"
  params: [edge_id, gas_price_lamports]

edge_list_atomic:
  description: "List all atomic edges with guaranteed profit"
  params: [min_profit_lamports, limit]

edge_execute_atomic:
  description: "Execute atomic trade with aggressive config"
  params: [edge_id, max_gas_lamports, bundle_tip_bps]

# Strategy Tools
strategy_list:
  description: "List active trading strategies"
  params: []

strategy_create:
  description: "Create a new trading strategy"
  params: [name, venue_types, risk_params, execution_mode]

strategy_toggle:
  description: "Enable or disable a strategy"
  params: [strategy_id, enabled]

# Consensus Tools
consensus_request:
  description: "Request multi-LLM consensus on a trade"
  params: [edge_id, models, min_agreement]

consensus_result:
  description: "Get consensus result"
  params: [consensus_id]

consensus_history:
  description: "Get history of consensus decisions"
  params: [edge_id, approved_only, limit]

# Engram Tools
engram_create:
  description: "Create a new engram (pattern, avoidance, strategy, or intel)"
  params: [key, engram_type, content, confidence, tags, expires_in_hours]

engram_get:
  description: "Get an engram by its key"
  params: [key]

engram_search:
  description: "Search engrams with filtering"
  params: [engram_type, key_prefix, tag, min_confidence, limit, offset]

engram_find_patterns:
  description: "Find matching patterns for an edge type and venue"
  params: [edge_type, venue_type, route_signature, min_success_rate]

engram_check_avoidance:
  description: "Check if an entity should be avoided based on stored avoidance engrams"
  params: [entity_type, address]

engram_create_avoidance:
  description: "Create an avoidance engram for a bad actor or risky entity"
  params: [entity_type, address, reason, category, severity]

engram_create_pattern:
  description: "Create an edge pattern engram from successful trade data"
  params: [edge_type, venue_type, route_signature, success_rate, avg_profit_bps, sample_count]

engram_delete:
  description: "Delete an engram by its key"
  params: [key]

engram_stats:
  description: "Get engram harvester statistics"
  params: []

# Research/DD Tools
research_ingest_url:
  description: "Ingest and analyze a URL for trading strategies"
  params: [url, context]

research_monitor_account:
  description: "Add X/Twitter account to monitoring list"
  params: [handle, track_type]

research_backtest_strategy:
  description: "Backtest a discovered strategy"
  params: [strategy_id, period_days]

research_list_discoveries:
  description: "List discovered strategies pending review"
  params: [status, limit]

# KOL/Copy Trade Tools
kol_track:
  description: "Start tracking a KOL wallet or social handle"
  params: [wallet_address, twitter_handle, name]

kol_list:
  description: "List tracked KOLs with trust scores"
  params: []

kol_stats:
  description: "Get detailed KOL performance stats"
  params: [kol_id]

copy_enable:
  description: "Enable copy trading for a KOL"
  params: [kol_id, max_position_sol, delay_ms]

copy_disable:
  description: "Disable copy trading for a KOL"
  params: [kol_id]

copy_active:
  description: "List currently active copy positions"
  params: []

# Threat Detection Tools
threat_check_token:
  description: "Run full threat analysis on a token"
  params: [token_mint]

threat_check_wallet:
  description: "Analyze wallet for scam history"
  params: [wallet_address]

threat_list_blocked:
  description: "List blocked tokens/wallets"
  params: [category, limit]

threat_report:
  description: "Manually report a threat (saves to engram)"
  params: [entity_type, address, reason, evidence_url]

threat_score_history:
  description: "Get threat score history for a token"
  params: [token_mint]

threat_watch_creator:
  description: "Add creator wallet to high-alert monitoring"
  params: [wallet_address, token_mint]

threat_whitelist:
  description: "Whitelist a trusted token or wallet"
  params: [entity_type, address, reason]

threat_alerts:
  description: "Get recent threat alerts"
  params: [severity, limit]

# Event Tools
event_publish:
  description: "Publish an event to the event bus"
  params: [topic, payload, correlation_id]

event_subscribe:
  description: "Subscribe to events matching topic patterns"
  params: [topics, since_timestamp]

event_history:
  description: "Query historical events"
  params: [topics, since, until, limit]

event_replay:
  description: "Replay events from a point in time"
  params: [subscription_id, from_event_id]

# Execution Tools
execute_trade:
  description: "Execute an approved edge"
  params: [edge_id, max_slippage_bps]

trade_history:
  description: "Get trade execution history"
  params: [limit, offset]

trade_stats:
  description: "Get P&amp;L statistics"
  params: [period]

# Swarm Management Tools
swarm_status:
  description: "Get full swarm status including agents and circuit breakers"
  params: []

swarm_health:
  description: "Get swarm health summary"
  params: []

swarm_agents:
  description: "List all registered agents"
  params: []

swarm_agent_status:
  description: "Get status for a specific agent"
  params: [agent_id]

swarm_pause:
  description: "Pause all swarm trading activity"
  params: []

swarm_resume:
  description: "Resume swarm trading activity"
  params: []

swarm_heartbeat:
  description: "Record agent heartbeat"
  params: [agent_id]

swarm_report_failure:
  description: "Report agent failure"
  params: [agent_id, error]

circuit_breakers_list:
  description: "List all circuit breakers and their states"
  params: []

circuit_breaker_reset:
  description: "Reset a specific circuit breaker"
  params: [name]

circuit_breakers_reset_all:
  description: "Reset all circuit breakers"
  params: []
</code></pre>
<hr>
<h2 id="database-schema-3"><a class="header" href="#database-schema-3">Database Schema</a></h2>
<pre><code class="language-sql">-- Events (GOLDEN RULE - all agents emit here)
CREATE TABLE arb_events (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    event_type TEXT NOT NULL,
    source_type TEXT NOT NULL, -- agent, tool, external
    source_id TEXT NOT NULL,
    topic TEXT NOT NULL,
    payload JSONB NOT NULL,
    correlation_id UUID,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_events_topic ON arb_events(topic);
CREATE INDEX idx_events_source ON arb_events(source_type, source_id);
CREATE INDEX idx_events_created ON arb_events(created_at DESC);
CREATE INDEX idx_events_correlation ON arb_events(correlation_id) WHERE correlation_id IS NOT NULL;

-- Topic subscriptions for agents
CREATE TABLE arb_event_subscriptions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    subscriber_id TEXT NOT NULL, -- agent or external subscriber
    topics TEXT[] NOT NULL,      -- ["arb.edge.*", "arb.trade.*"]
    is_active BOOLEAN DEFAULT true,
    last_event_id UUID,          -- For replay cursor
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Tracked venues
CREATE TABLE arb_venues (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    venue_type TEXT NOT NULL, -- dex_amm, bonding_curve, lending
    name TEXT NOT NULL,
    address TEXT, -- contract/pool address if applicable
    config JSONB DEFAULT '{}',
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Trading strategies
CREATE TABLE arb_strategies (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    wallet_address VARCHAR NOT NULL,
    name TEXT NOT NULL,
    strategy_type TEXT NOT NULL, -- dex_arb, curve_arb, liquidation, etc.
    venue_types TEXT[] NOT NULL,
    execution_mode TEXT NOT NULL, -- autonomous, agent_directed, hybrid
    risk_params JSONB NOT NULL,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Detected edges (opportunities)
CREATE TABLE arb_edges (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    strategy_id UUID REFERENCES arb_strategies(id),
    edge_type TEXT NOT NULL, -- dex_arb, curve_arb, liquidation, backrun, jit
    execution_mode TEXT NOT NULL, -- autonomous, agent_directed, hybrid

    -- Atomicity classification (guaranteed profit vs capital-at-risk)
    atomicity TEXT NOT NULL DEFAULT 'non_atomic', -- fully_atomic, partially_atomic, non_atomic
    simulated_profit_guaranteed BOOLEAN DEFAULT false, -- Simulation passed
    simulation_tx_hash TEXT,                          -- Reference simulation
    max_gas_cost_lamports BIGINT,                     -- Only risk on atomic trades

    estimated_profit_lamports BIGINT,
    risk_score INTEGER, -- 1-100 (lower for atomic trades)
    route_data JSONB NOT NULL,
    status TEXT DEFAULT 'detected', -- detected, pending_approval, executing, executed, expired, failed, rejected
    rejection_reason TEXT,
    executed_at TIMESTAMPTZ,
    actual_profit_lamports BIGINT,
    actual_gas_cost_lamports BIGINT,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    expires_at TIMESTAMPTZ
);
CREATE INDEX idx_edges_status ON arb_edges(status);
CREATE INDEX idx_edges_strategy ON arb_edges(strategy_id);
CREATE INDEX idx_edges_mode ON arb_edges(execution_mode);
CREATE INDEX idx_edges_atomicity ON arb_edges(atomicity);
CREATE INDEX idx_edges_guaranteed ON arb_edges(simulated_profit_guaranteed) WHERE simulated_profit_guaranteed = true;

-- Trade history
CREATE TABLE arb_trades (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    edge_id UUID REFERENCES arb_edges(id),
    strategy_id UUID REFERENCES arb_strategies(id),
    tx_signature TEXT,
    bundle_id TEXT, -- Jito bundle ID if applicable
    entry_price NUMERIC(20, 9),
    exit_price NUMERIC(20, 9),
    profit_lamports BIGINT,
    gas_cost_lamports BIGINT,
    slippage_bps INTEGER,
    executed_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_trades_edge ON arb_trades(edge_id);
CREATE INDEX idx_trades_strategy ON arb_trades(strategy_id);
CREATE INDEX idx_trades_executed ON arb_trades(executed_at DESC);

-- Consensus requests/results
CREATE TABLE arb_consensus (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    edge_id UUID REFERENCES arb_edges(id),
    models TEXT[] NOT NULL,
    model_votes JSONB NOT NULL,
    approved BOOLEAN,
    agreement_score NUMERIC(3, 2),
    reasoning_summary TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_consensus_edge ON arb_consensus(edge_id);

-- Research discoveries
CREATE TABLE arb_research_discoveries (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    source_url TEXT,
    source_type TEXT NOT NULL, -- url, twitter, telegram
    source_account TEXT, -- @handle if applicable
    extracted_strategy JSONB,
    backtest_result JSONB,
    status TEXT DEFAULT 'pending', -- pending, approved, rejected, testing, live
    confidence_score NUMERIC(3, 2),
    created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_research_status ON arb_research_discoveries(status);

-- Monitored sources (X accounts, Telegram channels, etc.)
CREATE TABLE arb_research_sources (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    source_type TEXT NOT NULL, -- twitter, telegram, rss
    handle_or_url TEXT NOT NULL,
    track_type TEXT NOT NULL, -- alpha, threat, both
    is_active BOOLEAN DEFAULT true,
    last_checked_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- KOL/Wallet tracking
CREATE TABLE arb_kol_entities (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    entity_type TEXT NOT NULL, -- wallet, twitter_handle
    identifier TEXT NOT NULL UNIQUE, -- wallet address or @handle
    display_name TEXT,
    linked_wallet TEXT, -- If twitter handle, linked wallet if known
    trust_score NUMERIC(5, 2) DEFAULT 50.0,
    total_trades_tracked INTEGER DEFAULT 0,
    profitable_trades INTEGER DEFAULT 0,
    avg_profit_percent NUMERIC(8, 4),
    max_drawdown NUMERIC(8, 4),
    copy_trading_enabled BOOLEAN DEFAULT false,
    copy_config JSONB DEFAULT '{}',
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_kol_identifier ON arb_kol_entities(identifier);
CREATE INDEX idx_kol_trust ON arb_kol_entities(trust_score DESC);

-- KOL trade history
CREATE TABLE arb_kol_trades (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    entity_id UUID REFERENCES arb_kol_entities(id),
    tx_signature TEXT NOT NULL,
    trade_type TEXT NOT NULL, -- buy, sell
    token_mint TEXT NOT NULL,
    amount_sol NUMERIC(20, 9),
    price_at_trade NUMERIC(20, 9),
    detected_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_kol_trades_entity ON arb_kol_trades(entity_id);

-- Copy trade executions
CREATE TABLE arb_copy_trades (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    entity_id UUID REFERENCES arb_kol_entities(id),
    kol_trade_id UUID REFERENCES arb_kol_trades(id),
    our_tx_signature TEXT,
    copy_amount_sol NUMERIC(20, 9),
    delay_ms BIGINT,
    profit_loss_lamports BIGINT,
    status TEXT DEFAULT 'pending', -- pending, executed, failed
    executed_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_copy_trades_entity ON arb_copy_trades(entity_id);
CREATE INDEX idx_copy_trades_status ON arb_copy_trades(status);

-- Threat scores for tokens
CREATE TABLE arb_threat_scores (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    token_mint TEXT NOT NULL,
    overall_score NUMERIC(3,2) NOT NULL, -- 0-1
    factors JSONB NOT NULL,              -- ThreatFactors
    confidence NUMERIC(3,2),
    external_data JSONB DEFAULT '{}',    -- RugCheck, GoPlus responses
    created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_threat_scores_token ON arb_threat_scores(token_mint);
CREATE INDEX idx_threat_scores_score ON arb_threat_scores(overall_score DESC);
CREATE INDEX idx_threat_scores_created ON arb_threat_scores(created_at DESC);

-- Blocked/flagged entities
CREATE TABLE arb_threat_blocked (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    entity_type TEXT NOT NULL, -- token, wallet, contract
    address TEXT UNIQUE NOT NULL,
    threat_category TEXT NOT NULL, -- rug_pull, honeypot, scam_wallet, wash_trader
    threat_score NUMERIC(3,2),
    reason TEXT,
    evidence_url TEXT,
    reported_by TEXT, -- system, user, external
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_threat_blocked_type ON arb_threat_blocked(entity_type);
CREATE INDEX idx_threat_blocked_category ON arb_threat_blocked(threat_category);

-- Whitelisted trusted entities
CREATE TABLE arb_threat_whitelist (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    entity_type TEXT NOT NULL, -- token, wallet
    address TEXT UNIQUE NOT NULL,
    reason TEXT,
    whitelisted_by TEXT, -- user, system
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- High-alert monitoring (creator wallets, etc.)
CREATE TABLE arb_threat_watched (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    wallet_address TEXT NOT NULL,
    related_token_mint TEXT,
    watch_reason TEXT,
    alert_on_sell BOOLEAN DEFAULT true,
    alert_on_transfer BOOLEAN DEFAULT true,
    alert_threshold_sol NUMERIC(20,9), -- Alert if sells &gt; this
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_threat_watched_wallet ON arb_threat_watched(wallet_address);

-- Threat alerts history
CREATE TABLE arb_threat_alerts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    alert_type TEXT NOT NULL, -- rug_detected, honeypot_detected, large_sell, etc.
    severity TEXT NOT NULL, -- low, medium, high, critical
    entity_type TEXT NOT NULL,
    address TEXT NOT NULL,
    details JSONB NOT NULL,
    action_taken TEXT, -- blocked, flagged, warned
    created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_threat_alerts_type ON arb_threat_alerts(alert_type);
CREATE INDEX idx_threat_alerts_severity ON arb_threat_alerts(severity);
CREATE INDEX idx_threat_alerts_created ON arb_threat_alerts(created_at DESC);
</code></pre>
<hr>
<h2 id="frontend-uiux-memcache-integration"><a class="header" href="#frontend-uiux-memcache-integration">Frontend UI/UX (MemCache Integration)</a></h2>
<h3 id="navigation-structure"><a class="header" href="#navigation-structure">Navigation Structure</a></h3>
<pre><code>MemCache Tab
â”œâ”€â”€ Sandbox (existing)
â”œâ”€â”€ Pinned (existing)
â””â”€â”€ ArbFarm (new submenu)
    â”œâ”€â”€ Dashboard        # Overview, P&amp;L, key metrics
    â”œâ”€â”€ Opportunities    # Live edge feed
    â”œâ”€â”€ Strategies       # Strategy management
    â”œâ”€â”€ Research         # Discovered strategies, URL ingestion
    â”œâ”€â”€ KOL Tracker      # Tracked wallets, copy trading
    â”œâ”€â”€ Threats          # Blocked tokens, alerts
    â””â”€â”€ Settings         # Configuration, risk params
</code></pre>
<h3 id="dashboard-view"><a class="header" href="#dashboard-view">Dashboard View</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ArbFarm Dashboard                              [Pause] [âš™ï¸] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Total P&amp;L    â”‚  â”‚ Today's P&amp;L  â”‚  â”‚ Win Rate     â”‚      â”‚
â”‚  â”‚ +12.5 SOL    â”‚  â”‚ +0.8 SOL     â”‚  â”‚ 67%          â”‚      â”‚
â”‚  â”‚ â†‘ 15%        â”‚  â”‚ â†‘ 3.2%       â”‚  â”‚ 134/200      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚               P&amp;L Chart (7 days)                     â”‚   â”‚
â”‚  â”‚  [Line chart showing daily P&amp;L over time]            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Active Strategies    â”‚  â”‚ Recent Trades           â”‚     â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚     â”‚
â”‚  â”‚ â— DEX Arb     ON  â†— â”‚  â”‚ âœ“ +0.05 SOL  PEPE arb  â”‚     â”‚
â”‚  â”‚ â— Curve Arb   ON  â†— â”‚  â”‚ âœ“ +0.12 SOL  JIT liq   â”‚     â”‚
â”‚  â”‚ â— JIT Liquidity ON â†—â”‚  â”‚ âœ— -0.01 SOL  gas only  â”‚     â”‚
â”‚  â”‚ â—‹ Copy Trade OFF    â”‚  â”‚ âœ“ +0.08 SOL  backrun   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Swarm Status: ğŸŸ¢ Healthy | Agents: 10/10 | Uptime: 99.9% â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="opportunities-view-live-feed"><a class="header" href="#opportunities-view-live-feed">Opportunities View (Live Feed)</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Live Opportunities                    [Filter â–¼] [Refresh] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ”´ CRITICAL - Atomic                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ DEX Arb: BONK/SOL                    +45 bps profit â”‚   â”‚
â”‚  â”‚ Route: Jupiter â†’ Raydium                            â”‚   â”‚
â”‚  â”‚ Est. Profit: 0.15 SOL | Gas: 0.001 SOL             â”‚   â”‚
â”‚  â”‚ Atomicity: âœ… Guaranteed | Risk: 5/100              â”‚   â”‚
â”‚  â”‚                               [Simulate] [Execute]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸŸ¡ HIGH - Agent Directed                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Curve Arb: New pump.fun token                       â”‚   â”‚
â”‚  â”‚ Token: $WOJAK | Progress: 85%                       â”‚   â”‚
â”‚  â”‚ Opportunity: Buy pre-graduation, sell on Raydium    â”‚   â”‚
â”‚  â”‚ Est. Profit: 0.5 SOL | Risk: 45/100                 â”‚   â”‚
â”‚  â”‚ Consensus: Awaiting (2/3 models queried)            â”‚   â”‚
â”‚  â”‚                     [View Details] [Approve] [Reject]â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸŸ¢ MEDIUM - Auto Executing...                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ JIT Liquidity: SOL/USDC Pool                        â”‚   â”‚
â”‚  â”‚ Status: Executing bundle...                         â”‚   â”‚
â”‚  â”‚ Est. Profit: 0.03 SOL | Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="strategy-management-view"><a class="header" href="#strategy-management-view">Strategy Management View</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Strategies                                  [+ New Strategy]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ DEX Arbitrage                               ğŸŸ¢ ON   â”‚   â”‚
â”‚  â”‚ Mode: Autonomous | Venues: Jupiter, Raydium, Orca   â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚ Profit Threshold: 25 bps | Max Risk: 30/100         â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚ Performance (7d):                                   â”‚   â”‚
â”‚  â”‚   Trades: 145 | Win Rate: 78% | P&amp;L: +2.3 SOL      â”‚   â”‚
â”‚  â”‚   Avg Profit: +35 bps | Best: +120 bps             â”‚   â”‚
â”‚  â”‚                                    [Edit] [Toggle]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Bonding Curve Graduation                    ğŸŸ¢ ON   â”‚   â”‚
â”‚  â”‚ Mode: Hybrid | Venues: pump.fun, moonshot           â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚ Auto-execute if: profit &gt; 50bps AND risk &lt; 40      â”‚   â”‚
â”‚  â”‚ Otherwise: Surface for approval                     â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚ Performance (7d):                                   â”‚   â”‚
â”‚  â”‚   Trades: 23 | Win Rate: 65% | P&amp;L: +1.8 SOL       â”‚   â”‚
â”‚  â”‚                                    [Edit] [Toggle]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="researchdd-view"><a class="header" href="#researchdd-view">Research/DD View</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Research &amp; Discovery                    [+ Ingest URL]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  URL Ingestion                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”— https://twitter.com/whale/status/123...          â”‚   â”‚
â”‚  â”‚    [Paste URL]                          [Analyze]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Discovered Strategies (Pending Review)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“Š "Early pump.fun Entry" - Confidence: 72%         â”‚   â”‚
â”‚  â”‚ Source: @CryptoKOL tweet                            â”‚   â”‚
â”‚  â”‚ Pattern: Buy tokens &lt; 20% curve, sell at 70%        â”‚   â”‚
â”‚  â”‚ Backtest: +34% over 30 days (simulated)             â”‚   â”‚
â”‚  â”‚                      [View Details] [Approve] [Reject]â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Monitored Sources                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ @ZachXBT          Twitter    ğŸŸ¢ Active   [Remove]   â”‚   â”‚
â”‚  â”‚ @CryptoSlam       Twitter    ğŸŸ¢ Active   [Remove]   â”‚   â”‚
â”‚  â”‚ Solana Alpha TG   Telegram   ğŸŸ¢ Active   [Remove]   â”‚   â”‚
â”‚  â”‚                                       [+ Add Source] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="kol-tracker-view"><a class="header" href="#kol-tracker-view">KOL Tracker View</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  KOL &amp; Wallet Tracking                     [+ Track Wallet] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Copy Trading: ğŸŸ¢ Enabled (2 KOLs active)                   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‹ WhaleWallet.sol                     Trust: 78%   â”‚   â”‚
â”‚  â”‚ Address: 7Vk3...8xNp                                â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚ Tracked Trades: 45 | Our Copies: 23 | Win: 74%      â”‚   â”‚
â”‚  â”‚ Our P&amp;L from copying: +1.2 SOL                      â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚ Recent: Bought 5 SOL of $PEPE (2 min ago)           â”‚   â”‚
â”‚  â”‚ Copy Status: âœ… Copied (0.5 SOL, 500ms delay)       â”‚   â”‚
â”‚  â”‚                           [View Trades] [Configure]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“Š @TradingGuru                        Trust: 62%   â”‚   â”‚
â”‚  â”‚ Type: Twitter Handle                                â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚ Copy Trading: ğŸ”´ OFF (trust below 70% threshold)    â”‚   â”‚
â”‚  â”‚ Tracked Mentions: 34 | Strategies Extracted: 8      â”‚   â”‚
â”‚  â”‚                    [Enable Copy] [View History]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="threat-alerts-view"><a class="header" href="#threat-alerts-view">Threat Alerts View</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Threat Detection                        [Blocked] [Alerts] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Recent Alerts                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”´ CRITICAL - Rug Pull Detected         2 min ago   â”‚   â”‚
â”‚  â”‚ Token: $SCAM (9xK2...4mNp)                          â”‚   â”‚
â”‚  â”‚ Creator sold 80% of supply                          â”‚   â”‚
â”‚  â”‚ Action: AUTO-BLOCKED                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸŸ¡ WARNING - Honeypot Suspected         15 min ago  â”‚   â”‚
â”‚  â”‚ Token: $FAKE (3jL9...2kPq)                          â”‚   â”‚
â”‚  â”‚ GoPlus: Sell function has restrictions              â”‚   â”‚
â”‚  â”‚ Action: FLAGGED - requires manual review            â”‚   â”‚
â”‚  â”‚                               [Investigate] [Block]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Token Quick Check                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [Enter token mint address...]           [Check]     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Blocked Tokens: 23 | Blocked Wallets: 45 | Whitelisted: 12â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="settings-view"><a class="header" href="#settings-view">Settings View</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ArbFarm Settings                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Risk Configuration                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Base Profile: [Balanced â–¼]                          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ Max Position Size:     [____] SOL                   â”‚   â”‚
â”‚  â”‚ Daily Loss Limit:      [____] SOL                   â”‚   â”‚
â”‚  â”‚ Min Profit Threshold:  [____] bps                   â”‚   â”‚
â”‚  â”‚ Max Slippage:          [____] bps                   â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ Dynamic Adjustments:   [âœ“] Enabled                  â”‚   â”‚
â”‚  â”‚   - Volatility scaling                              â”‚   â”‚
â”‚  â”‚   - Drawdown scaling                                â”‚   â”‚
â”‚  â”‚   - Research agent input                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Multi-LLM Consensus                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Active Models:                                      â”‚   â”‚
â”‚  â”‚   [âœ“] Claude 3 Opus      Weight: 1.5               â”‚   â”‚
â”‚  â”‚   [âœ“] GPT-4 Turbo        Weight: 1.0               â”‚   â”‚
â”‚  â”‚   [âœ“] Llama 3 70B        Weight: 0.8               â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ Min Agreement: [50%]  Timeout: [30s]               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Execution Settings                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [âœ“] Enable Atomic Trade Aggressive Mode            â”‚   â”‚
â”‚  â”‚ [âœ“] Auto-retry failed transactions                  â”‚   â”‚
â”‚  â”‚ [ ] Require approval for all trades                 â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ Jito Bundle Tip: [____] bps                        â”‚   â”‚
â”‚  â”‚ Priority Fee: [Auto â–¼]                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚                                      [Reset] [Save Changes] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="frontend-components-reacttypescript"><a class="header" href="#frontend-components-reacttypescript">Frontend Components (React/TypeScript)</a></h3>
<pre><code>svc/hecate/src/components/memcache/
â”œâ”€â”€ arbfarm/
â”‚   â”œâ”€â”€ ArbFarmSubmenu.tsx      # Main submenu container
â”‚   â”œâ”€â”€ Dashboard/
â”‚   â”‚   â”œâ”€â”€ DashboardView.tsx   # Main dashboard
â”‚   â”‚   â”œâ”€â”€ PLChart.tsx         # P&amp;L line chart
â”‚   â”‚   â”œâ”€â”€ MetricCard.tsx      # Reusable metric card
â”‚   â”‚   â”œâ”€â”€ RecentTrades.tsx    # Recent trades list
â”‚   â”‚   â””â”€â”€ SwarmStatus.tsx     # Agent health indicator
â”‚   â”œâ”€â”€ Opportunities/
â”‚   â”‚   â”œâ”€â”€ OpportunitiesView.tsx
â”‚   â”‚   â”œâ”€â”€ EdgeCard.tsx        # Single opportunity card
â”‚   â”‚   â”œâ”€â”€ EdgeFilters.tsx     # Filter controls
â”‚   â”‚   â””â”€â”€ ExecuteModal.tsx    # Execution confirmation
â”‚   â”œâ”€â”€ Strategies/
â”‚   â”‚   â”œâ”€â”€ StrategiesView.tsx
â”‚   â”‚   â”œâ”€â”€ StrategyCard.tsx
â”‚   â”‚   â”œâ”€â”€ StrategyEditor.tsx  # Create/edit strategy
â”‚   â”‚   â””â”€â”€ PerformanceChart.tsx
â”‚   â”œâ”€â”€ Research/
â”‚   â”‚   â”œâ”€â”€ ResearchView.tsx
â”‚   â”‚   â”œâ”€â”€ URLIngest.tsx       # URL input + analysis
â”‚   â”‚   â”œâ”€â”€ DiscoveredStrategies.tsx
â”‚   â”‚   â””â”€â”€ SourcesManager.tsx
â”‚   â”œâ”€â”€ KOLTracker/
â”‚   â”‚   â”œâ”€â”€ KOLTrackerView.tsx
â”‚   â”‚   â”œâ”€â”€ KOLCard.tsx
â”‚   â”‚   â”œâ”€â”€ WalletMonitor.tsx
â”‚   â”‚   â””â”€â”€ CopyTradeConfig.tsx
â”‚   â”œâ”€â”€ Threats/
â”‚   â”‚   â”œâ”€â”€ ThreatsView.tsx
â”‚   â”‚   â”œâ”€â”€ AlertCard.tsx
â”‚   â”‚   â”œâ”€â”€ TokenChecker.tsx
â”‚   â”‚   â””â”€â”€ BlockedList.tsx
â”‚   â”œâ”€â”€ Settings/
â”‚   â”‚   â”œâ”€â”€ SettingsView.tsx
â”‚   â”‚   â”œâ”€â”€ RiskConfig.tsx
â”‚   â”‚   â”œâ”€â”€ ConsensusConfig.tsx
â”‚   â”‚   â””â”€â”€ ExecutionConfig.tsx
â”‚   â””â”€â”€ hooks/
â”‚       â”œâ”€â”€ useArbFarm.ts       # Main data hook
â”‚       â”œâ”€â”€ useOpportunities.ts # SSE subscription
â”‚       â”œâ”€â”€ useStrategies.ts
â”‚       â”œâ”€â”€ useKOLTracker.ts
â”‚       â””â”€â”€ useThreats.ts
</code></pre>
<h3 id="real-time-updates-sse"><a class="header" href="#real-time-updates-sse">Real-Time Updates (SSE)</a></h3>
<pre><code class="language-typescript">// Subscribe to live opportunities
const useOpportunities = () =&gt; {
  const [opportunities, setOpportunities] = useState&lt;Edge[]&gt;([]);

  useEffect(() =&gt; {
    const eventSource = new EventSource('/api/arb/scanner/stream');

    eventSource.onmessage = (event) =&gt; {
      const data = JSON.parse(event.data);
      setOpportunities(prev =&gt; [data, ...prev].slice(0, 50));
    };

    return () =&gt; eventSource.close();
  }, []);

  return opportunities;
};
</code></pre>
<h3 id="key-frontend-features"><a class="header" href="#key-frontend-features">Key Frontend Features</a></h3>
<ul>
<li><strong>Real-time SSE updates</strong> for live opportunity feed</li>
<li><strong>Interactive charts</strong> (P&amp;L over time, strategy performance)</li>
<li><strong>One-click execution</strong> for approved opportunities</li>
<li><strong>Drag-and-drop</strong> strategy prioritization</li>
<li><strong>Quick token check</strong> for threat analysis</li>
<li><strong>Toast notifications</strong> for important events (executed trades, threats)</li>
<li><strong>Dark mode</strong> by default (matches existing MemCache)</li>
<li><strong>Responsive</strong> for different screen sizes</li>
</ul>
<hr>
<h2 id="external-api-dependencies"><a class="header" href="#external-api-dependencies">External API Dependencies</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>API</th><th>Purpose</th><th>Rate Limits</th><th>Fallback</th></tr>
</thead>
<tbody>
<tr><td>Jupiter v6</td><td>DEX aggregation</td><td>600/min</td><td>Cached routes</td></tr>
<tr><td>Raydium</td><td>AMM pools</td><td>100/min</td><td>Jupiter fallback</td></tr>
<tr><td>pump.fun</td><td>Token creation/trading</td><td>TBD</td><td>Queue + retry</td></tr>
<tr><td>Helius</td><td>Enhanced RPC + webhooks</td><td>Tier-based</td><td>Public RPC</td></tr>
<tr><td>Jito</td><td>Bundle submission</td><td>Unlimited</td><td>Direct RPC</td></tr>
<tr><td>Birdeye</td><td>Token data + holder analysis</td><td>100/min</td><td>Cached data</td></tr>
<tr><td>OpenRouter</td><td>Multi-LLM consensus</td><td>Varies by model</td><td>Single model fallback</td></tr>
<tr><td>Anthropic</td><td>Claude direct (optional)</td><td>Tier-based</td><td>OpenRouter</td></tr>
<tr><td>OpenAI</td><td>GPT direct (optional)</td><td>Tier-based</td><td>OpenRouter</td></tr>
<tr><td>Marginfi</td><td>Lending positions</td><td>TBD</td><td>Cached state</td></tr>
<tr><td>Kamino</td><td>Lending positions</td><td>TBD</td><td>Cached state</td></tr>
<tr><td>RugCheck</td><td>Contract audit / threat intel</td><td>TBD</td><td>In-house analysis</td></tr>
<tr><td>GoPlus Security</td><td>Honeypot detection</td><td>TBD</td><td>Simulation fallback</td></tr>
<tr><td>Twitter/X API</td><td>Social monitoring / KOL tracking</td><td>Tier-based</td><td>Semantic search</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="implementation-phases-1"><a class="header" href="#implementation-phases-1">Implementation Phases</a></h2>
<h3 id="phase-1-service-scaffold--core-models-"><a class="header" href="#phase-1-service-scaffold--core-models-">Phase 1: Service Scaffold + Core Models âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> Create <code>svc/arb-farm/</code> directory structure</li>
<li><input disabled="" type="checkbox" checked=""> Set up Cargo.toml with dependencies</li>
<li><input disabled="" type="checkbox" checked=""> Implement config, error, server modules</li>
<li><input disabled="" type="checkbox" checked=""> Create all model files (edge, strategy, trade, signal)</li>
<li><input disabled="" type="checkbox" checked=""> Implement health endpoint</li>
<li><input disabled="" type="checkbox" checked=""> Set up database migrations</li>
<li><input disabled="" type="checkbox" checked=""> <strong>Event bus infrastructure</strong> (GOLDEN RULE)</li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash">curl http://localhost:9007/health
# Should return: {"status": "ok", "service": "arb-farm"}
</code></pre>
<h3 id="phase-2-venue-scanner--strategy-engine-"><a class="header" href="#phase-2-venue-scanner--strategy-engine-">Phase 2: Venue Scanner + Strategy Engine âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> Implement MevVenue trait</li>
<li><input disabled="" type="checkbox" checked=""> Jupiter DEX scanner</li>
<li><input disabled="" type="checkbox" checked=""> Raydium AMM scanner</li>
<li><input disabled="" type="checkbox" checked=""> Signal detection engine</li>
<li><input disabled="" type="checkbox" checked=""> Strategy matching logic</li>
<li><input disabled="" type="checkbox" checked=""> SSE streaming for edges</li>
<li><input disabled="" type="checkbox" checked=""> MCP tools: scanner_status, scanner_signals</li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash"># Start SSE stream
curl -N http://localhost:3000/api/arb/scanner/stream

# Get scanner status
curl http://localhost:3000/api/arb/scanner/status
</code></pre>
<h3 id="phase-3-execution-engine--risk-management-"><a class="header" href="#phase-3-execution-engine--risk-management-">Phase 3: Execution Engine + Risk Management âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> Jito bundle submission</li>
<li><input disabled="" type="checkbox" checked=""> Transaction simulation</li>
<li><input disabled="" type="checkbox" checked=""> Risk parameter enforcement</li>
<li><input disabled="" type="checkbox" checked=""> Execution modes (auto/hybrid/agent)</li>
<li><input disabled="" type="checkbox" checked=""> Trade history persistence</li>
<li><input disabled="" type="checkbox" checked=""> MCP tools: edge_approve, edge_reject, execute_trade</li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash"># Get edges
curl http://localhost:3000/api/arb/edges

# Simulate execution
curl -X POST http://localhost:3000/api/arb/edges/{id}/simulate

# Execute trade
curl -X POST http://localhost:3000/api/arb/edges/{id}/execute
</code></pre>
<h3 id="phase-4-bonding-curve-integration-pumpfun-moonshot-"><a class="header" href="#phase-4-bonding-curve-integration-pumpfun-moonshot-">Phase 4: Bonding Curve Integration (pump.fun, moonshot) âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> pump.fun API client</li>
<li><input disabled="" type="checkbox" checked=""> moonshot API client</li>
<li><input disabled="" type="checkbox" checked=""> Graduation progress tracking</li>
<li><input disabled="" type="checkbox" checked=""> Cross-venue arbitrage detection</li>
<li><input disabled="" type="checkbox" checked=""> Curve-specific MCP tools</li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash"># Check graduation progress
curl http://localhost:9007/curves/{token}/progress

# Get curve opportunity
curl http://localhost:9007/edges?venue_type=bonding_curve
</code></pre>
<h3 id="phase-5-mev-detection-dex-arb-liquidations-jit-"><a class="header" href="#phase-5-mev-detection-dex-arb-liquidations-jit-">Phase 5: MEV Detection (DEX Arb, Liquidations, JIT) âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> DEX arbitrage detection</li>
<li><input disabled="" type="checkbox" checked=""> Lending liquidation scanner (Marginfi, Kamino)</li>
<li><input disabled="" type="checkbox" checked=""> JIT liquidity opportunity detection</li>
<li><input disabled="" type="checkbox" checked=""> Backrun opportunity detection</li>
<li><input disabled="" type="checkbox" checked=""> Priority queue for time-sensitive edges</li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash"># Get MEV opportunities by type
curl "http://localhost:9007/edges?edge_type=liquidation"
curl "http://localhost:9007/edges?edge_type=jit"
</code></pre>
<h3 id="phase-6-researchdd-agent--url-ingestion-"><a class="header" href="#phase-6-researchdd-agent--url-ingestion-">Phase 6: Research/DD Agent + URL Ingestion âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> URL ingestion pipeline (WebFetch-style)</li>
<li><input disabled="" type="checkbox" checked=""> LLM strategy extraction</li>
<li><input disabled="" type="checkbox" checked=""> Backtest engine (simulated historical)</li>
<li><input disabled="" type="checkbox" checked=""> X/Twitter monitoring integration</li>
<li><input disabled="" type="checkbox" checked=""> MCP tools: research_ingest_url, research_backtest_strategy</li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash"># Ingest a URL
curl -X POST http://localhost:9007/research/ingest \
  -H "Content-Type: application/json" \
  -d '{"url": "https://twitter.com/trader/status/123"}'

# List discoveries
curl http://localhost:9007/research/discoveries
</code></pre>
<h3 id="phase-7-kol-tracking--copy-trading-"><a class="header" href="#phase-7-kol-tracking--copy-trading-">Phase 7: KOL Tracking + Copy Trading âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> Helius webhook integration for wallet monitoring</li>
<li><input disabled="" type="checkbox" checked=""> Trust score calculation</li>
<li><input disabled="" type="checkbox" checked=""> Copy trade execution (with delay)</li>
<li><input disabled="" type="checkbox" checked=""> Auto-disable on poor performance</li>
<li><input disabled="" type="checkbox" checked=""> MCP tools: kol_track, copy_enable, copy_disable</li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash"># Track a KOL
curl -X POST http://localhost:9007/kol \
  -H "Content-Type: application/json" \
  -d '{"wallet_address": "7Vk3...", "name": "WhaleWallet"}'

# Enable copy trading
curl -X POST http://localhost:9007/kol/{id}/copy/enable \
  -H "Content-Type: application/json" \
  -d '{"max_position_sol": 0.5, "min_delay_ms": 500}'
</code></pre>
<h3 id="phase-8-threat-detection--safety-"><a class="header" href="#phase-8-threat-detection--safety-">Phase 8: Threat Detection + Safety âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> RugCheck API integration</li>
<li><input disabled="" type="checkbox" checked=""> GoPlus Security API integration</li>
<li><input disabled="" type="checkbox" checked=""> In-house threat scoring system</li>
<li><input disabled="" type="checkbox" checked=""> Holder concentration analysis</li>
<li><input disabled="" type="checkbox" checked=""> Creator wallet monitoring (Helius webhooks)</li>
<li><input disabled="" type="checkbox" checked=""> Honeypot simulation detection</li>
<li><input disabled="" type="checkbox" checked=""> Blocklist/whitelist management</li>
<li><input disabled="" type="checkbox" checked=""> Real-time threat alerts</li>
<li><input disabled="" type="checkbox" checked=""> MCP tools: threat_check_token, threat_check_wallet, threat_report</li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash"># Check token threat score
curl http://localhost:9007/threat/check/TokenMintHere

# Check wallet for scam history
curl http://localhost:9007/threat/wallet/WalletAddressHere

# List blocked entities
curl http://localhost:9007/threat/blocked
</code></pre>
<h3 id="phase-9-engram-integration--learning-"><a class="header" href="#phase-9-engram-integration--learning-">Phase 9: Engram Integration + Learning âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> Engram harvester agent implementation</li>
<li><input disabled="" type="checkbox" checked=""> Pattern storage (successful edges)</li>
<li><input disabled="" type="checkbox" checked=""> Avoidance engram creation (failed trades, rug pulls)</li>
<li><input disabled="" type="checkbox" checked=""> Multi-LLM consensus engine</li>
<li><input disabled="" type="checkbox" checked=""> Strategy optimization via engram analysis</li>
<li><input disabled="" type="checkbox" checked=""> MCP tools: engram_create, engram_get, engram_search, engram_patterns, engram_avoidance, engram_stats</li>
<li><input disabled="" type="checkbox" checked=""> Consensus tools: consensus_request, consensus_result, consensus_history</li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash"># Get engram harvester stats
curl http://localhost:9007/engram/stats

# Search for engrams
curl "http://localhost:9007/engram/search?engram_type=edge_pattern"

# Check avoidance
curl http://localhost:9007/engram/avoidance/token/TokenMintHere

# Create an avoidance engram
curl -X POST http://localhost:9007/engram/avoidance \
  -H "Content-Type: application/json" \
  -d '{"entity_type":"token","address":"BadTokenMint","reason":"Rug pull","category":"rug_pull","severity":"high"}'
</code></pre>
<h3 id="phase-10-swarm-orchestration--resilience-"><a class="header" href="#phase-10-swarm-orchestration--resilience-">Phase 10: Swarm Orchestration + Resilience âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> Resilience overseer meta-agent</li>
<li><input disabled="" type="checkbox" checked=""> Agent health monitoring (heartbeats)</li>
<li><input disabled="" type="checkbox" checked=""> Auto-recovery logic (respawn failed agents)</li>
<li><input disabled="" type="checkbox" checked=""> Circuit breakers for API failures</li>
<li><input disabled="" type="checkbox" checked=""> API failover handling (cached engrams as fallback)</li>
<li><input disabled="" type="checkbox" checked=""> Swarm management endpoints</li>
</ul>
<p><strong>Key Files</strong>:</p>
<ul>
<li><code>src/agents/overseer.rs</code> - ResilienceOverseer meta-agent</li>
<li><code>src/resilience/circuit_breaker.rs</code> - Circuit breaker pattern</li>
<li><code>src/handlers/swarm.rs</code> - Swarm management HTTP handlers</li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash"># Get swarm status
curl http://localhost:9007/swarm/status

# Get swarm health (quick check)
curl http://localhost:9007/swarm/health

# List all agents
curl http://localhost:9007/swarm/agents

# List circuit breakers
curl http://localhost:9007/swarm/circuit-breakers

# Pause swarm
curl -X POST http://localhost:9007/swarm/pause

# Resume swarm
curl -X POST http://localhost:9007/swarm/resume

# Reset a circuit breaker
curl -X POST http://localhost:9007/swarm/circuit-breakers/jupiter_api/reset

# Reset all circuit breakers
curl -X POST http://localhost:9007/swarm/circuit-breakers/reset-all
</code></pre>
<h3 id="phase-11-frontend-dashboard-memcache-integration-"><a class="header" href="#phase-11-frontend-dashboard-memcache-integration-">Phase 11: Frontend Dashboard (MemCache Integration) âœ…</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""> ArbFarm submenu in MemCache tab</li>
<li><input disabled="" type="checkbox" checked=""> Live opportunity feed component</li>
<li><input disabled="" type="checkbox" checked=""> P&amp;L dashboard with metrics</li>
<li><input disabled="" type="checkbox" checked=""> Strategy performance cards</li>
<li><input disabled="" type="checkbox" checked=""> Threat alerts panel</li>
<li><input disabled="" type="checkbox" checked=""> KOL tracker interface (placeholder)</li>
<li><input disabled="" type="checkbox" checked=""> Settings/configuration panel (placeholder)</li>
<li><input disabled="" type="checkbox" checked=""> Real-time SSE integration</li>
</ul>
<p><strong>Key Files Created</strong>:</p>
<pre><code>svc/hecate/src/
â”œâ”€â”€ types/arbfarm.ts                    # TypeScript type definitions (~550 lines)
â”œâ”€â”€ common/
â”‚   â”œâ”€â”€ services/arbfarm-service.tsx    # API service class (~600 lines)
â”‚   â””â”€â”€ hooks/
â”‚       â”œâ”€â”€ useArbFarm.ts               # Main data hook (~650 lines)
â”‚       â””â”€â”€ index.ts
â””â”€â”€ components/memcache/arbfarm/
    â”œâ”€â”€ ArbFarmDashboard.tsx            # Main dashboard component
    â”œâ”€â”€ arbfarm.module.scss             # SCSS styles (~700 lines)
    â”œâ”€â”€ index.tsx
    â””â”€â”€ components/
        â”œâ”€â”€ MetricCard.tsx
        â”œâ”€â”€ SwarmStatusCard.tsx
        â”œâ”€â”€ EdgeCard.tsx
        â”œâ”€â”€ TradeHistoryCard.tsx
        â”œâ”€â”€ ThreatAlertCard.tsx
        â””â”€â”€ index.ts
</code></pre>
<p><strong>Frontend Architecture</strong>:</p>
<ul>
<li>
<p><strong>Types</strong> (<code>types/arbfarm.ts</code>): Comprehensive TypeScript types for all ArbFarm entities</p>
<ul>
<li>Edge, Trade, Scanner, Swarm, Strategy, Threat, KOL, Curve, Engram types</li>
<li>Color constants for status visualization</li>
<li>Filter interfaces for list views</li>
</ul>
</li>
<li>
<p><strong>Service</strong> (<code>arbfarm-service.tsx</code>): API service class with methods for all endpoints</p>
<ul>
<li>Edge operations: list, get, approve, reject, execute, simulate</li>
<li>Trade operations: list, get, stats, daily stats</li>
<li>Scanner operations: status, start, stop, signals</li>
<li>Swarm operations: status, pause, resume, agents, circuit breakers</li>
<li>Threat operations: check token, list blocked, report, whitelist</li>
<li>KOL operations: list, add, remove, enable/disable copy trading</li>
<li>Curve operations: list tokens, graduation candidates, quotes</li>
<li>SSE stream URL getters for real-time updates</li>
</ul>
</li>
<li>
<p><strong>Hook</strong> (<code>useArbFarm.ts</code>): Comprehensive React hook with:</p>
<ul>
<li>Auto-polling for scanner and swarm status</li>
<li>SSE connection management with auto-reconnect</li>
<li>State management for all entity types</li>
<li>Action methods for CRUD operations</li>
<li>Filter state for edge views</li>
</ul>
</li>
<li>
<p><strong>Components</strong>:</p>
<ul>
<li><code>ArbFarmDashboard</code>: Multi-view dashboard with internal navigation</li>
<li><code>MetricCard</code>: P&amp;L and stats display</li>
<li><code>SwarmStatusCard</code>: Agent health visualization</li>
<li><code>EdgeCard</code>: Opportunity display with approve/reject/execute</li>
<li><code>TradeHistoryCard</code>: Trade history with P&amp;L</li>
<li><code>ThreatAlertCard</code>: Threat alert display with severity</li>
</ul>
</li>
</ul>
<p><strong>Views Implemented</strong>:</p>
<ol>
<li><strong>Dashboard</strong>: Overview with metrics, swarm status, top opportunities, recent trades</li>
<li><strong>Opportunities</strong>: Full edge list with filtering and actions</li>
<li><strong>Strategies</strong>: Strategy management with toggle and stats</li>
<li><strong>Threats</strong>: Token checker, alerts, blocked list</li>
<li><strong>KOL Tracker</strong>: Placeholder for wallet tracking</li>
<li><strong>Research</strong>: Placeholder for URL ingestion</li>
<li><strong>Settings</strong>: Placeholder for configuration</li>
</ol>
<p><strong>Integration Points</strong>:</p>
<ul>
<li>Added to <code>MemCacheSidebar</code> as navigation item</li>
<li>Added to <code>MemCache</code> component with view state</li>
<li>SSE subscriptions for: <code>arb.edge.*</code>, <code>arb.trade.*</code>, <code>arb.threat.*</code>, <code>arb.swarm.*</code></li>
</ul>
<p><strong>Verification</strong>:</p>
<pre><code class="language-bash"># Navigate in browser
1. Open http://localhost:5173
2. Connect wallet
3. Go to MemCache tab
4. Click "ArbFarm" in sidebar
5. Verify dashboard loads

# Verify SSE connection
- Check browser console for "Live updates active"
- SSE indicator should show green dot

# Verify API integration
- Dashboard should show metrics (or loading states)
- Opportunities list should populate when scanner is running
</code></pre>
<h3 id="phase-12-crossroads-integration--revenue-"><a class="header" href="#phase-12-crossroads-integration--revenue-">Phase 12: Crossroads Integration + Revenue â³</a></h3>
<p><strong>Status</strong>: Next Phase - Ready to implement</p>
<p>The final phase integrates ArbFarm with the Crossroads marketplace to enable forkable, sellable MEV strategies as COW (Constellation of Work) NFTs.</p>
<h4 id="tasks"><a class="header" href="#tasks">Tasks</a></h4>
<ul>
<li>
<p><input disabled="" type="checkbox"> <strong>COW NFT Minting on Monad</strong></p>
<ul>
<li>Define ArbFarm COW metadata schema</li>
<li>Implement COW minting contract on Monad</li>
<li>Create minting UI in MemCache</li>
<li>Connect to existing Crossroads listing flow</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox"> <strong>Forkable Scanner/Strategy Patterns</strong></p>
<ul>
<li>Define exportable strategy format</li>
<li>Implement strategy serialization/deserialization</li>
<li>Create â€œFork Strategyâ€ action in UI</li>
<li>Handle engram inheritance on fork</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox"> <strong>Per-COW Configuration and Isolation</strong></p>
<ul>
<li>Implement COW-scoped configuration storage</li>
<li>Add wallet-specific strategy instances</li>
<li>Ensure data isolation between forked COWs</li>
<li>API key management per-COW</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox"> <strong>Revenue Sharing Model</strong></p>
<ul>
<li>Define revenue split logic (original creator vs forker)</li>
<li>Implement profit tracking per-COW</li>
<li>Create revenue distribution mechanism</li>
<li>Dashboard for earnings tracking</li>
</ul>
</li>
</ul>
<h4 id="cow-metadata-schema"><a class="header" href="#cow-metadata-schema">COW Metadata Schema</a></h4>
<pre><code class="language-typescript">interface ArbFarmCOW {
  // Standard COW fields
  id: string;
  name: string;
  description: string;
  creator_wallet: string;

  // ArbFarm-specific
  included_strategies: Strategy[];
  venue_types: VenueType[];
  risk_profile: RiskParams;

  // Fork tracking
  parent_cow_id?: string;
  fork_count: number;
  total_profit_generated: number;

  // Revenue
  creator_revenue_share_bps: number;  // e.g., 500 = 5%
  fork_revenue_share_bps: number;     // Revenue to original on forks
}
</code></pre>
<h4 id="integration-points"><a class="header" href="#integration-points">Integration Points</a></h4>
<ol>
<li><strong>Crossroads Listing</strong>: ArbFarm strategies appear as listable COWs</li>
<li><strong>Fork Flow</strong>: Users can fork existing ArbFarm COWs</li>
<li><strong>Engram Inheritance</strong>: Forked COWs inherit avoidance engrams</li>
<li><strong>Revenue Split</strong>: Profits split between original creator and forker</li>
</ol>
<h4 id="verification-1"><a class="header" href="#verification-1">Verification</a></h4>
<pre><code class="language-bash"># List ArbFarm COWs in marketplace
curl http://localhost:3000/api/marketplace/listings?type=arbfarm

# Create new ArbFarm COW
curl -X POST http://localhost:3000/api/marketplace/listings \
  -H "Content-Type: application/json" \
  -d '{"type": "arbfarm", "strategies": [...], "price_sol": 0.5}'

# Fork existing COW
curl -X POST http://localhost:3000/api/marketplace/listings/{id}/fork

# Check revenue earnings
curl http://localhost:3000/api/marketplace/earnings
</code></pre>
<hr>
<h2 id="verification-summary"><a class="header" href="#verification-summary">Verification Summary</a></h2>
<pre><code class="language-bash"># Service health
curl http://localhost:9007/health

# Scanner status
curl http://localhost:9007/scanner/status

# Live edge stream
curl -N http://localhost:9007/edges/stream

# Trade statistics
curl http://localhost:9007/trades/stats

# Engram stats
curl http://localhost:9007/engram/stats

# Swarm health
curl http://localhost:9007/swarm/health

# Swarm status (full)
curl http://localhost:9007/swarm/status

# Circuit breakers
curl http://localhost:9007/swarm/circuit-breakers
</code></pre>
<hr>
<h2 id="risk-considerations"><a class="header" href="#risk-considerations">Risk Considerations</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Risk</th><th>Mitigation</th></tr>
</thead>
<tbody>
<tr><td>API rate limits</td><td>Caching, fallback providers, exponential backoff</td></tr>
<tr><td>Slippage</td><td>Pre-execution simulation, max slippage params</td></tr>
<tr><td>Front-running</td><td>Jito bundles, private mempool</td></tr>
<tr><td>Rug pulls</td><td>Threat detection agent, blocklist</td></tr>
<tr><td>LLM hallucination</td><td>Multi-model consensus, human-in-loop for large trades</td></tr>
<tr><td>Smart contract bugs</td><td>Simulation before execution, start with small positions</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="related-documentation"><a class="header" href="#related-documentation">Related Documentation</a></h2>
<ul>
<li><a href="arb-farm/poly-mev/plan.html">Poly Mev Plan</a> - Polymarket swarm (different service)</li>
<li><a href="arb-farm/services/engrams.html">Engrams Service</a></li>
<li><a href="arb-farm/services/crossroads.html">Crossroads Marketplace</a></li>
<li><a href="arb-farm/architecture.html">Architecture</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="arbfarm-service-architecture"><a class="header" href="#arbfarm-service-architecture">ArbFarm Service Architecture</a></h1>
<p>ArbFarm is a Solana MEV Agent Swarm service that provides autonomous multi-agent trading capabilities.</p>
<h2 id="overview-7"><a class="header" href="#overview-7">Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td><strong>Port</strong></td><td>9007</td></tr>
<tr><td><strong>Language</strong></td><td>Rust</td></tr>
<tr><td><strong>Database</strong></td><td>PostgreSQL (shared with agents on 5441)</td></tr>
<tr><td><strong>Direct Routes</strong></td><td><code>/health</code>, <code>/scanner/*</code>, <code>/edges/*</code>, <code>/trades/*</code>, <code>/curves/*</code>, <code>/research/*</code>, <code>/kol/*</code>, <code>/threat/*</code></td></tr>
</tbody>
</table>
</div>
<h2 id="service-structure-3"><a class="header" href="#service-structure-3">Service Structure</a></h2>
<pre><code>svc/arb-farm/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ .env.dev
â””â”€â”€ src/
    â”œâ”€â”€ main.rs              # Service entrypoint + router
    â”œâ”€â”€ config.rs            # Configuration from environment
    â”œâ”€â”€ error.rs             # AppError enum with HTTP mapping
    â”œâ”€â”€ server.rs            # AppState + event bus
    â”‚
    â”œâ”€â”€ agents/              # Agent implementations
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ scanner.rs       # Venue Scanner Agent
    â”‚   â””â”€â”€ ...
    â”‚
    â”œâ”€â”€ events/              # Event bus (GOLDEN RULE)
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ types.rs         # ArbEvent, EventSource, AgentType
    â”‚   â”œâ”€â”€ topics.rs        # Topic constants
    â”‚   â””â”€â”€ bus.rs           # Publish/subscribe implementation
    â”‚
    â”œâ”€â”€ threat/              # Threat detection subsystem
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ score.rs         # ThreatScore calculation
    â”‚   â””â”€â”€ external/        # External API clients
    â”‚       â”œâ”€â”€ rugcheck.rs  # RugCheck API
    â”‚       â”œâ”€â”€ goplus.rs    # GoPlus Security
    â”‚       â””â”€â”€ birdeye.rs   # Birdeye holder analysis
    â”‚
    â”œâ”€â”€ research/            # Research/DD subsystem
    â”‚   â”œâ”€â”€ mod.rs           # Module exports
    â”‚   â”œâ”€â”€ url_ingest.rs    # URL ingestion + HTML parsing
    â”‚   â”œâ”€â”€ strategy_extract.rs  # LLM strategy extraction
    â”‚   â”œâ”€â”€ backtest.rs      # Strategy backtesting
    â”‚   â””â”€â”€ social_monitor.rs    # X/Twitter monitoring
    â”‚
    â”œâ”€â”€ venues/              # MEV venue implementations
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ traits.rs        # MevVenue trait
    â”‚   â”œâ”€â”€ dex/             # DEX venues
    â”‚   â”‚   â”œâ”€â”€ jupiter.rs
    â”‚   â”‚   â””â”€â”€ raydium.rs
    â”‚   â”œâ”€â”€ curves/          # Bonding curves
    â”‚   â”‚   â”œâ”€â”€ pump_fun.rs
    â”‚   â”‚   â””â”€â”€ moonshot.rs
    â”‚   â””â”€â”€ lending/         # Lending protocols
    â”‚       â””â”€â”€ marginfi.rs
    â”‚
    â”œâ”€â”€ consensus/           # Multi-LLM consensus
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ engine.rs        # Consensus orchestration
    â”‚   â””â”€â”€ providers/       # LLM providers
    â”‚       â””â”€â”€ openrouter.rs
    â”‚
    â”œâ”€â”€ execution/           # Trade execution
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ jito.rs          # Jito bundle submission
    â”‚   â””â”€â”€ simulation.rs    # Pre-execution simulation
    â”‚
    â”œâ”€â”€ models/              # Core data models
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ edge.rs          # Edge (opportunity)
    â”‚   â”œâ”€â”€ strategy.rs      # Trading strategy
    â”‚   â”œâ”€â”€ trade.rs         # Trade execution record
    â”‚   â”œâ”€â”€ signal.rs        # Scanner signal
    â”‚   â””â”€â”€ venue.rs         # MEV venue types
    â”‚
    â”œâ”€â”€ handlers/            # HTTP handlers
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â”œâ”€â”€ health.rs        # Health check
    â”‚   â”œâ”€â”€ scanner.rs       # Scanner endpoints
    â”‚   â”œâ”€â”€ edges.rs         # Edge CRUD + execution
    â”‚   â”œâ”€â”€ trades.rs        # Trade history + stats
    â”‚   â”œâ”€â”€ curves.rs        # Bonding curve endpoints
    â”‚   â”œâ”€â”€ research.rs      # Research/DD endpoints
    â”‚   â”œâ”€â”€ kol.rs           # KOL tracking + copy trading
    â”‚   â”œâ”€â”€ threat.rs        # Threat detection endpoints
    â”‚   â””â”€â”€ sse.rs           # Server-sent events
    â”‚
    â”œâ”€â”€ mcp/                 # MCP tool definitions
    â”‚   â”œâ”€â”€ mod.rs
    â”‚   â””â”€â”€ tools.rs         # Tool registration
    â”‚
    â””â”€â”€ database/            # Database layer
        â””â”€â”€ mod.rs
</code></pre>
<h2 id="configuration-5"><a class="header" href="#configuration-5">Configuration</a></h2>
<p>All external API URLs are configurable via environment variables:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>ARB_FARM_PORT</code></td><td>9007</td><td>Service port</td></tr>
<tr><td><code>ARB_FARM_DATABASE_URL</code></td><td>postgres://â€¦5441/agents</td><td>Database connection</td></tr>
<tr><td><code>JUPITER_API_URL</code></td><td>https://quote-api.jup.ag/v6</td><td>Jupiter DEX</td></tr>
<tr><td><code>RAYDIUM_API_URL</code></td><td>https://api-v3.raydium.io</td><td>Raydium AMM</td></tr>
<tr><td><code>PUMP_FUN_API_URL</code></td><td>https://pumpportal.fun/api</td><td>pump.fun bonding curves</td></tr>
<tr><td><code>HELIUS_API_URL</code></td><td>https://mainnet.helius-rpc.com</td><td>Helius RPC</td></tr>
<tr><td><code>BIRDEYE_API_URL</code></td><td>https://public-api.birdeye.so</td><td>Market data</td></tr>
<tr><td><code>JITO_API_URL</code></td><td>https://mainnet.block-engine.jito.wtf</td><td>Jito bundles</td></tr>
<tr><td><code>RUGCHECK_API_URL</code></td><td>https://api.rugcheck.xyz/v1</td><td>Threat intel</td></tr>
<tr><td><code>GOPLUS_API_URL</code></td><td>https://api.gopluslabs.io/api/v1</td><td>Honeypot detection</td></tr>
<tr><td><code>OPENROUTER_API_URL</code></td><td>https://openrouter.ai/api/v1</td><td>Multi-LLM consensus</td></tr>
</tbody>
</table>
</div>
<h2 id="agent-types-1"><a class="header" href="#agent-types-1">Agent Types</a></h2>
<p>The swarm consists of 10 specialized agents:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Agent</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><strong>Scanner</strong></td><td>Venue scanning, signal detection</td></tr>
<tr><td><strong>Refiner</strong></td><td>Signal filtering and enrichment</td></tr>
<tr><td><strong>MevHunter</strong></td><td>Advanced MEV pattern detection</td></tr>
<tr><td><strong>Executor</strong></td><td>Trade execution via Jito</td></tr>
<tr><td><strong>StrategyEngine</strong></td><td>Strategy routing and classification</td></tr>
<tr><td><strong>ResearchDd</strong></td><td>URL ingestion, strategy extraction</td></tr>
<tr><td><strong>CopyTrade</strong></td><td>KOL tracking, copy trading</td></tr>
<tr><td><strong>ThreatDetector</strong></td><td>Rug pull, honeypot detection</td></tr>
<tr><td><strong>EngramHarvester</strong></td><td>Pattern extraction, engram storage</td></tr>
<tr><td><strong>Overseer</strong></td><td>Swarm health, auto-recovery</td></tr>
</tbody>
</table>
</div>
<h2 id="atomicity-classification"><a class="header" href="#atomicity-classification">Atomicity Classification</a></h2>
<p>Trades are classified by risk profile:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Level</th><th>Description</th><th>Risk</th></tr>
</thead>
<tbody>
<tr><td><strong>FullyAtomic</strong></td><td>Flash loans, Jito bundles</td><td>Zero capital (reverts if unprofitable)</td></tr>
<tr><td><strong>PartiallyAtomic</strong></td><td>Some legs atomic</td><td>Mixed</td></tr>
<tr><td><strong>NonAtomic</strong></td><td>Cross-chain, delayed exit</td><td>Capital at risk</td></tr>
</tbody>
</table>
</div>
<p>Fully atomic trades are executed aggressively with lower profit thresholds since the only risk is gas cost.</p>
<h2 id="implementation-status-1"><a class="header" href="#implementation-status-1">Implementation Status</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Phase</th><th>Description</th><th>Status</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>Service Scaffold + Core Models</td><td>âœ… Complete</td></tr>
<tr><td>2</td><td>Venue Scanner + Strategy Engine</td><td>âœ… Complete</td></tr>
<tr><td>3</td><td>Execution Engine + Risk Management</td><td>âœ… Complete</td></tr>
<tr><td>4</td><td>Bonding Curve Integration</td><td>âœ… Complete</td></tr>
<tr><td>5</td><td>MEV Detection (DEX Arb, Liquidations, JIT)</td><td>âœ… Complete</td></tr>
<tr><td>6</td><td>Research/DD Agent + URL Ingestion</td><td>âœ… Complete</td></tr>
<tr><td>7</td><td>KOL Tracking + Copy Trading</td><td>âœ… Complete</td></tr>
<tr><td>8</td><td>Threat Detection + Safety</td><td>âœ… Complete</td></tr>
<tr><td>9</td><td>Engram Integration + Learning</td><td>âœ… Complete</td></tr>
<tr><td>10</td><td>Swarm Orchestration + Resilience</td><td>âœ… Complete</td></tr>
<tr><td>11</td><td>Frontend Dashboard (MemCache Integration)</td><td>âœ… Complete</td></tr>
<tr><td>12</td><td>Crossroads Integration + Revenue</td><td>â³ Next</td></tr>
</tbody>
</table>
</div>
<h2 id="running-the-service"><a class="header" href="#running-the-service">Running the Service</a></h2>
<pre><code class="language-bash">cd svc/arb-farm
cargo run
</code></pre>
<p>The service starts on port 9007. Health check: <code>curl http://localhost:9007/health</code></p>
<h2 id="related-11"><a class="header" href="#related-11">Related</a></h2>
<ul>
<li><a href="#arbfarm-development-guide">Development Guide</a></li>
<li><a href="#researchdd-module">Research Module</a></li>
<li><a href="#bonding-curves-module">Bonding Curves</a></li>
<li><a href="#kol-tracking--copy-trading-1">KOL Tracking</a></li>
<li><a href="#threat-detection-system">Threat Detection</a></li>
<li><a href="#arbfarm-event-bus">Event Bus</a></li>
<li><a href="#arbfarm-api-reference">API Reference</a></li>
<li><a href="#arbfarm-solana-mev-agent-swarm">Implementation Plan</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="arbfarm-development-guide"><a class="header" href="#arbfarm-development-guide">ArbFarm Development Guide</a></h1>
<p>This guide covers how to develop and extend the ArbFarm service.</p>
<h2 id="prerequisites-1"><a class="header" href="#prerequisites-1">Prerequisites</a></h2>
<ul>
<li>Rust 1.75+</li>
<li>PostgreSQL 15+</li>
<li>Helius API key (for RPC)</li>
<li>OpenRouter API key (for LLM consensus)</li>
</ul>
<h2 id="quick-start-1"><a class="header" href="#quick-start-1">Quick Start</a></h2>
<pre><code class="language-bash">cd svc/arb-farm
cp .env.example .env.dev

# Edit .env.dev with your API keys

cargo run
</code></pre>
<p>The service starts on port 9007.</p>
<h2 id="project-structure"><a class="header" href="#project-structure">Project Structure</a></h2>
<pre><code>src/
â”œâ”€â”€ main.rs          # Router setup, service entrypoint
â”œâ”€â”€ config.rs        # Environment configuration
â”œâ”€â”€ error.rs         # Error types with HTTP mapping
â”œâ”€â”€ server.rs        # AppState, database pool, event bus
â”œâ”€â”€ handlers/        # HTTP route handlers
â”œâ”€â”€ models/          # Data structures
â”œâ”€â”€ events/          # Event bus (pub/sub)
â”œâ”€â”€ venues/          # MEV venue implementations
â”œâ”€â”€ research/        # Research/DD subsystem
â”œâ”€â”€ threat/          # Threat detection
â”œâ”€â”€ consensus/       # Multi-LLM consensus
â”œâ”€â”€ execution/       # Trade execution
â””â”€â”€ mcp/             # MCP tool definitions
</code></pre>
<h2 id="adding-a-new-handler"><a class="header" href="#adding-a-new-handler">Adding a New Handler</a></h2>
<ol>
<li>Create handler file in <code>src/handlers/</code>:</li>
</ol>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/handlers/my_feature.rs
use axum::{extract::State, Json};
use crate::{error::AppResult, server::AppState};

pub async fn get_something(
    State(state): State&lt;AppState&gt;,
) -&gt; AppResult&lt;Json&lt;serde_json::Value&gt;&gt; {
    // Implementation
    Ok(Json(serde_json::json!({"status": "ok"})))
}
<span class="boring">}</span></code></pre>
<ol start="2">
<li>Export from <code>src/handlers/mod.rs</code>:</li>
</ol>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub mod my_feature;
<span class="boring">}</span></code></pre>
<ol start="3">
<li>Add route in <code>src/main.rs</code>:</li>
</ol>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>.route("/my-feature", get(my_feature::get_something))
<span class="boring">}</span></code></pre>
<h2 id="adding-a-new-venue"><a class="header" href="#adding-a-new-venue">Adding a New Venue</a></h2>
<p>Venues implement the <code>MevVenue</code> trait:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/venues/my_venue.rs
use async_trait::async_trait;
use crate::venues::traits::{MevVenue, VenueType};
use crate::models::{Edge, Signal};
use crate::error::AppResult;

pub struct MyVenue {
    api_url: String,
    client: reqwest::Client,
}

#[async_trait]
impl MevVenue for MyVenue {
    fn venue_type(&amp;self) -&gt; VenueType {
        VenueType::Custom("my_venue".to_string())
    }

    async fn scan(&amp;self) -&gt; AppResult&lt;Vec&lt;Signal&gt;&gt; {
        // Scan for opportunities
        Ok(vec![])
    }

    async fn get_quote(&amp;self, token: &amp;str, amount: u64, is_buy: bool) -&gt; AppResult&lt;u64&gt; {
        // Get price quote
        Ok(0)
    }
}
<span class="boring">}</span></code></pre>
<h2 id="adding-mcp-tools"><a class="header" href="#adding-mcp-tools">Adding MCP Tools</a></h2>
<ol>
<li>Define tool in <code>src/mcp/tools.rs</code>:</li>
</ol>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn get_my_tools() -&gt; Vec&lt;McpTool&gt; {
    vec![
        McpTool {
            name: "my_tool".to_string(),
            description: "Does something useful".to_string(),
            parameters: serde_json::json!({
                "type": "object",
                "properties": {
                    "param1": {"type": "string", "description": "First param"}
                },
                "required": ["param1"]
            }),
        }
    ]
}
<span class="boring">}</span></code></pre>
<ol start="2">
<li>Add to <code>get_all_tools()</code>:</li>
</ol>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn get_all_tools() -&gt; Vec&lt;McpTool&gt; {
    let mut tools = vec![];
    tools.extend(get_scanner_tools());
    tools.extend(get_my_tools()); // Add here
    tools
}
<span class="boring">}</span></code></pre>
<h2 id="working-with-the-event-bus"><a class="header" href="#working-with-the-event-bus">Working with the Event Bus</a></h2>
<h3 id="publishing-events"><a class="header" href="#publishing-events">Publishing Events</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::events::{ArbEvent, EventSource, AgentType};

// In a handler or agent
let event = ArbEvent::new(
    "arb.edge.detected",
    EventSource::Agent(AgentType::Scanner),
    serde_json::json!({
        "edge_id": edge.id,
        "edge_type": edge.edge_type,
        "estimated_profit": edge.estimated_profit_lamports
    }),
);

state.event_bus.publish(event).await;
<span class="boring">}</span></code></pre>
<h3 id="subscribing-to-events"><a class="header" href="#subscribing-to-events">Subscribing to Events</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Subscribe to specific topics
let mut rx = state.event_bus.subscribe_to(vec![
    "arb.edge.*".to_string(),
    "arb.threat.detected".to_string(),
]);

// Process events
while let Some(event) = rx.recv().await {
    match event.topic.as_str() {
        t if t.starts_with("arb.edge.") =&gt; {
            // Handle edge events
        }
        "arb.threat.detected" =&gt; {
            // Handle threat
        }
        _ =&gt; {}
    }
}
<span class="boring">}</span></code></pre>
<h2 id="research-module"><a class="header" href="#research-module">Research Module</a></h2>
<h3 id="url-ingestion"><a class="header" href="#url-ingestion">URL Ingestion</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::research::UrlIngester;

let ingester = UrlIngester::new(client);
let result = ingester.ingest("https://twitter.com/...").await?;

// Result contains:
// - content_type (Tweet, Thread, Article, etc.)
// - title, summary
// - tokens_mentioned ($BONK, $SOL, etc.)
// - addresses_found (Solana addresses)
// - numbers_extracted (prices, percentages)
<span class="boring">}</span></code></pre>
<h3 id="strategy-extraction"><a class="header" href="#strategy-extraction">Strategy Extraction</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::research::StrategyExtractor;

let extractor = StrategyExtractor::new(openrouter_key);
let strategy = extractor.extract(&amp;ingest_result).await?;

// Strategy contains:
// - strategy_type (DexArbitrage, BondingCurve, etc.)
// - entry_conditions
// - exit_conditions
// - risk_parameters
// - confidence (High, Medium, Low)
<span class="boring">}</span></code></pre>
<h3 id="backtesting"><a class="header" href="#backtesting">Backtesting</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::research::{BacktestEngine, BacktestConfig};

let engine = BacktestEngine::new();
let config = BacktestConfig {
    initial_capital_sol: 10.0,
    start_date: "2024-01-01".to_string(),
    end_date: "2024-01-15".to_string(),
    ..Default::default()
};

let result = engine.run_backtest(&amp;strategy, &amp;config).await?;

// Result contains:
// - total_trades, win_rate
// - total_profit, total_return_percent
// - max_drawdown, sharpe_ratio, sortino_ratio
// - equity_curve
<span class="boring">}</span></code></pre>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<p>Use the <code>AppError</code> enum for all errors:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::error::{AppError, AppResult};

fn do_something() -&gt; AppResult&lt;String&gt; {
    // Return specific errors
    Err(AppError::NotFound("Item not found".to_string()))?;
    Err(AppError::BadRequest("Invalid parameter".to_string()))?;
    Err(AppError::Configuration("Missing API key".to_string()))?;

    Ok("success".to_string())
}
<span class="boring">}</span></code></pre>
<p>Error types and HTTP codes:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Error</th><th>HTTP Code</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td><code>BadRequest</code></td><td>400</td><td>Invalid input</td></tr>
<tr><td><code>Unauthorized</code></td><td>401</td><td>Auth required</td></tr>
<tr><td><code>NotFound</code></td><td>404</td><td>Resource missing</td></tr>
<tr><td><code>Validation</code></td><td>422</td><td>Invalid data</td></tr>
<tr><td><code>RateLimited</code></td><td>429</td><td>Too many requests</td></tr>
<tr><td><code>ExternalApi</code></td><td>502</td><td>Third-party failure</td></tr>
<tr><td><code>ThreatDetected</code></td><td>403</td><td>Blocked entity</td></tr>
<tr><td><code>ConsensusFailed</code></td><td>409</td><td>LLM disagreement</td></tr>
</tbody>
</table>
</div>
<h2 id="testing"><a class="header" href="#testing">Testing</a></h2>
<pre><code class="language-bash"># Run all tests
cargo test

# Run specific test
cargo test test_url_ingestion

# Run with output
cargo test -- --nocapture
</code></pre>
<h3 id="writing-tests"><a class="header" href="#writing-tests">Writing Tests</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[tokio::test]
    async fn test_my_feature() {
        let result = do_something().await;
        assert!(result.is_ok());
    }
}
<span class="boring">}</span></code></pre>
<h2 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h2>
<p>Required:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>ARB_FARM_DATABASE_URL</code></td><td>PostgreSQL connection</td></tr>
<tr><td><code>HELIUS_API_KEY</code></td><td>Helius RPC access</td></tr>
<tr><td><code>OPENROUTER_API_KEY</code></td><td>LLM consensus</td></tr>
</tbody>
</table>
</div>
<p>Optional:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>ARB_FARM_PORT</code></td><td>9007</td><td>Service port</td></tr>
<tr><td><code>JUPITER_API_URL</code></td><td>jup.ag</td><td>Jupiter API</td></tr>
<tr><td><code>PUMP_FUN_API_URL</code></td><td>pumpportal.fun</td><td>pump.fun API</td></tr>
</tbody>
</table>
</div>
<h2 id="debugging"><a class="header" href="#debugging">Debugging</a></h2>
<h3 id="enable-debug-logging"><a class="header" href="#enable-debug-logging">Enable Debug Logging</a></h3>
<pre><code class="language-bash">RUST_LOG=debug cargo run
</code></pre>
<h3 id="check-event-bus"><a class="header" href="#check-event-bus">Check Event Bus</a></h3>
<pre><code class="language-bash"># Stream all events
curl -N http://localhost:9007/events/stream
</code></pre>
<h3 id="test-mcp-tools"><a class="header" href="#test-mcp-tools">Test MCP Tools</a></h3>
<pre><code class="language-bash"># List available tools
curl http://localhost:9007/mcp/tools | jq
</code></pre>
<h2 id="kol-tracking-1"><a class="header" href="#kol-tracking-1">KOL Tracking</a></h2>
<h3 id="adding-a-kol-to-track"><a class="header" href="#adding-a-kol-to-track">Adding a KOL to Track</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::models::{KolEntity, KolEntityType, AddKolRequest};

let request = AddKolRequest {
    wallet_address: Some("7Vk3...8xNp".to_string()),
    twitter_handle: None,
    display_name: Some("Whale Watcher".to_string()),
};

// POST to /kol
<span class="boring">}</span></code></pre>
<h3 id="enabling-copy-trading"><a class="header" href="#enabling-copy-trading">Enabling Copy Trading</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::models::EnableCopyRequest;

let config = EnableCopyRequest {
    max_position_sol: Some(0.5),
    delay_ms: Some(500),
    min_trust_score: Some(60.0),
    copy_percentage: Some(0.1),
    token_blacklist: None,
};

// POST to /kol/:id/copy/enable
<span class="boring">}</span></code></pre>
<h2 id="threat-detection-1"><a class="header" href="#threat-detection-1">Threat Detection</a></h2>
<h3 id="checking-token-safety"><a class="header" href="#checking-token-safety">Checking Token Safety</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::threat::ThreatDetector;

let detector = ThreatDetector::default();
let score = detector.check_token("TokenMint...").await?;

if score.overall_score &gt;= 0.7 {
    // High risk - avoid trading
    println!("DANGER: {}", score.recommendation);
}
<span class="boring">}</span></code></pre>
<h3 id="reporting-a-threat"><a class="header" href="#reporting-a-threat">Reporting a Threat</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::models::{ThreatCategory, ThreatEntityType};

detector.block_entity(
    ThreatEntityType::Token,
    "ScamTokenMint...".to_string(),
    ThreatCategory::RugPull,
    "Creator dumped 80% of supply".to_string(),
    "user_report".to_string(),
);
<span class="boring">}</span></code></pre>
<h3 id="watching-a-creator-wallet"><a class="header" href="#watching-a-creator-wallet">Watching a Creator Wallet</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::models::WatchedWallet;

let watched = WatchedWallet::new(
    "CreatorWallet...".to_string(),
    "Monitoring for dumps".to_string(),
);
detector.add_watched_wallet(watched);
<span class="boring">}</span></code></pre>
<h2 id="related-12"><a class="header" href="#related-12">Related</a></h2>
<ul>
<li><a href="#arbfarm-service-architecture">Service Architecture</a></li>
<li><a href="#arbfarm-api-reference">API Reference</a></li>
<li><a href="#researchdd-module">Research Module</a></li>
<li><a href="#bonding-curves-module">Bonding Curves</a></li>
<li><a href="#kol-tracking--copy-trading-1">KOL Tracking</a></li>
<li><a href="#threat-detection-system">Threat Detection</a></li>
<li><a href="#arbfarm-event-bus">Event Bus</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="arbfarm-api-reference"><a class="header" href="#arbfarm-api-reference">ArbFarm API Reference</a></h1>
<p>ArbFarm runs on port 9007. All endpoints are relative to <code>http://localhost:9007</code>.</p>
<h2 id="health"><a class="header" href="#health">Health</a></h2>
<pre><code class="language-bash">GET /health
</code></pre>
<p>Returns service status.</p>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "status": "ok",
  "service": "arb-farm",
  "version": "0.1.0"
}
</code></pre>
<h2 id="scanner-1"><a class="header" href="#scanner-1">Scanner</a></h2>
<p>Control the MEV opportunity scanner.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/scanner/status</code></td><td>Scanner status + statistics</td></tr>
<tr><td>POST</td><td><code>/scanner/start</code></td><td>Start scanning</td></tr>
<tr><td>POST</td><td><code>/scanner/stop</code></td><td>Stop scanning</td></tr>
<tr><td>GET</td><td><code>/scanner/signals</code></td><td>Get recent signals</td></tr>
</tbody>
</table>
</div>
<h3 id="scanner-status-response"><a class="header" href="#scanner-status-response">Scanner Status Response</a></h3>
<pre><code class="language-json">{
  "running": true,
  "signals_detected": 1247,
  "signals_per_minute": 12.5,
  "venues_active": 5,
  "uptime_seconds": 3600
}
</code></pre>
<h2 id="edges-opportunities-1"><a class="header" href="#edges-opportunities-1">Edges (Opportunities)</a></h2>
<p>Detected MEV opportunities.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/edges</code></td><td>List detected edges</td></tr>
<tr><td>GET</td><td><code>/edges/atomic</code></td><td>List atomic (guaranteed profit) edges</td></tr>
<tr><td>GET</td><td><code>/edges/:id</code></td><td>Get edge details</td></tr>
<tr><td>POST</td><td><code>/edges/:id/approve</code></td><td>Approve for execution</td></tr>
<tr><td>POST</td><td><code>/edges/:id/reject</code></td><td>Reject with reason</td></tr>
<tr><td>POST</td><td><code>/edges/:id/execute</code></td><td>Execute immediately</td></tr>
<tr><td>POST</td><td><code>/edges/:id/simulate</code></td><td>Simulate execution</td></tr>
</tbody>
</table>
</div>
<h3 id="query-parameters"><a class="header" href="#query-parameters">Query Parameters</a></h3>
<pre><code>?status=detected|pending_approval|executing|executed|expired|failed|rejected
?edge_type=dex_arb|curve_arb|liquidation|backrun|jit
?atomicity=fully_atomic|partially_atomic|non_atomic
?limit=50&amp;offset=0
</code></pre>
<h3 id="edge-response"><a class="header" href="#edge-response">Edge Response</a></h3>
<pre><code class="language-json">{
  "id": "uuid",
  "edge_type": "dex_arb",
  "execution_mode": "autonomous",
  "atomicity": "fully_atomic",
  "estimated_profit_lamports": 150000,
  "risk_score": 15,
  "status": "detected",
  "route_data": {
    "from_venue": "jupiter",
    "to_venue": "raydium",
    "token_pair": ["SOL", "BONK"]
  },
  "created_at": "2024-01-15T10:30:00Z",
  "expires_at": "2024-01-15T10:31:00Z"
}
</code></pre>
<h2 id="trades-1"><a class="header" href="#trades-1">Trades</a></h2>
<p>Trade execution history and statistics.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/trades</code></td><td>List trade history</td></tr>
<tr><td>GET</td><td><code>/trades/:id</code></td><td>Get trade details</td></tr>
<tr><td>GET</td><td><code>/trades/stats</code></td><td>P&amp;L statistics</td></tr>
<tr><td>GET</td><td><code>/trades/daily</code></td><td>Daily statistics</td></tr>
</tbody>
</table>
</div>
<h3 id="trade-stats-response"><a class="header" href="#trade-stats-response">Trade Stats Response</a></h3>
<pre><code class="language-json">{
  "total_trades": 145,
  "profitable_trades": 112,
  "win_rate": 0.77,
  "total_profit_lamports": 2500000,
  "total_gas_cost_lamports": 150000,
  "net_profit_lamports": 2350000,
  "avg_profit_bps": 35,
  "best_trade_lamports": 500000
}
</code></pre>
<h2 id="bonding-curves"><a class="header" href="#bonding-curves">Bonding Curves</a></h2>
<p>pump.fun, moonshot, and other bonding curve operations.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/curves/tokens</code></td><td>List tracked curve tokens</td></tr>
<tr><td>GET</td><td><code>/curves/health</code></td><td>Venue health status</td></tr>
<tr><td>GET</td><td><code>/curves/graduation-candidates</code></td><td>Tokens near graduation</td></tr>
<tr><td>GET</td><td><code>/curves/cross-venue-arb</code></td><td>Cross-venue arb opportunities</td></tr>
<tr><td>GET</td><td><code>/curves/:mint/progress</code></td><td>Graduation progress for token</td></tr>
<tr><td>GET</td><td><code>/curves/:mint/holders</code></td><td>Holder statistics</td></tr>
<tr><td>POST</td><td><code>/curves/:mint/quote</code></td><td>Get buy/sell quote</td></tr>
<tr><td>GET</td><td><code>/curves/:mint/parameters</code></td><td>Curve parameters</td></tr>
</tbody>
</table>
</div>
<h3 id="graduation-progress-response"><a class="header" href="#graduation-progress-response">Graduation Progress Response</a></h3>
<pre><code class="language-json">{
  "token_mint": "ABC123...",
  "token_name": "MoonCoin",
  "progress_percent": 72.5,
  "bonding_curve_address": "DEF456...",
  "current_supply": 800000000,
  "virtual_sol_reserves": 30.5,
  "virtual_token_reserves": 200000000,
  "graduation_threshold_sol": 85.0,
  "estimated_graduation_at": "2024-01-15T14:00:00Z"
}
</code></pre>
<h3 id="holder-stats-response"><a class="header" href="#holder-stats-response">Holder Stats Response</a></h3>
<pre><code class="language-json">{
  "total_holders": 234,
  "top_10_concentration": 0.45,
  "creator_holdings_percent": 0.05,
  "holders": [
    {
      "address": "7Vk3...",
      "balance": 50000000,
      "percent": 0.125
    }
  ]
}
</code></pre>
<h2 id="researchdd-1"><a class="header" href="#researchdd-1">Research/DD</a></h2>
<p>URL ingestion, strategy discovery, and backtesting.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>POST</td><td><code>/research/ingest</code></td><td>Ingest URL for analysis</td></tr>
<tr><td>GET</td><td><code>/research/discoveries</code></td><td>List discovered strategies</td></tr>
<tr><td>GET</td><td><code>/research/discoveries/:id</code></td><td>Get discovery details</td></tr>
<tr><td>POST</td><td><code>/research/discoveries/:id/approve</code></td><td>Approve strategy</td></tr>
<tr><td>POST</td><td><code>/research/discoveries/:id/reject</code></td><td>Reject strategy</td></tr>
<tr><td>POST</td><td><code>/research/backtest</code></td><td>Run backtest</td></tr>
<tr><td>GET</td><td><code>/research/backtest/:id</code></td><td>Get backtest results</td></tr>
<tr><td>GET</td><td><code>/research/sources</code></td><td>List monitored sources</td></tr>
<tr><td>POST</td><td><code>/research/sources</code></td><td>Add source to monitor</td></tr>
<tr><td>GET</td><td><code>/research/sources/:id</code></td><td>Get source details</td></tr>
<tr><td>DELETE</td><td><code>/research/sources/:id</code></td><td>Remove source</td></tr>
<tr><td>POST</td><td><code>/research/sources/:id/toggle</code></td><td>Toggle source active</td></tr>
<tr><td>GET</td><td><code>/research/alerts</code></td><td>List social alerts</td></tr>
<tr><td>GET</td><td><code>/research/stats</code></td><td>Monitor statistics</td></tr>
<tr><td>POST</td><td><code>/research/monitor</code></td><td>Add account to monitor</td></tr>
</tbody>
</table>
</div>
<h3 id="ingest-url-request"><a class="header" href="#ingest-url-request">Ingest URL Request</a></h3>
<pre><code class="language-json">{
  "url": "https://twitter.com/trader/status/123456789",
  "context": "Potential alpha from known profitable trader"
}
</code></pre>
<h3 id="ingest-url-response"><a class="header" href="#ingest-url-response">Ingest URL Response</a></h3>
<pre><code class="language-json">{
  "id": "uuid",
  "url": "https://twitter.com/trader/status/123456789",
  "content_type": "tweet",
  "title": "Tweet by @trader",
  "summary": "Buy $BONK at curve progress 20%, sell at 80%",
  "tokens_mentioned": ["$BONK", "$SOL"],
  "addresses_found": [],
  "numbers_extracted": [
    {"value": 20.0, "context": "entry point"},
    {"value": 80.0, "context": "exit point"}
  ],
  "has_trading_signal": true,
  "analyzed_at": "2024-01-15T10:30:00Z"
}
</code></pre>
<h3 id="backtest-request"><a class="header" href="#backtest-request">Backtest Request</a></h3>
<pre><code class="language-json">{
  "strategy_id": "uuid",
  "start_date": "2024-01-01",
  "end_date": "2024-01-15",
  "initial_capital_sol": 10.0
}
</code></pre>
<h3 id="backtest-response"><a class="header" href="#backtest-response">Backtest Response</a></h3>
<pre><code class="language-json">{
  "id": "uuid",
  "strategy_id": "uuid",
  "status": "completed",
  "summary": {
    "total_trades": 45,
    "winning_trades": 32,
    "losing_trades": 13,
    "win_rate": 0.71,
    "total_profit_sol": 2.5,
    "total_return_percent": 25.0,
    "max_drawdown_percent": 8.5,
    "sharpe_ratio": 1.85,
    "sortino_ratio": 2.12,
    "calmar_ratio": 2.94
  },
  "metrics": {
    "avg_trade_profit_sol": 0.055,
    "best_trade_sol": 0.8,
    "worst_trade_sol": -0.3,
    "avg_trade_duration_hours": 4.2,
    "max_consecutive_wins": 8,
    "max_consecutive_losses": 3
  },
  "equity_curve": [
    {"timestamp": "2024-01-01T00:00:00Z", "equity_sol": 10.0},
    {"timestamp": "2024-01-15T00:00:00Z", "equity_sol": 12.5}
  ]
}
</code></pre>
<h3 id="add-source-request"><a class="header" href="#add-source-request">Add Source Request</a></h3>
<pre><code class="language-json">{
  "source_type": "twitter",
  "handle_or_url": "@ZachXBT",
  "track_type": "threat"
}
</code></pre>
<h2 id="kol-tracking--copy-trading"><a class="header" href="#kol-tracking--copy-trading">KOL Tracking + Copy Trading</a></h2>
<p>Track whale wallets and influential traders with optional copy trading.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/kol</code></td><td>List tracked KOLs</td></tr>
<tr><td>POST</td><td><code>/kol</code></td><td>Add KOL to track</td></tr>
<tr><td>GET</td><td><code>/kol/:id</code></td><td>Get KOL details</td></tr>
<tr><td>PUT</td><td><code>/kol/:id</code></td><td>Update KOL settings</td></tr>
<tr><td>DELETE</td><td><code>/kol/:id</code></td><td>Stop tracking</td></tr>
<tr><td>GET</td><td><code>/kol/:id/trades</code></td><td>KOL trade history</td></tr>
<tr><td>GET</td><td><code>/kol/:id/stats</code></td><td>Performance statistics</td></tr>
<tr><td>GET</td><td><code>/kol/:id/trust</code></td><td>Trust score breakdown</td></tr>
<tr><td>POST</td><td><code>/kol/:id/copy/enable</code></td><td>Enable copy trading</td></tr>
<tr><td>POST</td><td><code>/kol/:id/copy/disable</code></td><td>Disable copy trading</td></tr>
<tr><td>GET</td><td><code>/kol/:id/copy/history</code></td><td>Copy trade history</td></tr>
<tr><td>GET</td><td><code>/kol/copies/active</code></td><td>Active copy positions</td></tr>
<tr><td>GET</td><td><code>/kol/copies/stats</code></td><td>Copy trading stats</td></tr>
</tbody>
</table>
</div>
<h3 id="add-kol-request"><a class="header" href="#add-kol-request">Add KOL Request</a></h3>
<pre><code class="language-json">{
  "wallet_address": "7Vk3...8xNp",
  "display_name": "Whale Watcher"
}
</code></pre>
<p>Or by Twitter handle:</p>
<pre><code class="language-json">{
  "twitter_handle": "@CryptoWhale",
  "display_name": "Crypto Whale"
}
</code></pre>
<h3 id="kol-stats-response"><a class="header" href="#kol-stats-response">KOL Stats Response</a></h3>
<pre><code class="language-json">{
  "entity_id": "uuid",
  "display_name": "Whale Watcher",
  "identifier": "7Vk3...8xNp",
  "trust_score": 78.5,
  "total_trades": 145,
  "profitable_trades": 112,
  "win_rate": 0.77,
  "avg_profit_percent": 12.5,
  "total_volume_sol": 250.5,
  "our_copy_count": 45,
  "our_copy_profit_sol": 2.5,
  "copy_trading_enabled": true,
  "last_trade_at": "2024-01-15T10:30:00Z"
}
</code></pre>
<h3 id="enable-copy-trading-request"><a class="header" href="#enable-copy-trading-request">Enable Copy Trading Request</a></h3>
<pre><code class="language-json">{
  "max_position_sol": 0.5,
  "delay_ms": 500,
  "min_trust_score": 60,
  "copy_percentage": 0.1,
  "token_blacklist": ["ScamToken..."]
}
</code></pre>
<h3 id="trust-score-breakdown-response"><a class="header" href="#trust-score-breakdown-response">Trust Score Breakdown Response</a></h3>
<pre><code class="language-json">{
  "base_score": 50.0,
  "win_rate_factor": 23.4,
  "trade_count_factor": 7.5,
  "avg_profit_factor": 6.2,
  "drawdown_penalty": 4.5,
  "final_score": 82.6
}
</code></pre>
<h2 id="threat-detection-2"><a class="header" href="#threat-detection-2">Threat Detection</a></h2>
<p>Identify rug pulls, honeypots, scam wallets, and other threats.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/threat/check/:mint</code></td><td>Full threat analysis on token</td></tr>
<tr><td>GET</td><td><code>/threat/wallet/:address</code></td><td>Check wallet for scam history</td></tr>
<tr><td>GET</td><td><code>/threat/blocked</code></td><td>List blocked entities</td></tr>
<tr><td>POST</td><td><code>/threat/report</code></td><td>Report a threat</td></tr>
<tr><td>DELETE</td><td><code>/threat/blocked/:address</code></td><td>Remove from blocklist</td></tr>
<tr><td>GET</td><td><code>/threat/blocked/:address/status</code></td><td>Check if blocked</td></tr>
<tr><td>GET</td><td><code>/threat/whitelist</code></td><td>List whitelisted entities</td></tr>
<tr><td>POST</td><td><code>/threat/whitelist</code></td><td>Whitelist an entity</td></tr>
<tr><td>DELETE</td><td><code>/threat/whitelist/:address</code></td><td>Remove from whitelist</td></tr>
<tr><td>GET</td><td><code>/threat/whitelist/:address/status</code></td><td>Check if whitelisted</td></tr>
<tr><td>GET</td><td><code>/threat/watch</code></td><td>List watched wallets</td></tr>
<tr><td>POST</td><td><code>/threat/watch</code></td><td>Add wallet to watch list</td></tr>
<tr><td>GET</td><td><code>/threat/alerts</code></td><td>Get recent alerts</td></tr>
<tr><td>GET</td><td><code>/threat/score/:mint/history</code></td><td>Get threat score history</td></tr>
<tr><td>GET</td><td><code>/threat/stats</code></td><td>Get detection statistics</td></tr>
</tbody>
</table>
</div>
<h3 id="threat-check-response"><a class="header" href="#threat-check-response">Threat Check Response</a></h3>
<pre><code class="language-json">{
  "success": true,
  "score": {
    "token_mint": "TokenMint...",
    "overall_score": 0.65,
    "factors": {
      "has_mint_authority": true,
      "has_freeze_authority": false,
      "top_10_concentration": 0.78,
      "rugcheck_score": 0.45,
      "goplus_honeypot": false,
      "wash_trade_likelihood": 0.2
    },
    "risk_level": "high",
    "recommendation": "CAUTION - Significant risk factors detected",
    "external_data": {
      "rugcheck": { ... },
      "goplus": { ... },
      "holder_analysis": { ... }
    }
  }
}
</code></pre>
<h3 id="report-threat-request"><a class="header" href="#report-threat-request">Report Threat Request</a></h3>
<pre><code class="language-json">{
  "entity_type": "token",
  "address": "ScamToken...",
  "category": "rug_pull",
  "reason": "Creator dumped 80% of supply",
  "evidence_url": "https://solscan.io/tx/..."
}
</code></pre>
<h3 id="watch-wallet-request"><a class="header" href="#watch-wallet-request">Watch Wallet Request</a></h3>
<pre><code class="language-json">{
  "wallet_address": "CreatorWallet...",
  "related_token_mint": "TokenMint...",
  "watch_reason": "Token creator - monitoring for dumps",
  "alert_on_sell": true,
  "alert_threshold_sol": 10.0
}
</code></pre>
<h3 id="threat-stats-response"><a class="header" href="#threat-stats-response">Threat Stats Response</a></h3>
<pre><code class="language-json">{
  "total_tokens_checked": 1234,
  "threats_detected": 89,
  "rugs_prevented": 23,
  "blocked_tokens": 45,
  "blocked_wallets": 67,
  "whitelisted_count": 12,
  "watched_wallets": 34,
  "alerts_last_24h": 15
}
</code></pre>
<h2 id="sse-streams"><a class="header" href="#sse-streams">SSE Streams</a></h2>
<p>Real-time Server-Sent Event streams.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>/scanner/stream</code></td><td>Scanner signals in real-time</td></tr>
<tr><td><code>/edges/stream</code></td><td>New edge opportunities</td></tr>
<tr><td><code>/events/stream</code></td><td>All system events</td></tr>
<tr><td><code>/threat/stream</code></td><td>Threat alerts</td></tr>
</tbody>
</table>
</div>
<h3 id="connecting-to-sse"><a class="header" href="#connecting-to-sse">Connecting to SSE</a></h3>
<pre><code class="language-bash">curl -N http://localhost:9007/edges/stream
</code></pre>
<h3 id="event-format"><a class="header" href="#event-format">Event Format</a></h3>
<pre><code class="language-json">{
  "event_type": "edge.detected",
  "data": {
    "id": "uuid",
    "edge_type": "dex_arb",
    "estimated_profit_lamports": 150000
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
</code></pre>
<h2 id="mcp-tools-1"><a class="header" href="#mcp-tools-1">MCP Tools</a></h2>
<p>ArbFarm exposes MCP tools for agent integration.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/mcp/manifest</code></td><td>MCP manifest</td></tr>
<tr><td>GET</td><td><code>/mcp/tools</code></td><td>List available tools</td></tr>
</tbody>
</table>
</div>
<h3 id="available-mcp-tools"><a class="header" href="#available-mcp-tools">Available MCP Tools</a></h3>
<p><strong>Scanner Tools:</strong></p>
<ul>
<li><code>scanner_status</code> - Get scanner status</li>
<li><code>scanner_signals</code> - Get recent signals</li>
<li><code>scanner_start</code> - Start scanner</li>
<li><code>scanner_stop</code> - Stop scanner</li>
</ul>
<p><strong>Edge Tools:</strong></p>
<ul>
<li><code>edge_list</code> - List edges with filtering</li>
<li><code>edge_details</code> - Get edge details</li>
<li><code>edge_approve</code> - Approve edge</li>
<li><code>edge_reject</code> - Reject edge</li>
<li><code>edge_list_atomic</code> - List atomic edges</li>
<li><code>edge_simulate</code> - Simulate execution</li>
<li><code>edge_execute</code> - Execute edge</li>
</ul>
<p><strong>Curve Tools:</strong></p>
<ul>
<li><code>curve_tokens</code> - List curve tokens</li>
<li><code>curve_progress</code> - Get graduation progress</li>
<li><code>curve_holders</code> - Get holder stats</li>
<li><code>curve_quote</code> - Get buy/sell quote</li>
<li><code>curve_graduation_candidates</code> - Find graduation opportunities</li>
</ul>
<p><strong>Research Tools:</strong></p>
<ul>
<li><code>research_ingest_url</code> - Analyze URL</li>
<li><code>research_list_discoveries</code> - List discovered strategies</li>
<li><code>research_approve_discovery</code> - Approve strategy</li>
<li><code>research_reject_discovery</code> - Reject strategy</li>
<li><code>research_backtest_strategy</code> - Run backtest</li>
<li><code>research_list_sources</code> - List monitored sources</li>
<li><code>research_alerts</code> - Get social alerts</li>
<li><code>research_stats</code> - Monitor statistics</li>
</ul>
<p><strong>Trade Tools:</strong></p>
<ul>
<li><code>trade_history</code> - Get trade history</li>
<li><code>trade_stats</code> - Get P&amp;L statistics</li>
</ul>
<p><strong>KOL Tools:</strong></p>
<ul>
<li><code>kol_track</code> - Start tracking a KOL</li>
<li><code>kol_list</code> - List tracked KOLs</li>
<li><code>kol_stats</code> - Get KOL performance stats</li>
<li><code>kol_trades</code> - Get KOL trade history</li>
<li><code>kol_trust_breakdown</code> - Get trust score details</li>
<li><code>copy_enable</code> - Enable copy trading</li>
<li><code>copy_disable</code> - Disable copy trading</li>
<li><code>copy_active</code> - List active copy positions</li>
<li><code>copy_stats</code> - Get copy trading stats</li>
<li><code>copy_history</code> - Get copy trade history</li>
</ul>
<p><strong>Threat Tools:</strong></p>
<ul>
<li><code>threat_check_token</code> - Full threat analysis on a token</li>
<li><code>threat_check_wallet</code> - Analyze wallet for scam history</li>
<li><code>threat_list_blocked</code> - List blocked entities</li>
<li><code>threat_report</code> - Report a threat</li>
<li><code>threat_whitelist</code> - Whitelist an entity</li>
<li><code>threat_watch_wallet</code> - Add wallet to monitoring</li>
<li><code>threat_alerts</code> - Get recent threat alerts</li>
<li><code>threat_score_history</code> - Get threat score history</li>
<li><code>threat_stats</code> - Get detection statistics</li>
<li><code>threat_is_blocked</code> - Check if address is blocked</li>
<li><code>threat_is_whitelisted</code> - Check if address is whitelisted</li>
</ul>
<h2 id="error-responses"><a class="header" href="#error-responses">Error Responses</a></h2>
<p>All errors follow a consistent format:</p>
<pre><code class="language-json">{
  "error": "Description of the error",
  "code": 400
}
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Code</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>400</td><td>Bad Request - Invalid parameters</td></tr>
<tr><td>401</td><td>Unauthorized</td></tr>
<tr><td>403</td><td>Forbidden - Threat detected</td></tr>
<tr><td>404</td><td>Not Found</td></tr>
<tr><td>409</td><td>Conflict - Consensus failed</td></tr>
<tr><td>422</td><td>Validation Error</td></tr>
<tr><td>429</td><td>Rate Limited</td></tr>
<tr><td>500</td><td>Internal Server Error</td></tr>
<tr><td>502</td><td>External API Error</td></tr>
</tbody>
</table>
</div>
<h2 id="related-13"><a class="header" href="#related-13">Related</a></h2>
<ul>
<li><a href="#arbfarm-service-architecture">Service Architecture</a></li>
<li><a href="#researchdd-module">Research Module</a></li>
<li><a href="#bonding-curves-module">Bonding Curves</a></li>
<li><a href="#kol-tracking--copy-trading-1">KOL Tracking</a></li>
<li><a href="#threat-detection-system">Threat Detection</a></li>
<li><a href="#arbfarm-event-bus">Event Bus</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="arbfarm-event-bus"><a class="header" href="#arbfarm-event-bus">ArbFarm Event Bus</a></h1>
<p><strong>GOLDEN RULE</strong>: All agent-to-agent and tool communications use standardized protocols with subscribable events. This enables future agents to plug in and consume events without modifying existing code.</p>
<h2 id="event-structure"><a class="header" href="#event-structure">Event Structure</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ArbEvent {
    pub id: Uuid,
    pub event_type: String,
    pub source: EventSource,
    pub topic: String,
    pub payload: serde_json::Value,
    pub timestamp: DateTime&lt;Utc&gt;,
    pub correlation_id: Option&lt;Uuid&gt;,
}

pub enum EventSource {
    Agent(AgentType),
    Tool(String),
    External(String),
    System,
}
<span class="boring">}</span></code></pre>
<h2 id="event-topics"><a class="header" href="#event-topics">Event Topics</a></h2>
<p>All events follow a hierarchical topic structure for pattern-based subscriptions.</p>
<h3 id="scanner-events"><a class="header" href="#scanner-events">Scanner Events</a></h3>
<pre><code>arb.scanner.*                    # All scanner events
arb.scanner.signal.detected      # New signal detected
arb.scanner.venue.added          # New venue discovered
arb.scanner.started              # Scanner started
arb.scanner.stopped              # Scanner stopped
</code></pre>
<h3 id="edge-events"><a class="header" href="#edge-events">Edge Events</a></h3>
<pre><code>arb.edge.*                       # All edge events
arb.edge.detected                # New opportunity found
arb.edge.approved                # Edge approved for execution
arb.edge.rejected                # Edge rejected
arb.edge.executing               # Trade in progress
arb.edge.executed                # Trade completed
arb.edge.failed                  # Trade failed
arb.edge.expired                 # Edge expired
</code></pre>
<h3 id="strategy-events"><a class="header" href="#strategy-events">Strategy Events</a></h3>
<pre><code>arb.strategy.*                   # Strategy events
arb.strategy.created             # New strategy added
arb.strategy.updated             # Strategy modified
arb.strategy.triggered           # Strategy conditions met
arb.strategy.enabled             # Strategy enabled
arb.strategy.disabled            # Strategy disabled
</code></pre>
<h3 id="research-events"><a class="header" href="#research-events">Research Events</a></h3>
<pre><code>arb.research.*                   # Research/DD events
arb.research.url.ingested        # URL analyzed
arb.research.strategy.discovered # New strategy found
arb.research.strategy.approved   # Strategy approved
arb.research.backtest.completed  # Backtest finished
</code></pre>
<h3 id="kol-events"><a class="header" href="#kol-events">KOL Events</a></h3>
<pre><code>arb.kol.*                        # KOL tracking events
arb.kol.trade.detected           # KOL made a trade
arb.kol.trade.copied             # We copied the trade
arb.kol.trust.updated            # Trust score changed
arb.kol.added                    # New KOL tracked
arb.kol.removed                  # KOL removed
</code></pre>
<h3 id="threat-events"><a class="header" href="#threat-events">Threat Events</a></h3>
<pre><code>arb.threat.*                     # Threat detection events
arb.threat.detected              # Threat identified
arb.threat.blocked               # Entity blocked
arb.threat.alert                 # Alert raised
arb.threat.whitelisted           # Entity whitelisted
</code></pre>
<h3 id="engram-events"><a class="header" href="#engram-events">Engram Events</a></h3>
<pre><code>arb.engram.*                     # Engram events
arb.engram.created               # New engram stored
arb.engram.pattern.matched       # Pattern recognized
arb.engram.avoidance.created     # Avoidance engram created
arb.engram.strategy.optimized    # Strategy improved via engrams
</code></pre>
<h3 id="swarm-events"><a class="header" href="#swarm-events">Swarm Events</a></h3>
<pre><code>arb.swarm.*                      # Swarm health events
arb.swarm.agent.started          # Agent spawned
arb.swarm.agent.stopped          # Agent stopped
arb.swarm.agent.failed           # Agent crashed
arb.swarm.agent.recovered        # Agent restarted
arb.swarm.paused                 # Swarm paused
arb.swarm.resumed                # Swarm resumed
</code></pre>
<h2 id="subscribing-to-events-1"><a class="header" href="#subscribing-to-events-1">Subscribing to Events</a></h2>
<h3 id="pattern-matching"><a class="header" href="#pattern-matching">Pattern Matching</a></h3>
<p>Topics support wildcard patterns:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Subscribe to all edge events
event_bus.subscribe_to(vec!["arb.edge.*".to_string()])

// Subscribe to specific events
event_bus.subscribe_to(vec![
    "arb.edge.executed".to_string(),
    "arb.threat.detected".to_string(),
])
<span class="boring">}</span></code></pre>
<h3 id="composability-example-1"><a class="header" href="#composability-example-1">Composability Example</a></h3>
<p>A new agent can plug into the swarm by subscribing to relevant events:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Content generation agent subscribes to interesting events
let subscription = event_bus.subscribe_to(vec![
    "arb.edge.executed",
    "arb.threat.detected",
    "arb.research.strategy.discovered",
]).await;

while let Some(event) = subscription.recv().await {
    match event.topic.as_str() {
        "arb.edge.executed" =&gt; {
            let trade: TradeResult = serde_json::from_value(event.payload)?;
            if trade.profit_sol &gt; 0.1 {
                self.generate_win_tweet(trade).await;
            }
        }
        // ... handle other events
    }
}
<span class="boring">}</span></code></pre>
<h2 id="event-persistence"><a class="header" href="#event-persistence">Event Persistence</a></h2>
<p>All events are persisted to the database for:</p>
<ul>
<li>Historical analysis</li>
<li>Replay from a specific point</li>
<li>Debugging and auditing</li>
</ul>
<pre><code class="language-sql">SELECT * FROM arb_events 
WHERE topic LIKE 'arb.edge.%' 
ORDER BY created_at DESC 
LIMIT 100;
</code></pre>
<h2 id="related-14"><a class="header" href="#related-14">Related</a></h2>
<ul>
<li><a href="#arbfarm-service-architecture">Service Architecture</a></li>
<li><a href="#arbfarm-api-reference">API Reference</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="arbfarm-frontend-dashboard"><a class="header" href="#arbfarm-frontend-dashboard">ArbFarm Frontend Dashboard</a></h1>
<p>The ArbFarm frontend is integrated into the Hecate dashboard as a submenu within the MemCache tab. It provides real-time monitoring and control of the Solana MEV agent swarm.</p>
<p><strong>Status</strong>: âœ… Complete (Phase 11)</p>
<hr>
<h2 id="architecture-overview-1"><a class="header" href="#architecture-overview-1">Architecture Overview</a></h2>
<pre><code>svc/hecate/src/
â”œâ”€â”€ types/arbfarm.ts                    # TypeScript type definitions
â”œâ”€â”€ common/
â”‚   â”œâ”€â”€ services/arbfarm-service.tsx    # API service class
â”‚   â””â”€â”€ hooks/useArbFarm.ts             # React data hook
â””â”€â”€ components/
    â”œâ”€â”€ hud/VoidOverlay.tsx             # Navigation (includes ArbFarm menu item)
    â””â”€â”€ memcache/arbfarm/
        â”œâ”€â”€ ArbFarmDashboard.tsx        # Main dashboard (7 views)
        â”œâ”€â”€ arbfarm.module.scss         # Styles (~1200 lines)
        â””â”€â”€ components/                 # Subcomponents
            â”œâ”€â”€ EdgeCard.tsx            # Opportunity card
            â”œâ”€â”€ MetricCard.tsx          # P&amp;L metric display
            â”œâ”€â”€ SwarmStatusCard.tsx     # Agent health
            â”œâ”€â”€ ThreatAlertCard.tsx     # Threat alerts
            â””â”€â”€ TradeHistoryCard.tsx    # Trade history
</code></pre>
<hr>
<h2 id="quick-start-2"><a class="header" href="#quick-start-2">Quick Start</a></h2>
<ol>
<li>Navigate to <code>http://localhost:5173</code></li>
<li>Connect your wallet (or simulate via localStorage)</li>
<li>Go to the <strong>Mem Cache</strong> tab</li>
<li>Click <strong>ArbFarm</strong> in the submenu</li>
</ol>
<hr>
<h2 id="implementation-details"><a class="header" href="#implementation-details">Implementation Details</a></h2>
<h3 id="navigation-integration"><a class="header" href="#navigation-integration">Navigation Integration</a></h3>
<p>ArbFarm is registered in <code>VoidOverlay.tsx</code> as part of the MemCache submenu:</p>
<pre><code class="language-typescript">// src/components/hud/VoidOverlay.tsx
const MEMCACHE_ITEMS: { id: MemCacheSection; icon: string; label: string }[] = [
  { id: 'engrams', icon: 'â—ˆ', label: 'Engrams' },
  { id: 'workflows', icon: 'â¬¡', label: 'Workflows' },
  { id: 'tasks', icon: 'â–£', label: 'Tasks' },
  { id: 'arbfarm', icon: 'âš¡', label: 'ArbFarm' },  // ArbFarm entry
  { id: 'agents', icon: 'â—‰', label: 'Agents' },
  // ...
];
</code></pre>
<h3 id="type-system-typesarbfarmts"><a class="header" href="#type-system-typesarbfarmts">Type System (<code>types/arbfarm.ts</code>)</a></h3>
<p>Comprehensive TypeScript definitions (~500 lines) for all ArbFarm entities:</p>
<h4 id="core-types"><a class="header" href="#core-types">Core Types</a></h4>
<pre><code class="language-typescript">// Edge Status
export type EdgeStatus =
  | 'detected'
  | 'pending_approval'
  | 'executing'
  | 'executed'
  | 'expired'
  | 'failed'
  | 'rejected';

// Edge (Opportunity)
export interface Edge {
  id: string;
  strategy_id?: string;
  edge_type: EdgeType;
  venue_type: VenueType;
  execution_mode: ExecutionMode;
  atomicity: AtomicityLevel;
  simulated_profit_guaranteed: boolean;
  simulation_tx_hash?: string;
  max_gas_cost_lamports?: number;
  estimated_profit_lamports: number;
  risk_score: number;
  route_data: RouteData;
  status: EdgeStatus;
  rejection_reason?: string;
  executed_at?: string;
  actual_profit_lamports?: number;
  actual_gas_cost_lamports?: number;
  created_at: string;
  expires_at?: string;
}

// Trade
export interface Trade {
  id: string;
  edge_id: string;
  strategy_id?: string;
  tx_signature?: string;
  bundle_id?: string;
  entry_price?: number;
  exit_price?: number;
  profit_lamports: number;
  gas_cost_lamports: number;
  slippage_bps: number;
  executed_at: string;
}

// Strategy
export interface Strategy {
  id: string;
  wallet_address: string;
  name: string;
  strategy_type: StrategyType;
  venue_types: VenueType[];
  execution_mode: ExecutionMode;
  risk_params: RiskParams;
  is_active: boolean;
  stats?: StrategyStats;
  created_at: string;
  updated_at: string;
}

// Swarm Health
export interface SwarmHealth {
  total_agents: number;
  healthy_agents: number;
  degraded_agents: number;
  unhealthy_agents: number;
  dead_agents: number;
  overall_health: AgentHealth;
  is_paused: boolean;
  last_heartbeat?: string;
  agent_statuses: AgentStatus[];
}

// Threat Score
export interface ThreatScore {
  token_mint: string;
  overall_score: number;
  factors: ThreatFactors;
  confidence: number;
  external_data?: ExternalThreatData;
  recommendation: string;
  last_updated: string;
}
</code></pre>
<h4 id="color-constants"><a class="header" href="#color-constants">Color Constants</a></h4>
<pre><code class="language-typescript">export const EDGE_STATUS_COLORS: Record&lt;EdgeStatus, string&gt; = {
  detected: '#3b82f6',      // Blue
  pending_approval: '#f59e0b', // Amber
  executing: '#8b5cf6',     // Purple
  executed: '#22c55e',      // Green
  expired: '#6b7280',       // Gray
  failed: '#ef4444',        // Red
  rejected: '#f97316',      // Orange
};

export const AGENT_HEALTH_COLORS: Record&lt;AgentHealth, string&gt; = {
  Healthy: '#22c55e',
  Degraded: '#f59e0b',
  Unhealthy: '#f97316',
  Dead: '#ef4444',
};

export const PRIORITY_COLORS: Record&lt;Priority, string&gt; = {
  critical: '#ef4444',
  high: '#f59e0b',
  medium: '#3b82f6',
  low: '#6b7280',
};
</code></pre>
<hr>
<h3 id="api-service-arbfarm-servicetsx"><a class="header" href="#api-service-arbfarm-servicetsx">API Service (<code>arbfarm-service.tsx</code>)</a></h3>
<p>Class-based service (~500 lines) following existing patterns:</p>
<pre><code class="language-typescript">import { arbFarmService } from '../../common/services/arbfarm-service';

// Dashboard Summary
const summary = await arbFarmService.getDashboardSummary();

// Edges
const edges = await arbFarmService.listEdges({
  status: ['detected', 'pending_approval'],
  edge_type: ['dex_arb'],
  min_profit_lamports: 100000,
});
await arbFarmService.approveEdge(edgeId);
await arbFarmService.rejectEdge(edgeId, 'Too risky');
await arbFarmService.executeEdge(edgeId, { max_slippage_bps: 50 });

// Scanner
const status = await arbFarmService.getScannerStatus();
await arbFarmService.startScanner();
await arbFarmService.stopScanner();

// Swarm
const health = await arbFarmService.getSwarmStatus();
await arbFarmService.pauseSwarm();
await arbFarmService.resumeSwarm();

// Strategies
const strategies = await arbFarmService.listStrategies();
await arbFarmService.toggleStrategy(strategyId, true);

// Threats
const score = await arbFarmService.checkTokenThreat(tokenMint);
const alerts = await arbFarmService.getThreatAlerts();
const blocked = await arbFarmService.getBlockedEntities();

// KOL Tracking
const kols = await arbFarmService.listKOLs();
await arbFarmService.enableCopyTrading(kolId, config);

// Bonding Curves
const candidates = await arbFarmService.listGraduationCandidates();

// Engrams
const engrams = await arbFarmService.searchEngrams({ key_prefix: 'arb.' });

// SSE Streams
const streamUrl = arbFarmService.getEventsStreamUrl();
</code></pre>
<hr>
<h3 id="react-hook-usearbfarmts"><a class="header" href="#react-hook-usearbfarmts">React Hook (<code>useArbFarm.ts</code>)</a></h3>
<p>Comprehensive hook (~900 lines) managing all ArbFarm state:</p>
<pre><code class="language-typescript">import { useArbFarm } from '../../common/hooks/useArbFarm';

const {
  // Dashboard
  dashboard: {
    summary,           // DashboardSummary | null
    isLoading,         // boolean
    error,             // string | null
    refresh,           // () =&gt; Promise&lt;void&gt;
  },

  // Edges (Opportunities)
  edges: {
    data,              // Edge[]
    filter,            // EdgeFilter
    isLoading,         // boolean
    error,             // string | null
    setFilter,         // (filter: EdgeFilter) =&gt; void
    refresh,           // () =&gt; Promise&lt;void&gt;
    approve,           // (id: string) =&gt; Promise&lt;void&gt;
    reject,            // (id: string, reason: string) =&gt; Promise&lt;void&gt;
    execute,           // (id: string, params?: ExecuteParams) =&gt; Promise&lt;void&gt;
  },

  // Trades
  trades: {
    data,              // Trade[]
    stats,             // TradeStats | null
    dailyStats,        // DailyStats[]
    isLoading,         // boolean
    refresh,           // () =&gt; Promise&lt;void&gt;
    refreshStats,      // (period: string) =&gt; Promise&lt;void&gt;
  },

  // Scanner
  scanner: {
    status,            // ScannerStatus | null
    isLoading,         // boolean
    start,             // () =&gt; Promise&lt;void&gt;
    stop,              // () =&gt; Promise&lt;void&gt;
    refresh,           // () =&gt; Promise&lt;void&gt;
  },

  // Swarm
  swarm: {
    health,            // SwarmHealth | null
    isLoading,         // boolean
    pause,             // () =&gt; Promise&lt;void&gt;
    resume,            // () =&gt; Promise&lt;void&gt;
    refresh,           // () =&gt; Promise&lt;void&gt;
  },

  // Strategies
  strategies: {
    data,              // Strategy[]
    isLoading,         // boolean
    refresh,           // () =&gt; Promise&lt;void&gt;
    toggle,            // (id: string, enabled: boolean) =&gt; Promise&lt;void&gt;
    create,            // (params: CreateStrategyParams) =&gt; Promise&lt;void&gt;
    update,            // (id: string, params: UpdateStrategyParams) =&gt; Promise&lt;void&gt;
    delete,            // (id: string) =&gt; Promise&lt;void&gt;
  },

  // Threats
  threats: {
    alerts,            // ThreatAlert[]
    blocked,           // BlockedEntity[]
    isLoading,         // boolean
    refresh,           // () =&gt; Promise&lt;void&gt;
    checkToken,        // (mint: string) =&gt; Promise&lt;ThreatScore&gt;
    report,            // (params: ReportThreatParams) =&gt; Promise&lt;void&gt;
  },

  // KOL Tracking
  kols: {
    data,              // KOLEntity[]
    isLoading,         // boolean
    refresh,           // () =&gt; Promise&lt;void&gt;
    add,               // (params: AddKOLParams) =&gt; Promise&lt;void&gt;
    remove,            // (id: string) =&gt; Promise&lt;void&gt;
    enableCopy,        // (id: string, config: CopyConfig) =&gt; Promise&lt;void&gt;
    disableCopy,       // (id: string) =&gt; Promise&lt;void&gt;
  },

  // Bonding Curves
  curves: {
    tokens,            // CurveToken[]
    candidates,        // GraduationCandidate[]
    isLoading,         // boolean
    refresh,           // () =&gt; Promise&lt;void&gt;
  },

  // Engrams
  engrams: {
    data,              // Engram[]
    isLoading,         // boolean
    refresh,           // () =&gt; Promise&lt;void&gt;
    search,            // (query: string, limit?: number) =&gt; Promise&lt;void&gt;
  },

  // SSE (Server-Sent Events)
  sse: {
    isConnected,       // boolean
    lastEvent,         // ArbEvent | null
    connect,           // (topics: string[]) =&gt; void
    disconnect,        // () =&gt; void
  },
} = useArbFarm({
  pollInterval: 10000,        // Poll every 10 seconds
  autoFetchDashboard: true,   // Auto-fetch on mount
  autoFetchScanner: true,
  autoFetchSwarm: true,
});
</code></pre>
<hr>
<h3 id="dashboard-component-arbfarmdashboardtsx"><a class="header" href="#dashboard-component-arbfarmdashboardtsx">Dashboard Component (<code>ArbFarmDashboard.tsx</code>)</a></h3>
<p>Main component (~560 lines) with 7 views:</p>
<pre><code class="language-typescript">export type ArbFarmView =
  | 'dashboard'      // Main overview
  | 'opportunities'  // Live edge feed
  | 'strategies'     // Strategy management
  | 'threats'        // Threat detection
  | 'kol-tracker'    // KOL tracking (placeholder)
  | 'settings'       // Configuration (placeholder)
  | 'research';      // Research module (placeholder)
</code></pre>
<h4 id="view-details"><a class="header" href="#view-details">View Details</a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>View</th><th>Features</th><th>Status</th></tr>
</thead>
<tbody>
<tr><td><strong>Dashboard</strong></td><td>P&amp;L metrics, swarm health, top opportunities, recent trades, threat alerts, active strategies</td><td>âœ… Complete</td></tr>
<tr><td><strong>Opportunities</strong></td><td>Filter by status, approve/reject/execute actions, atomicity indicators</td><td>âœ… Complete</td></tr>
<tr><td><strong>Strategies</strong></td><td>Toggle enable/disable, risk params display, performance stats</td><td>âœ… Complete</td></tr>
<tr><td><strong>Threats</strong></td><td>Token quick check, recent alerts, blocked entities</td><td>âœ… Complete</td></tr>
<tr><td><strong>KOL Tracker</strong></td><td>Placeholder</td><td>â³ Placeholder</td></tr>
<tr><td><strong>Settings</strong></td><td>Placeholder</td><td>â³ Placeholder</td></tr>
<tr><td><strong>Research</strong></td><td>Placeholder</td><td>â³ Placeholder</td></tr>
</tbody>
</table>
</div>
<hr>
<h3 id="subcomponents"><a class="header" href="#subcomponents">Subcomponents</a></h3>
<h4 id="metriccard"><a class="header" href="#metriccard">MetricCard</a></h4>
<p>Displays P&amp;L and statistics with gradient borders:</p>
<pre><code class="language-tsx">&lt;MetricCard
  label="Total P&amp;L"
  value="+1.2345 SOL"
  trend="up"
  trendValue="+0.5 this week"
  color="#22c55e"
  onClick={() =&gt; navigateToDetails()}
/&gt;
</code></pre>
<h4 id="edgecard"><a class="header" href="#edgecard">EdgeCard</a></h4>
<p>Displays opportunity details with actions:</p>
<pre><code class="language-tsx">&lt;EdgeCard
  edge={edge}
  onApprove={() =&gt; edges.approve(edge.id)}
  onReject={(reason) =&gt; edges.reject(edge.id, reason)}
  onExecute={() =&gt; edges.execute(edge.id)}
  compact={false}
/&gt;
</code></pre>
<h4 id="swarmstatuscard"><a class="header" href="#swarmstatuscard">SwarmStatusCard</a></h4>
<p>Shows agent health status:</p>
<pre><code class="language-tsx">&lt;SwarmStatusCard
  health={swarm.health}
  scannerStatus={scanner.status}
  isLoading={swarm.isLoading}
/&gt;
</code></pre>
<h4 id="threatalertcard"><a class="header" href="#threatalertcard">ThreatAlertCard</a></h4>
<p>Displays threat alerts with severity indicators:</p>
<pre><code class="language-tsx">&lt;ThreatAlertCard
  alert={alert}
  compact={true}
/&gt;
</code></pre>
<h4 id="tradehistorycard"><a class="header" href="#tradehistorycard">TradeHistoryCard</a></h4>
<p>Shows trade execution details:</p>
<pre><code class="language-tsx">&lt;TradeHistoryCard
  trade={trade}
  compact={true}
/&gt;
</code></pre>
<hr>
<h3 id="styling-arbfarmmodulescss"><a class="header" href="#styling-arbfarmmodulescss">Styling (<code>arbfarm.module.scss</code>)</a></h3>
<p>SCSS modules (~1200 lines) with consistent color scheme:</p>
<pre><code class="language-scss">// Color palette
$color-success: #22c55e;
$color-warning: #f59e0b;
$color-danger: #ef4444;
$color-info: #3b82f6;
$color-purple: #8b5cf6;

// Gradient borders (MetricCard)
.metricCard {
  background: linear-gradient(135deg, rgba(255,255,255,0.05), transparent);
  border: 1px solid transparent;
  border-image: linear-gradient(135deg, rgba(255,255,255,0.2), transparent) 1;
}

// Status indicators
.priorityCritical { border-left: 3px solid $color-danger; }
.priorityHigh { border-left: 3px solid $color-warning; }
.priorityMedium { border-left: 3px solid $color-info; }
.priorityLow { border-left: 3px solid #6b7280; }

// Health badges
.healthBadge {
  &amp;.healthy { background: rgba(34, 197, 94, 0.2); color: $color-success; }
  &amp;.degraded { background: rgba(245, 158, 11, 0.2); color: $color-warning; }
  &amp;.unhealthy { background: rgba(249, 115, 22, 0.2); color: #f97316; }
  &amp;.dead { background: rgba(239, 68, 68, 0.2); color: $color-danger; }
}
</code></pre>
<hr>
<h2 id="sse-integration"><a class="header" href="#sse-integration">SSE Integration</a></h2>
<p>Real-time updates via Server-Sent Events:</p>
<pre><code class="language-typescript">// In ArbFarmDashboard.tsx
useEffect(() =&gt; {
  sse.connect(['arb.edge.*', 'arb.trade.*', 'arb.threat.*', 'arb.swarm.*']);
  return () =&gt; sse.disconnect();
}, []);

// Live indicator
{sse.isConnected &amp;&amp; (
  &lt;div className={styles.sseStatus}&gt;
    &lt;span className={styles.sseIndicator} /&gt;
    Live updates active
  &lt;/div&gt;
)}
</code></pre>
<hr>
<h2 id="known-issues-fixed"><a class="header" href="#known-issues-fixed">Known Issues Fixed</a></h2>
<h3 id="react-hooks-violation"><a class="header" href="#react-hooks-violation">React Hooks Violation</a></h3>
<p><strong>Problem</strong>: <code>useState</code> was called inside render functions (<code>renderOpportunitiesView</code>, <code>renderThreatsView</code>) which violates Reactâ€™s rules of hooks.</p>
<p><strong>Solution</strong>: Moved state to component top level:</p>
<pre><code class="language-typescript">// Before (broken)
const renderOpportunitiesView = () =&gt; {
  const [filter, setFilter] = useState('all'); // WRONG: hook inside conditional
  // ...
};

// After (fixed)
const ArbFarmDashboard = () =&gt; {
  const [opportunitiesFilter, setOpportunitiesFilter] = useState('all'); // Correct
  const [threatTokenInput, setThreatTokenInput] = useState('');
  const [threatCheckResult, setThreatCheckResult] = useState(null);
  const [threatChecking, setThreatChecking] = useState(false);

  const renderOpportunitiesView = () =&gt; {
    // Use top-level state
  };
};
</code></pre>
<hr>
<h2 id="environment-variables-1"><a class="header" href="#environment-variables-1">Environment Variables</a></h2>
<pre><code class="language-bash"># .env
VITE_API_BASE_URL=http://localhost:3000  # Erebus router
</code></pre>
<p>Note: All ArbFarm API calls go through Erebus (port 3000), not directly to the service (port 9007).</p>
<hr>
<h2 id="development"><a class="header" href="#development">Development</a></h2>
<pre><code class="language-bash"># Start frontend
cd svc/hecate
npm run dev

# Build
npm run build

# Lint
npm run lint:format
</code></pre>
<hr>
<h2 id="related-documentation-1"><a class="header" href="#related-documentation-1">Related Documentation</a></h2>
<ul>
<li><a href="#arbfarm-service-architecture">ArbFarm Service</a> - Backend service architecture</li>
<li><a href="#arbfarm-api-reference">API Reference</a> - REST API endpoints</li>
<li><a href="#arbfarm-event-bus">Event Bus</a> - SSE event topics</li>
<li><a href="#arbfarm-solana-mev-agent-swarm">Implementation Plan</a> - Full roadmap</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="researchdd-module"><a class="header" href="#researchdd-module">Research/DD Module</a></h1>
<p>The Research module enables intelligent strategy discovery through URL ingestion, LLM-powered strategy extraction, backtesting, and social media monitoring.</p>
<h2 id="overview-8"><a class="header" href="#overview-8">Overview</a></h2>
<pre><code>URL/Content Input â†’ Analysis â†’ Strategy Extraction â†’ Backtest â†’ Approval
        â”‚                              â”‚
        â–¼                              â–¼
   Store as Intel              Store as Engram
</code></pre>
<h2 id="components"><a class="header" href="#components">Components</a></h2>
<h3 id="url-ingester-url_ingestrs"><a class="header" href="#url-ingester-url_ingestrs">URL Ingester (<code>url_ingest.rs</code>)</a></h3>
<p>Fetches and analyzes web content, extracting trading-relevant information.</p>
<p><strong>Content Types Detected:</strong></p>
<ul>
<li><code>Tweet</code> - Single X/Twitter post</li>
<li><code>Thread</code> - Multi-tweet thread</li>
<li><code>Article</code> - Blog post or news article</li>
<li><code>Documentation</code> - Technical docs</li>
<li><code>Forum</code> - Reddit, Discord discussions</li>
<li><code>Unknown</code> - Unclassified content</li>
</ul>
<p><strong>Extraction Features:</strong></p>
<ul>
<li><strong>Token mentions</strong>: <code>$BONK</code>, <code>$SOL</code>, <code>$PEPE</code> patterns</li>
<li><strong>Solana addresses</strong>: Base58 addresses (32-44 chars)</li>
<li><strong>Numbers with context</strong>: Percentages, prices, multipliers</li>
</ul>
<p><strong>Usage:</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use arb_farm::research::UrlIngester;

let ingester = UrlIngester::new(reqwest_client);
let result = ingester.ingest("https://twitter.com/trader/status/123").await?;

println!("Content type: {:?}", result.content_type);
println!("Tokens: {:?}", result.tokens_mentioned);
println!("Numbers: {:?}", result.numbers_extracted);
<span class="boring">}</span></code></pre>
<p><strong>API:</strong></p>
<pre><code class="language-bash">POST /research/ingest
Content-Type: application/json

{
  "url": "https://twitter.com/trader/status/123456789",
  "context": "Potential alpha from known profitable trader"
}
</code></pre>
<h3 id="strategy-extractor-strategy_extractrs"><a class="header" href="#strategy-extractor-strategy_extractrs">Strategy Extractor (<code>strategy_extract.rs</code>)</a></h3>
<p>Uses LLMs (via OpenRouter) to extract actionable trading strategies from content.</p>
<p><strong>Strategy Types:</strong></p>
<ul>
<li><code>DexArbitrage</code> - Price differences across DEXs</li>
<li><code>BondingCurve</code> - pump.fun/moonshot graduation plays</li>
<li><code>Momentum</code> - Trend following</li>
<li><code>MeanReversion</code> - Buy dips, sell rallies</li>
<li><code>News</code> - Event-driven trading</li>
<li><code>Liquidation</code> - Lending protocol liquidations</li>
<li><code>JitLiquidity</code> - Just-in-time LP provision</li>
<li><code>CopyTrade</code> - Following whale wallets</li>
<li><code>Custom</code> - User-defined strategies</li>
</ul>
<p><strong>Condition Types:</strong></p>
<ul>
<li><code>PriceAbove</code> / <code>PriceBelow</code> - Price thresholds</li>
<li><code>PercentChange</code> - Percentage movement</li>
<li><code>VolumeSpike</code> - Unusual volume</li>
<li><code>TimeElapsed</code> - Duration triggers</li>
<li><code>GraduationProgress</code> - Bonding curve progress</li>
<li><code>HolderCount</code> - Number of holders</li>
<li><code>WhaleActivity</code> - Large wallet movements</li>
<li><code>Custom</code> - Custom conditions</li>
</ul>
<p><strong>Confidence Levels:</strong></p>
<ul>
<li><code>High</code> - Clear strategy with specific parameters</li>
<li><code>Medium</code> - Strategy identifiable but parameters vague</li>
<li><code>Low</code> - Possible strategy, needs verification</li>
</ul>
<p><strong>Usage:</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use arb_farm::research::StrategyExtractor;

let extractor = StrategyExtractor::new(openrouter_api_key);
let strategy = extractor.extract(&amp;ingest_result).await?;

println!("Type: {:?}", strategy.strategy_type);
println!("Confidence: {:?}", strategy.confidence);
println!("Entry conditions: {:?}", strategy.entry_conditions);
<span class="boring">}</span></code></pre>
<h3 id="backtest-engine-backtestrs"><a class="header" href="#backtest-engine-backtestrs">Backtest Engine (<code>backtest.rs</code>)</a></h3>
<p>Simulates strategy performance against historical data.</p>
<p><strong>Configuration:</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct BacktestConfig {
    pub initial_capital_sol: f64,      // Starting capital
    pub start_date: String,            // YYYY-MM-DD
    pub end_date: String,              // YYYY-MM-DD
    pub max_position_percent: f64,     // Max per-trade (0.1 = 10%)
    pub slippage_bps: u32,             // Simulated slippage
    pub fee_bps: u32,                  // Trading fees
}
<span class="boring">}</span></code></pre>
<p><strong>Metrics Calculated:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Metric</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>win_rate</code></td><td>Profitable trades / Total trades</td></tr>
<tr><td><code>total_return_percent</code></td><td>(Final - Initial) / Initial * 100</td></tr>
<tr><td><code>max_drawdown_percent</code></td><td>Largest peak-to-trough decline</td></tr>
<tr><td><code>sharpe_ratio</code></td><td>Risk-adjusted returns (volatility)</td></tr>
<tr><td><code>sortino_ratio</code></td><td>Risk-adjusted returns (downside only)</td></tr>
<tr><td><code>calmar_ratio</code></td><td>Annual return / Max drawdown</td></tr>
</tbody>
</table>
</div>
<p><strong>Usage:</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use arb_farm::research::{BacktestEngine, BacktestConfig};

let engine = BacktestEngine::new();
let config = BacktestConfig {
    initial_capital_sol: 10.0,
    start_date: "2024-01-01".to_string(),
    end_date: "2024-01-31".to_string(),
    max_position_percent: 0.1,
    slippage_bps: 50,
    fee_bps: 30,
};

let result = engine.run_backtest(&amp;strategy, &amp;config).await?;

println!("Win rate: {:.1}%", result.summary.win_rate * 100.0);
println!("Sharpe: {:.2}", result.metrics.sharpe_ratio);
<span class="boring">}</span></code></pre>
<p><strong>API:</strong></p>
<pre><code class="language-bash">POST /research/backtest
Content-Type: application/json

{
  "strategy_id": "uuid",
  "start_date": "2024-01-01",
  "end_date": "2024-01-31",
  "initial_capital_sol": 10.0
}
</code></pre>
<h3 id="social-monitor-social_monitorrs"><a class="header" href="#social-monitor-social_monitorrs">Social Monitor (<code>social_monitor.rs</code>)</a></h3>
<p>Tracks social media accounts for alpha signals and threat alerts.</p>
<p><strong>Source Types:</strong></p>
<ul>
<li><code>Twitter</code> - X/Twitter accounts</li>
<li><code>Telegram</code> - Telegram channels</li>
<li><code>Discord</code> - Discord servers</li>
<li><code>Rss</code> - RSS feeds</li>
</ul>
<p><strong>Track Types:</strong></p>
<ul>
<li><code>Alpha</code> - Trading signals, alpha calls</li>
<li><code>Threat</code> - Scam warnings, rug alerts</li>
<li><code>Both</code> - Monitor for both</li>
</ul>
<p><strong>Alert Types:</strong></p>
<ul>
<li><code>TradingAlpha</code> - Actionable trade signal</li>
<li><code>NewToken</code> - New token launch</li>
<li><code>RugWarning</code> - Rug pull warning</li>
<li><code>ScamAlert</code> - Scam detection</li>
<li><code>WhaleMoved</code> - Large wallet activity</li>
<li><code>MarketCondition</code> - Market-wide alert</li>
</ul>
<p><strong>Default Alpha Sources:</strong></p>
<ul>
<li>@solaboratory</li>
<li>@DefiLlama</li>
<li>@Jupiter_Aggregator</li>
</ul>
<p><strong>Default Threat Sources:</strong></p>
<ul>
<li>@ZachXBT</li>
<li>@RugDocIO</li>
<li>@PeckShieldAlert</li>
</ul>
<p><strong>Usage:</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use arb_farm::research::{SocialMonitor, SourceType, TrackType};

let mut monitor = SocialMonitor::new();

// Add a source
monitor.add_source(
    SourceType::Twitter,
    "@CryptoTrader",
    "Crypto Trader",
    TrackType::Alpha,
);

// Get recent alerts
let alerts = monitor.get_recent_alerts(20);
<span class="boring">}</span></code></pre>
<p><strong>API:</strong></p>
<pre><code class="language-bash"># Add source
POST /research/sources
Content-Type: application/json

{
  "source_type": "twitter",
  "handle_or_url": "@ZachXBT",
  "track_type": "threat"
}

# List sources
GET /research/sources

# Get alerts
GET /research/alerts?limit=20
</code></pre>
<h2 id="workflow"><a class="header" href="#workflow">Workflow</a></h2>
<h3 id="1-url-ingestion-flow"><a class="header" href="#1-url-ingestion-flow">1. URL Ingestion Flow</a></h3>
<pre><code>User provides URL
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fetch Content    â”‚
â”‚ (reqwest + HTML) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Detect Type      â”‚
â”‚ (tweet/article)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Extract Tokens   â”‚
â”‚ Addresses        â”‚
â”‚ Numbers          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Return Result    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="2-strategy-discovery-flow"><a class="header" href="#2-strategy-discovery-flow">2. Strategy Discovery Flow</a></h3>
<pre><code>Ingestion Result
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LLM Analysis     â”‚
â”‚ (OpenRouter)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
 Found     Not Found
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  Store as
â”‚Backtestâ”‚  Intel
â”‚Strategyâ”‚  Engram
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Calculate Metricsâ”‚
â”‚ Sharpe, Sortino  â”‚
â”‚ Drawdown, etc.   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
Profitable  Unprofitable
    â”‚           â”‚
    â–¼           â–¼
Surface for  Archive
Approval
</code></pre>
<h3 id="3-social-monitor-flow"><a class="header" href="#3-social-monitor-flow">3. Social Monitor Flow</a></h3>
<pre><code>Check Sources (periodic)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fetch New Posts  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Analyze Content  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
  Alpha    Threat
    â”‚         â”‚
    â–¼         â–¼
Create    Create
Alert     Alert
    â”‚         â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Emit Event       â”‚
â”‚ arb.research.*   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 id="events-emitted"><a class="header" href="#events-emitted">Events Emitted</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Topic</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>arb.research.url.ingested</code></td><td>URL successfully analyzed</td></tr>
<tr><td><code>arb.research.strategy.discovered</code></td><td>New strategy extracted</td></tr>
<tr><td><code>arb.research.strategy.approved</code></td><td>Strategy approved by user</td></tr>
<tr><td><code>arb.research.strategy.rejected</code></td><td>Strategy rejected</td></tr>
<tr><td><code>arb.research.backtest.started</code></td><td>Backtest in progress</td></tr>
<tr><td><code>arb.research.backtest.completed</code></td><td>Backtest finished</td></tr>
<tr><td><code>arb.research.alert.created</code></td><td>New social alert</td></tr>
</tbody>
</table>
</div>
<h2 id="mcp-tools-2"><a class="header" href="#mcp-tools-2">MCP Tools</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>research_ingest_url</code></td><td>Analyze a URL</td></tr>
<tr><td><code>research_list_discoveries</code></td><td>List discovered strategies</td></tr>
<tr><td><code>research_approve_discovery</code></td><td>Approve a strategy</td></tr>
<tr><td><code>research_reject_discovery</code></td><td>Reject a strategy</td></tr>
<tr><td><code>research_backtest_strategy</code></td><td>Run backtest</td></tr>
<tr><td><code>research_list_sources</code></td><td>List monitored sources</td></tr>
<tr><td><code>research_alerts</code></td><td>Get recent alerts</td></tr>
<tr><td><code>research_stats</code></td><td>Monitor statistics</td></tr>
</tbody>
</table>
</div>
<h2 id="related-15"><a class="header" href="#related-15">Related</a></h2>
<ul>
<li><a href="#arbfarm-development-guide">Development Guide</a></li>
<li><a href="#arbfarm-api-reference">API Reference</a></li>
<li><a href="#arbfarm-event-bus">Event Bus</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="bonding-curves-module"><a class="header" href="#bonding-curves-module">Bonding Curves Module</a></h1>
<p>The Curves module handles bonding curve tokens from platforms like pump.fun and moonshot, enabling graduation tracking, cross-venue arbitrage, and holder analysis.</p>
<h2 id="overview-9"><a class="header" href="#overview-9">Overview</a></h2>
<p>Bonding curves are token launch mechanisms where price increases algorithmically as supply is bought. When enough SOL is deposited, the token â€œgraduatesâ€ to a DEX like Raydium.</p>
<pre><code>Token Creation â†’ Bonding Curve Trading â†’ Graduation â†’ DEX Trading
                        â”‚
                        â”œâ”€â”€ Track Progress
                        â”œâ”€â”€ Analyze Holders
                        â””â”€â”€ Detect Arb Opportunities
</code></pre>
<h2 id="supported-venues"><a class="header" href="#supported-venues">Supported Venues</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Venue</th><th>Description</th><th>API</th></tr>
</thead>
<tbody>
<tr><td><strong>pump.fun</strong></td><td>Original bonding curve platform</td><td>pumpportal.fun</td></tr>
<tr><td><strong>moonshot</strong></td><td>Alternative curve platform</td><td>moonshot.cc</td></tr>
</tbody>
</table>
</div>
<h2 id="key-concepts"><a class="header" href="#key-concepts">Key Concepts</a></h2>
<h3 id="graduation"><a class="header" href="#graduation">Graduation</a></h3>
<p>When a bonding curve accumulates enough SOL (typically ~$69k worth), it â€œgraduatesâ€:</p>
<ol>
<li>Liquidity moves to Raydium</li>
<li>Token becomes tradeable on DEXs</li>
<li>Price discovery shifts to open market</li>
</ol>
<h3 id="virtual-reserves"><a class="header" href="#virtual-reserves">Virtual Reserves</a></h3>
<p>Bonding curves use virtual reserves to calculate price:</p>
<ul>
<li><code>virtual_sol_reserves</code> - SOL in the curve</li>
<li><code>virtual_token_reserves</code> - Tokens remaining</li>
<li>Price = <code>sol_reserves / token_reserves</code></li>
</ul>
<h3 id="graduation-progress"><a class="header" href="#graduation-progress">Graduation Progress</a></h3>
<pre><code>progress_percent = (current_sol / graduation_threshold) * 100
</code></pre>
<h2 id="api-endpoints-7"><a class="header" href="#api-endpoints-7">API Endpoints</a></h2>
<h3 id="list-tracked-tokens"><a class="header" href="#list-tracked-tokens">List Tracked Tokens</a></h3>
<pre><code class="language-bash">GET /curves/tokens
</code></pre>
<p>Returns all tokens being tracked across bonding curve venues.</p>
<h3 id="venue-health"><a class="header" href="#venue-health">Venue Health</a></h3>
<pre><code class="language-bash">GET /curves/health
</code></pre>
<p>Returns connectivity status for each venue API.</p>
<h3 id="graduation-candidates"><a class="header" href="#graduation-candidates">Graduation Candidates</a></h3>
<pre><code class="language-bash">GET /curves/graduation-candidates
</code></pre>
<p>Returns tokens near graduation threshold (e.g., &gt;70% progress).</p>
<h3 id="cross-venue-arbitrage"><a class="header" href="#cross-venue-arbitrage">Cross-Venue Arbitrage</a></h3>
<pre><code class="language-bash">GET /curves/cross-venue-arb
</code></pre>
<p>Detects price differences between venues for the same token.</p>
<h3 id="token-specific-endpoints"><a class="header" href="#token-specific-endpoints">Token-Specific Endpoints</a></h3>
<pre><code class="language-bash"># Graduation progress
GET /curves/:mint/progress

# Holder statistics
GET /curves/:mint/holders

# Buy/sell quote
POST /curves/:mint/quote
Content-Type: application/json
{"amount_sol": 0.5, "is_buy": true}

# Curve parameters
GET /curves/:mint/parameters
</code></pre>
<h2 id="response-formats"><a class="header" href="#response-formats">Response Formats</a></h2>
<h3 id="graduation-progress-1"><a class="header" href="#graduation-progress-1">Graduation Progress</a></h3>
<pre><code class="language-json">{
  "token_mint": "ABC123...",
  "token_name": "MoonCoin",
  "token_symbol": "MOON",
  "progress_percent": 72.5,
  "bonding_curve_address": "DEF456...",
  "current_supply": 800000000,
  "virtual_sol_reserves": 30.5,
  "virtual_token_reserves": 200000000,
  "graduation_threshold_sol": 85.0,
  "estimated_graduation_at": "2024-01-15T14:00:00Z",
  "venue": "pump_fun"
}
</code></pre>
<h3 id="holder-stats"><a class="header" href="#holder-stats">Holder Stats</a></h3>
<pre><code class="language-json">{
  "token_mint": "ABC123...",
  "total_holders": 234,
  "top_10_concentration": 0.45,
  "creator_holdings_percent": 0.05,
  "holders": [
    {
      "address": "7Vk3...",
      "balance": 50000000,
      "percent": 0.125,
      "is_creator": false
    }
  ]
}
</code></pre>
<h3 id="curve-parameters"><a class="header" href="#curve-parameters">Curve Parameters</a></h3>
<pre><code class="language-json">{
  "token_mint": "ABC123...",
  "bonding_curve_address": "DEF456...",
  "fee_bps": 100,
  "graduation_threshold_sol": 85.0,
  "initial_virtual_sol": 30.0,
  "initial_virtual_tokens": 1000000000,
  "current_price_sol": 0.000015,
  "market_cap_sol": 12.5
}
</code></pre>
<h2 id="trading-strategies"><a class="header" href="#trading-strategies">Trading Strategies</a></h2>
<h3 id="pre-graduation-entry"><a class="header" href="#pre-graduation-entry">Pre-Graduation Entry</a></h3>
<p>Buy tokens early on the curve, sell after graduation when DEX liquidity is added.</p>
<p><strong>Entry Conditions:</strong></p>
<ul>
<li>Progress 20-40%</li>
<li>Low creator holdings (&lt;10%)</li>
<li>Growing holder count</li>
<li>No threat signals</li>
</ul>
<p><strong>Exit Conditions:</strong></p>
<ul>
<li>Progress &gt;90% (pre-graduation)</li>
<li>Or post-graduation on DEX</li>
</ul>
<h3 id="graduation-arb"><a class="header" href="#graduation-arb">Graduation Arb</a></h3>
<p>Exploit price differences between curve and DEX immediately after graduation.</p>
<p><strong>Detection:</strong></p>
<ul>
<li>Monitor tokens at &gt;95% progress</li>
<li>Watch for graduation event</li>
<li>Compare curve price vs Raydium price</li>
</ul>
<h3 id="cross-venue-arb"><a class="header" href="#cross-venue-arb">Cross-Venue Arb</a></h3>
<p>Same token on multiple curves (pump.fun vs moonshot).</p>
<p><strong>Detection:</strong></p>
<ul>
<li>Track same token across venues</li>
<li>Alert when price diff &gt; threshold</li>
<li>Account for fees on both sides</li>
</ul>
<h2 id="holder-analysis"><a class="header" href="#holder-analysis">Holder Analysis</a></h2>
<h3 id="concentration-risk"><a class="header" href="#concentration-risk">Concentration Risk</a></h3>
<p>High concentration indicates whale manipulation risk:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Concentration</th><th>Risk Level</th></tr>
</thead>
<tbody>
<tr><td>Top 10 &lt; 30%</td><td>Low</td></tr>
<tr><td>Top 10 30-50%</td><td>Medium</td></tr>
<tr><td>Top 10 &gt; 50%</td><td>High</td></tr>
</tbody>
</table>
</div>
<h3 id="creator-holdings"><a class="header" href="#creator-holdings">Creator Holdings</a></h3>
<p>Creator selling is a rug indicator:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Creator %</th><th>Risk Level</th></tr>
</thead>
<tbody>
<tr><td>&lt; 5%</td><td>Low</td></tr>
<tr><td>5-20%</td><td>Medium</td></tr>
<tr><td>&gt; 20%</td><td>High</td></tr>
</tbody>
</table>
</div>
<h2 id="events-emitted-1"><a class="header" href="#events-emitted-1">Events Emitted</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Topic</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>arb.curve.token.detected</code></td><td>New token discovered</td></tr>
<tr><td><code>arb.curve.progress.updated</code></td><td>Progress changed significantly</td></tr>
<tr><td><code>arb.curve.graduation.imminent</code></td><td>Token &gt;90% progress</td></tr>
<tr><td><code>arb.curve.graduated</code></td><td>Token graduated to DEX</td></tr>
<tr><td><code>arb.curve.arb.detected</code></td><td>Arbitrage opportunity found</td></tr>
</tbody>
</table>
</div>
<h2 id="mcp-tools-3"><a class="header" href="#mcp-tools-3">MCP Tools</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>curve_tokens</code></td><td>List tracked curve tokens</td></tr>
<tr><td><code>curve_progress</code></td><td>Get graduation progress</td></tr>
<tr><td><code>curve_holders</code></td><td>Get holder statistics</td></tr>
<tr><td><code>curve_quote</code></td><td>Get buy/sell quote</td></tr>
<tr><td><code>curve_graduation_candidates</code></td><td>Find near-graduation tokens</td></tr>
<tr><td><code>curve_cross_venue_arb</code></td><td>Detect cross-venue opportunities</td></tr>
</tbody>
</table>
</div>
<h2 id="threat-integration"><a class="header" href="#threat-integration">Threat Integration</a></h2>
<p>Bonding curves are high-risk for rugs. The threat module monitors:</p>
<ul>
<li>Creator wallet activity (large sells)</li>
<li>Holder concentration spikes</li>
<li>Social media warnings</li>
<li>Contract analysis (mint authority, etc.)</li>
</ul>
<p>See <a href="#threat-detection-system">Threat Detection</a> for details.</p>
<h2 id="example-finding-graduation-plays"><a class="header" href="#example-finding-graduation-plays">Example: Finding Graduation Plays</a></h2>
<pre><code class="language-bash"># 1. Find candidates near graduation
curl http://localhost:9007/curves/graduation-candidates

# 2. Check holder concentration
curl http://localhost:9007/curves/ABC123.../holders

# 3. If safe, get a quote
curl -X POST http://localhost:9007/curves/ABC123.../quote \
  -H "Content-Type: application/json" \
  -d '{"amount_sol": 0.5, "is_buy": true}'
</code></pre>
<h2 id="related-16"><a class="header" href="#related-16">Related</a></h2>
<ul>
<li><a href="#arbfarm-api-reference">API Reference</a></li>
<li><a href="#arbfarm-development-guide">Development Guide</a></li>
<li><a href="#arbfarm-event-bus">Event Bus</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="kol-tracking--copy-trading-1"><a class="header" href="#kol-tracking--copy-trading-1">KOL Tracking + Copy Trading</a></h1>
<p>The KOL (Key Opinion Leader) module enables tracking of whale wallets and influential traders, with optional automated copy trading.</p>
<h2 id="overview-10"><a class="header" href="#overview-10">Overview</a></h2>
<pre><code>Wallet/Handle â†’ Track Trades â†’ Calculate Trust â†’ Optional Copy Trading
                     â”‚                â”‚
                     â–¼                â–¼
               Store Trades     Auto-Disable
               Update Stats    if Trust Falls
</code></pre>
<h2 id="key-concepts-1"><a class="header" href="#key-concepts-1">Key Concepts</a></h2>
<h3 id="kol-entity-types"><a class="header" href="#kol-entity-types">KOL Entity Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th><th>Tracking Method</th></tr>
</thead>
<tbody>
<tr><td><strong>Wallet</strong></td><td>Solana wallet address</td><td>Helius webhooks</td></tr>
<tr><td><strong>TwitterHandle</strong></td><td>X/Twitter account</td><td>Social monitoring</td></tr>
</tbody>
</table>
</div>
<h3 id="trust-score"><a class="header" href="#trust-score">Trust Score</a></h3>
<p>Trust scores (0-100) are calculated from trading performance:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Factor</th><th>Weight</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Win Rate</td><td>30%</td><td>Profitable trades / Total trades</td></tr>
<tr><td>Trade Count</td><td>10%</td><td>Experience (max at 100 trades)</td></tr>
<tr><td>Avg Profit</td><td>10%</td><td>Average profit per trade</td></tr>
<tr><td>Drawdown</td><td>-20%</td><td>Penalty for max drawdown</td></tr>
<tr><td>Base</td><td>50</td><td>Starting score</td></tr>
</tbody>
</table>
</div>
<p><strong>Formula:</strong></p>
<pre><code>score = 50 + (win_rate Ã— 30) + (min(trades, 100)/100 Ã— 10)
        + (min(avg_profit, 50)/50 Ã— 10) - (max_drawdown/100 Ã— 20)
</code></pre>
<h3 id="copy-trade-config"><a class="header" href="#copy-trade-config">Copy Trade Config</a></h3>
<p>When copy trading is enabled, these parameters control behavior:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Parameter</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>max_position_sol</code></td><td>0.5</td><td>Maximum SOL per copied trade</td></tr>
<tr><td><code>delay_ms</code></td><td>500</td><td>Wait before copying (avoid frontrun)</td></tr>
<tr><td><code>min_trust_score</code></td><td>60</td><td>Auto-disable below this threshold</td></tr>
<tr><td><code>copy_percentage</code></td><td>10%</td><td>Percentage of KOLâ€™s position to copy</td></tr>
<tr><td><code>token_whitelist</code></td><td>None</td><td>Only copy these tokens</td></tr>
<tr><td><code>token_blacklist</code></td><td>None</td><td>Never copy these tokens</td></tr>
</tbody>
</table>
</div>
<h2 id="api-endpoints-8"><a class="header" href="#api-endpoints-8">API Endpoints</a></h2>
<h3 id="kol-management"><a class="header" href="#kol-management">KOL Management</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/kol</code></td><td>List tracked KOLs</td></tr>
<tr><td>POST</td><td><code>/kol</code></td><td>Add KOL to track</td></tr>
<tr><td>GET</td><td><code>/kol/:id</code></td><td>Get KOL details</td></tr>
<tr><td>PUT</td><td><code>/kol/:id</code></td><td>Update KOL settings</td></tr>
<tr><td>DELETE</td><td><code>/kol/:id</code></td><td>Stop tracking</td></tr>
</tbody>
</table>
</div>
<h3 id="kol-data"><a class="header" href="#kol-data">KOL Data</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>GET</td><td><code>/kol/:id/trades</code></td><td>KOLâ€™s trade history</td></tr>
<tr><td>GET</td><td><code>/kol/:id/stats</code></td><td>Performance statistics</td></tr>
<tr><td>GET</td><td><code>/kol/:id/trust</code></td><td>Trust score breakdown</td></tr>
</tbody>
</table>
</div>
<h3 id="copy-trading"><a class="header" href="#copy-trading">Copy Trading</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Path</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>POST</td><td><code>/kol/:id/copy/enable</code></td><td>Enable copy trading</td></tr>
<tr><td>POST</td><td><code>/kol/:id/copy/disable</code></td><td>Disable copy trading</td></tr>
<tr><td>GET</td><td><code>/kol/:id/copy/history</code></td><td>Copy trade history</td></tr>
<tr><td>GET</td><td><code>/kol/copies/active</code></td><td>All active copy positions</td></tr>
<tr><td>GET</td><td><code>/kol/copies/stats</code></td><td>Global copy trading stats</td></tr>
</tbody>
</table>
</div>
<h2 id="usage-examples"><a class="header" href="#usage-examples">Usage Examples</a></h2>
<h3 id="add-a-kol-by-wallet"><a class="header" href="#add-a-kol-by-wallet">Add a KOL by Wallet</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:9007/kol \
  -H "Content-Type: application/json" \
  -d '{
    "wallet_address": "7Vk3...8xNp",
    "display_name": "Whale Watcher"
  }'
</code></pre>
<h3 id="add-a-kol-by-twitter-handle"><a class="header" href="#add-a-kol-by-twitter-handle">Add a KOL by Twitter Handle</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:9007/kol \
  -H "Content-Type: application/json" \
  -d '{
    "twitter_handle": "@CryptoWhale",
    "display_name": "Crypto Whale"
  }'
</code></pre>
<h3 id="enable-copy-trading"><a class="header" href="#enable-copy-trading">Enable Copy Trading</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:9007/kol/{id}/copy/enable \
  -H "Content-Type: application/json" \
  -d '{
    "max_position_sol": 0.5,
    "delay_ms": 1000,
    "min_trust_score": 65,
    "copy_percentage": 0.1
  }'
</code></pre>
<h3 id="get-trust-score-breakdown"><a class="header" href="#get-trust-score-breakdown">Get Trust Score Breakdown</a></h3>
<pre><code class="language-bash">curl http://localhost:9007/kol/{id}/trust
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "base_score": 50.0,
  "win_rate_factor": 23.4,
  "trade_count_factor": 7.5,
  "avg_profit_factor": 6.2,
  "drawdown_penalty": 4.5,
  "final_score": 82.6
}
</code></pre>
<h3 id="list-kols-with-copy-trading-enabled"><a class="header" href="#list-kols-with-copy-trading-enabled">List KOLs with Copy Trading Enabled</a></h3>
<pre><code class="language-bash">curl "http://localhost:9007/kol?copy_enabled=true&amp;min_trust_score=60"
</code></pre>
<h3 id="get-copy-trading-statistics"><a class="header" href="#get-copy-trading-statistics">Get Copy Trading Statistics</a></h3>
<pre><code class="language-bash">curl http://localhost:9007/kol/copies/stats
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "total_copies": 145,
  "executed": 130,
  "failed": 10,
  "skipped": 5,
  "total_profit_lamports": 2500000000,
  "avg_delay_ms": 523.5
}
</code></pre>
<h2 id="copy-trade-flow"><a class="header" href="#copy-trade-flow">Copy Trade Flow</a></h2>
<pre><code>KOL Trade Detected (Helius Webhook)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parse Trade Data â”‚
â”‚ - Token mint     â”‚
â”‚ - Amount         â”‚
â”‚ - Trade type     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Config     â”‚
â”‚ - Copy enabled?  â”‚
â”‚ - Trust &gt;= min?  â”‚
â”‚ - Within limits? â”‚
â”‚ - Token allowed? â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
   Pass     Fail
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” Mark as
â”‚ Delay  â”‚ Skipped
â”‚ (conf) â”‚ + reason
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Execute Trade  â”‚
â”‚ (scaled amount)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   â”‚         â”‚
Success    Fail
   â”‚         â”‚
   â–¼         â–¼
Record     Record
P&amp;L        Error
</code></pre>
<h2 id="copy-trade-status"><a class="header" href="#copy-trade-status">Copy Trade Status</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Status</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>pending</code></td><td>Detected, waiting to execute</td></tr>
<tr><td><code>executing</code></td><td>Trade in progress</td></tr>
<tr><td><code>executed</code></td><td>Successfully copied</td></tr>
<tr><td><code>failed</code></td><td>Copy attempt failed</td></tr>
<tr><td><code>skipped</code></td><td>Skipped (trust, limits, blacklist)</td></tr>
</tbody>
</table>
</div>
<h2 id="events-emitted-2"><a class="header" href="#events-emitted-2">Events Emitted</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Topic</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>arb.kol.added</code></td><td>New KOL tracked</td></tr>
<tr><td><code>arb.kol.removed</code></td><td>KOL removed</td></tr>
<tr><td><code>arb.kol.trade.detected</code></td><td>KOL made a trade</td></tr>
<tr><td><code>arb.kol.trade.copied</code></td><td>We copied the trade</td></tr>
<tr><td><code>arb.kol.trade.skipped</code></td><td>Trade skipped</td></tr>
<tr><td><code>arb.kol.trust.updated</code></td><td>Trust score changed</td></tr>
<tr><td><code>arb.kol.copy.enabled</code></td><td>Copy trading enabled</td></tr>
<tr><td><code>arb.kol.copy.disabled</code></td><td>Copy trading disabled</td></tr>
<tr><td><code>arb.kol.copy.auto_disabled</code></td><td>Auto-disabled (low trust)</td></tr>
</tbody>
</table>
</div>
<h2 id="mcp-tools-4"><a class="header" href="#mcp-tools-4">MCP Tools</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>kol_track</code></td><td>Start tracking a KOL</td></tr>
<tr><td><code>kol_list</code></td><td>List tracked KOLs</td></tr>
<tr><td><code>kol_stats</code></td><td>Get KOL performance stats</td></tr>
<tr><td><code>kol_trades</code></td><td>Get KOL trade history</td></tr>
<tr><td><code>kol_trust_breakdown</code></td><td>Get trust score details</td></tr>
<tr><td><code>copy_enable</code></td><td>Enable copy trading</td></tr>
<tr><td><code>copy_disable</code></td><td>Disable copy trading</td></tr>
<tr><td><code>copy_active</code></td><td>List active copy positions</td></tr>
<tr><td><code>copy_stats</code></td><td>Get copy trading stats</td></tr>
<tr><td><code>copy_history</code></td><td>Get copy trade history</td></tr>
</tbody>
</table>
</div>
<h2 id="risk-management"><a class="header" href="#risk-management">Risk Management</a></h2>
<h3 id="auto-disable"><a class="header" href="#auto-disable">Auto-Disable</a></h3>
<p>Copy trading automatically disables when:</p>
<ul>
<li>Trust score drops below <code>min_trust_score</code></li>
<li>KOL has consecutive losses</li>
<li>KOL is flagged by threat detection</li>
</ul>
<h3 id="safety-features"><a class="header" href="#safety-features">Safety Features</a></h3>
<ul>
<li><strong>Delay</strong>: Configurable delay before copying</li>
<li><strong>Max Position</strong>: Hard limit on position size</li>
<li><strong>Token Filters</strong>: Whitelist/blacklist tokens</li>
<li><strong>Trust Threshold</strong>: Minimum trust requirement</li>
</ul>
<h2 id="related-17"><a class="header" href="#related-17">Related</a></h2>
<ul>
<li><a href="#arbfarm-service-architecture">Service Architecture</a></li>
<li><a href="#arbfarm-api-reference">API Reference</a></li>
<li><a href="#researchdd-module">Research Module</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="threat-detection-system"><a class="header" href="#threat-detection-system">Threat Detection System</a></h1>
<p>Phase 8 of ArbFarm implements a comprehensive threat detection system to identify and block rug pulls, honeypots, scam wallets, and other malicious activity.</p>
<h2 id="architecture-1"><a class="header" href="#architecture-1">Architecture</a></h2>
<pre><code>                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   ThreatDetector    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ RugCheck â”‚         â”‚  GoPlus   â”‚        â”‚ Birdeye â”‚
   â”‚  Client  â”‚         â”‚  Client   â”‚        â”‚ Client  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ThreatScore    â”‚
                    â”‚  Calculation    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 id="external-apis"><a class="header" href="#external-apis">External APIs</a></h2>
<h3 id="rugcheck-api"><a class="header" href="#rugcheck-api">RugCheck API</a></h3>
<ul>
<li>Contract audit and risk analysis</li>
<li>Checks mint authority, freeze authority, LP status</li>
<li>Top holder concentration analysis</li>
<li>Insider wallet detection</li>
</ul>
<h3 id="goplus-security-api"><a class="header" href="#goplus-security-api">GoPlus Security API</a></h3>
<ul>
<li>Honeypot detection (buy works, sell reverts)</li>
<li>Blacklist function detection</li>
<li>Tax analysis (buy/sell taxes)</li>
<li>Creator wallet tracking</li>
<li>Proxy contract detection</li>
</ul>
<h3 id="birdeye-api"><a class="header" href="#birdeye-api">Birdeye API</a></h3>
<ul>
<li>Holder concentration analysis</li>
<li>Wash trading detection</li>
<li>Trade pattern analysis</li>
<li>Volume verification</li>
</ul>
<h2 id="threat-categories"><a class="header" href="#threat-categories">Threat Categories</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Category</th><th>Indicators</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>rug_pull</code></td><td>Creator sells &gt;50%, LP removal</td><td>Auto-block</td></tr>
<tr><td><code>honeypot</code></td><td>Sell reverts, high sell tax</td><td>Auto-block</td></tr>
<tr><td><code>scam_wallet</code></td><td>History of rugs, linked to scams</td><td>Flag for review</td></tr>
<tr><td><code>wash_trader</code></td><td>Circular trading patterns</td><td>Discount volume</td></tr>
<tr><td><code>fake_token</code></td><td>Impersonating known token</td><td>Auto-block</td></tr>
<tr><td><code>blacklist_function</code></td><td>Can blacklist addresses</td><td>High risk flag</td></tr>
<tr><td><code>bundle_manipulation</code></td><td>Suspicious Jito bundles</td><td>Alert</td></tr>
</tbody>
</table>
</div>
<h2 id="threat-factors"><a class="header" href="#threat-factors">Threat Factors</a></h2>
<p>The <code>ThreatFactors</code> struct captures all risk indicators:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ThreatFactors {
    // Contract Analysis
    pub has_mint_authority: bool,      // Can mint infinite tokens
    pub has_freeze_authority: bool,    // Can freeze wallets
    pub has_blacklist: bool,           // Can block addresses
    pub is_proxy: bool,                // Upgradeable proxy

    // Holder Analysis
    pub top_10_concentration: f64,     // % held by top 10
    pub creator_holdings_percent: f64, // % held by deployer

    // Trading Patterns
    pub wash_trade_likelihood: f64,    // Fake volume detection

    // External Signals
    pub rugcheck_score: Option&lt;f64&gt;,   // 0-1, external audit
    pub goplus_honeypot: Option&lt;bool&gt;, // External honeypot check
    pub goplus_is_blacklisted: Option&lt;bool&gt;,
}
<span class="boring">}</span></code></pre>
<h2 id="score-calculation"><a class="header" href="#score-calculation">Score Calculation</a></h2>
<p>Threat scores range from 0 (safe) to 1 (dangerous):</p>
<pre><code>Score = weighted_sum(factors)

Weights:
- Honeypot detected:       +0.3
- Mint authority:          +0.15
- Freeze authority:        +0.1
- High concentration:      +0.1-0.2
- Creator &gt;20%:            +0.1
- Wash trading:            +factor_value
- RugCheck score:          +factor_value * 0.15
</code></pre>
<h3 id="risk-levels"><a class="header" href="#risk-levels">Risk Levels</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Score Range</th><th>Risk Level</th><th>Recommendation</th></tr>
</thead>
<tbody>
<tr><td>0.0 - 0.3</td><td>Low</td><td>Safe to trade</td></tr>
<tr><td>0.3 - 0.5</td><td>Medium</td><td>Monitor closely</td></tr>
<tr><td>0.5 - 0.7</td><td>High</td><td>Caution advised</td></tr>
<tr><td>0.7 - 1.0</td><td>Critical</td><td>Avoid - likely scam</td></tr>
</tbody>
</table>
</div>
<h2 id="api-endpoints-9"><a class="header" href="#api-endpoints-9">API Endpoints</a></h2>
<h3 id="token-analysis"><a class="header" href="#token-analysis">Token Analysis</a></h3>
<pre><code class="language-http">GET /threat/check/:mint
</code></pre>
<p>Run full threat analysis on a token. Returns <code>ThreatScore</code> with all factors.</p>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "success": true,
  "score": {
    "token_mint": "TokenMintAddress...",
    "overall_score": 0.65,
    "factors": {
      "has_mint_authority": true,
      "has_freeze_authority": false,
      "top_10_concentration": 0.78,
      "rugcheck_score": 0.45,
      "goplus_honeypot": false
    },
    "risk_level": "high",
    "recommendation": "CAUTION - Significant risk factors detected",
    "external_data": { ... }
  }
}
</code></pre>
<h3 id="wallet-analysis"><a class="header" href="#wallet-analysis">Wallet Analysis</a></h3>
<pre><code class="language-http">GET /threat/wallet/:address
</code></pre>
<p>Check wallet for scam history and associations.</p>
<h3 id="blocklist-management"><a class="header" href="#blocklist-management">Blocklist Management</a></h3>
<pre><code class="language-http">GET /threat/blocked                # List blocked entities
POST /threat/report                # Report and block a threat
DELETE /threat/blocked/:address    # Unblock an address
GET /threat/blocked/:address/status # Check if blocked
</code></pre>
<h3 id="whitelist-management"><a class="header" href="#whitelist-management">Whitelist Management</a></h3>
<pre><code class="language-http">GET /threat/whitelist              # List whitelisted entities
POST /threat/whitelist             # Add to whitelist
DELETE /threat/whitelist/:address  # Remove from whitelist
GET /threat/whitelist/:address/status # Check if whitelisted
</code></pre>
<h3 id="wallet-watching"><a class="header" href="#wallet-watching">Wallet Watching</a></h3>
<pre><code class="language-http">GET /threat/watch                  # List watched wallets
POST /threat/watch                 # Add wallet to watch list
</code></pre>
<p>Watch creator wallets for suspicious activity:</p>
<pre><code class="language-json">{
  "wallet_address": "CreatorWallet...",
  "related_token_mint": "TokenMint...",
  "watch_reason": "Token creator - monitoring for dumps",
  "alert_on_sell": true,
  "alert_threshold_sol": 10.0
}
</code></pre>
<h3 id="alerts"><a class="header" href="#alerts">Alerts</a></h3>
<pre><code class="language-http">GET /threat/alerts?severity=high&amp;limit=50
</code></pre>
<p>Alert types:</p>
<ul>
<li><code>rug_detected</code> - Creator sold significant holdings</li>
<li><code>honeypot_detected</code> - Sell function restricted</li>
<li><code>large_sell</code> - Major holder dumping</li>
<li><code>creator_dumping</code> - Creator reducing position</li>
<li><code>concentration_spike</code> - Unusual accumulation</li>
<li><code>wash_trading_detected</code> - Fake volume patterns</li>
</ul>
<h3 id="statistics"><a class="header" href="#statistics">Statistics</a></h3>
<pre><code class="language-http">GET /threat/stats
</code></pre>
<p>Returns:</p>
<pre><code class="language-json">{
  "total_tokens_checked": 1234,
  "threats_detected": 89,
  "rugs_prevented": 23,
  "blocked_tokens": 45,
  "blocked_wallets": 67,
  "whitelisted_count": 12,
  "watched_wallets": 34,
  "alerts_last_24h": 15
}
</code></pre>
<h2 id="mcp-tools-5"><a class="header" href="#mcp-tools-5">MCP Tools</a></h2>
<h3 id="analysis-tools"><a class="header" href="#analysis-tools">Analysis Tools</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>threat_check_token</code></td><td>Full threat analysis on a token</td></tr>
<tr><td><code>threat_check_wallet</code></td><td>Analyze wallet for scam history</td></tr>
<tr><td><code>threat_score_history</code></td><td>Get historical threat scores</td></tr>
<tr><td><code>threat_stats</code></td><td>Get detection statistics</td></tr>
</tbody>
</table>
</div>
<h3 id="management-tools"><a class="header" href="#management-tools">Management Tools</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>threat_report</code></td><td>Report a threat and add to blocklist</td></tr>
<tr><td><code>threat_whitelist</code></td><td>Whitelist a trusted entity</td></tr>
<tr><td><code>threat_watch_wallet</code></td><td>Add wallet to monitoring</td></tr>
<tr><td><code>threat_list_blocked</code></td><td>List blocked entities</td></tr>
<tr><td><code>threat_alerts</code></td><td>Get recent threat alerts</td></tr>
<tr><td><code>threat_is_blocked</code></td><td>Check if address is blocked</td></tr>
<tr><td><code>threat_is_whitelisted</code></td><td>Check if address is whitelisted</td></tr>
</tbody>
</table>
</div>
<h2 id="usage-examples-1"><a class="header" href="#usage-examples-1">Usage Examples</a></h2>
<h3 id="check-token-before-trading"><a class="header" href="#check-token-before-trading">Check Token Before Trading</a></h3>
<pre><code class="language-bash"># Check if a token is safe to trade
curl http://localhost:9007/threat/check/TokenMintAddress

# Response with high risk score would indicate caution
</code></pre>
<h3 id="report-a-scam"><a class="header" href="#report-a-scam">Report a Scam</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:9007/threat/report \
  -H "Content-Type: application/json" \
  -d '{
    "entity_type": "token",
    "address": "ScamTokenMint...",
    "category": "rug_pull",
    "reason": "Creator dumped 80% of supply",
    "evidence_url": "https://solscan.io/tx/..."
  }'
</code></pre>
<h3 id="watch-a-creator-wallet"><a class="header" href="#watch-a-creator-wallet">Watch a Creator Wallet</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:9007/threat/watch \
  -H "Content-Type: application/json" \
  -d '{
    "wallet_address": "CreatorWallet...",
    "related_token_mint": "TokenMint...",
    "alert_on_sell": true,
    "alert_threshold_sol": 5.0
  }'
</code></pre>
<h2 id="integration-with-trading"><a class="header" href="#integration-with-trading">Integration with Trading</a></h2>
<p>The threat detection system integrates with the strategy engine:</p>
<ol>
<li><strong>Pre-Trade Check</strong>: Before executing any trade, check token threat score</li>
<li><strong>Auto-Block</strong>: Tokens with score &gt;= 0.7 are automatically blocked</li>
<li><strong>Alert Generation</strong>: Suspicious patterns generate real-time alerts</li>
<li><strong>Event Publishing</strong>: All threat events published to event bus (<code>arb.threat.*</code>)</li>
</ol>
<h3 id="event-topics-1"><a class="header" href="#event-topics-1">Event Topics</a></h3>
<ul>
<li><code>arb.threat.detected</code> - New threat identified</li>
<li><code>arb.threat.blocked</code> - Entity added to blocklist</li>
<li><code>arb.threat.alert</code> - Alert generated</li>
<li><code>arb.threat.whitelist.added</code> - Entity whitelisted</li>
</ul>
<h2 id="caching"><a class="header" href="#caching">Caching</a></h2>
<p>Threat scores are cached for 5 minutes to reduce API calls:</p>
<ul>
<li>Cache key: token mint address</li>
<li>TTL: 5 minutes</li>
<li>Force refresh available via <code>force_refresh=true</code> query param</li>
</ul>
<h2 id="files"><a class="header" href="#files">Files</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>File</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>src/models/threat.rs</code></td><td>Threat data models</td></tr>
<tr><td><code>src/threat/mod.rs</code></td><td>Main ThreatDetector</td></tr>
<tr><td><code>src/threat/external/rugcheck.rs</code></td><td>RugCheck API client</td></tr>
<tr><td><code>src/threat/external/goplus.rs</code></td><td>GoPlus API client</td></tr>
<tr><td><code>src/threat/external/birdeye.rs</code></td><td>Birdeye API client</td></tr>
<tr><td><code>src/handlers/threat.rs</code></td><td>HTTP handlers</td></tr>
<tr><td><code>src/mcp/tools.rs</code></td><td>MCP tools (get_threat_tools)</td></tr>
</tbody>
</table>
</div>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="engram-system"><a class="header" href="#engram-system">Engram System</a></h1>
<p>The Engram system provides pattern learning and memory capabilities for the ArbFarm MEV agent swarm. It enables agents to learn from successful trades, avoid known threats, and optimize strategies over time.</p>
<h2 id="overview-11"><a class="header" href="#overview-11">Overview</a></h2>
<p>Engrams are persistent, typed memory units that capture:</p>
<ul>
<li><strong>Edge Patterns</strong> - Successful trade signatures and routes</li>
<li><strong>Avoidance Rules</strong> - Entities to avoid (rug pulls, honeypots, scam wallets)</li>
<li><strong>Strategy Configurations</strong> - Optimized strategy parameters</li>
<li><strong>Threat Intelligence</strong> - Security-related findings</li>
<li><strong>Consensus Outcomes</strong> - Multi-LLM decision history</li>
<li><strong>Trade Results</strong> - Historical trade performance</li>
<li><strong>Market Conditions</strong> - Environmental context snapshots</li>
</ul>
<h2 id="architecture-2"><a class="header" href="#architecture-2">Architecture</a></h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Engram Harvester Agent                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Pattern   â”‚  â”‚  Avoidance  â”‚  â”‚    Consensus        â”‚ â”‚
â”‚  â”‚   Storage   â”‚  â”‚   Rules     â”‚  â”‚    Integration      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                â”‚                     â”‚            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                          â”‚                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                           â”‚
â”‚                    â”‚  Engram   â”‚                           â”‚
â”‚                    â”‚  Store    â”‚                           â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                          â”‚                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                           â”‚
â”‚                    â”‚  Event    â”‚                           â”‚
â”‚                    â”‚   Bus     â”‚                           â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 id="engram-types-1"><a class="header" href="#engram-types-1">Engram Types</a></h2>
<h3 id="edgepattern"><a class="header" href="#edgepattern">EdgePattern</a></h3>
<p>Captures successful trade patterns for future matching.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct EdgePatternContent {
    pub edge_type: String,        // "dex_arb", "curve_arb", etc.
    pub venue_type: String,       // "dex_amm", "bonding_curve"
    pub route_signature: String,  // "JUP-&gt;RAY-&gt;ORCA"
    pub success_rate: f64,        // 0.0-1.0
    pub avg_profit_bps: f64,      // Average profit in basis points
    pub sample_count: u32,        // Number of trades analyzed
    pub last_success_at: DateTime&lt;Utc&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="avoidance"><a class="header" href="#avoidance">Avoidance</a></h3>
<p>Marks entities that should be avoided.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct AvoidanceContent {
    pub entity_type: String,      // "token", "wallet", "contract"
    pub address: String,
    pub reason: String,
    pub category: String,         // "rug_pull", "honeypot", "scam"
    pub severity: AvoidanceSeverity,
    pub evidence_url: Option&lt;String&gt;,
    pub reported_at: DateTime&lt;Utc&gt;,
}

pub enum AvoidanceSeverity {
    Low,      // Proceed with caution
    Medium,   // Require manual approval
    High,     // Block by default
    Critical, // Never interact
}
<span class="boring">}</span></code></pre>
<h3 id="strategy"><a class="header" href="#strategy">Strategy</a></h3>
<p>Stores optimized strategy configurations.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct StrategyContent {
    pub strategy_type: String,
    pub venue_types: Vec&lt;String&gt;,
    pub risk_params: serde_json::Value,
    pub performance_metrics: PerformanceMetrics,
    pub optimized_at: DateTime&lt;Utc&gt;,
}
<span class="boring">}</span></code></pre>
<h2 id="api-endpoints-10"><a class="header" href="#api-endpoints-10">API Endpoints</a></h2>
<h3 id="create-engram"><a class="header" href="#create-engram">Create Engram</a></h3>
<pre><code class="language-bash">POST /engram
Content-Type: application/json

{
  "key": "arb.pattern.dex_spread.jup_ray",
  "engram_type": "edge_pattern",
  "content": {
    "edge_type": "dex_arb",
    "venue_type": "dex_amm",
    "route_signature": "JUP-&gt;RAY",
    "success_rate": 0.78,
    "avg_profit_bps": 35.5,
    "sample_count": 145
  },
  "confidence": 0.85,
  "tags": ["dex", "jupiter", "raydium"]
}
</code></pre>
<h3 id="search-engrams"><a class="header" href="#search-engrams">Search Engrams</a></h3>
<pre><code class="language-bash">GET /engram/search?engram_type=edge_pattern&amp;min_confidence=0.7&amp;limit=20
</code></pre>
<h3 id="check-avoidance"><a class="header" href="#check-avoidance">Check Avoidance</a></h3>
<pre><code class="language-bash">GET /engram/avoidance/token/TokenMintAddress
</code></pre>
<p>Response:</p>
<pre><code class="language-json">{
  "should_avoid": true,
  "reason": "Creator sold 80% of supply",
  "category": "rug_pull",
  "severity": "Critical"
}
</code></pre>
<h3 id="create-avoidance-engram"><a class="header" href="#create-avoidance-engram">Create Avoidance Engram</a></h3>
<pre><code class="language-bash">POST /engram/avoidance
Content-Type: application/json

{
  "entity_type": "token",
  "address": "BadTokenMint123",
  "reason": "Honeypot - sell function reverts",
  "category": "honeypot",
  "severity": "critical"
}
</code></pre>
<h3 id="find-matching-patterns"><a class="header" href="#find-matching-patterns">Find Matching Patterns</a></h3>
<pre><code class="language-bash">POST /engram/patterns
Content-Type: application/json

{
  "edge_type": "dex_arb",
  "venue_type": "dex_amm",
  "min_success_rate": 0.6
}
</code></pre>
<h3 id="get-harvester-stats"><a class="header" href="#get-harvester-stats">Get Harvester Stats</a></h3>
<pre><code class="language-bash">GET /engram/stats
</code></pre>
<p>Response:</p>
<pre><code class="language-json">{
  "total_engrams": 1542,
  "engrams_by_type": {
    "edge_pattern": 892,
    "avoidance": 423,
    "strategy": 127,
    "consensus_outcome": 100
  },
  "patterns_matched": 3456,
  "avoidances_created": 423,
  "last_harvest_at": "2024-01-15T10:30:00Z"
}
</code></pre>
<h2 id="mcp-tools-6"><a class="header" href="#mcp-tools-6">MCP Tools</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>engram_create</code></td><td>Create a new engram</td></tr>
<tr><td><code>engram_get</code></td><td>Get engram by key</td></tr>
<tr><td><code>engram_search</code></td><td>Search with filters</td></tr>
<tr><td><code>engram_find_patterns</code></td><td>Find matching patterns</td></tr>
<tr><td><code>engram_check_avoidance</code></td><td>Check if entity should be avoided</td></tr>
<tr><td><code>engram_create_avoidance</code></td><td>Create avoidance rule</td></tr>
<tr><td><code>engram_create_pattern</code></td><td>Create pattern from trade data</td></tr>
<tr><td><code>engram_delete</code></td><td>Delete an engram</td></tr>
<tr><td><code>engram_stats</code></td><td>Get harvester statistics</td></tr>
</tbody>
</table>
</div>
<h2 id="event-topics-2"><a class="header" href="#event-topics-2">Event Topics</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Topic</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>arb.engram.created</code></td><td>New engram stored</td></tr>
<tr><td><code>arb.engram.pattern.matched</code></td><td>Pattern recognized</td></tr>
<tr><td><code>arb.engram.avoidance.created</code></td><td>Avoidance rule created</td></tr>
<tr><td><code>arb.engram.strategy.optimized</code></td><td>Strategy optimization complete</td></tr>
</tbody>
</table>
</div>
<h2 id="integration-with-other-agents"><a class="header" href="#integration-with-other-agents">Integration with Other Agents</a></h2>
<h3 id="threat-detector"><a class="header" href="#threat-detector">Threat Detector</a></h3>
<p>When a threat is detected, an avoidance engram is automatically created:</p>
<pre><code>Threat Detected â†’ arb.threat.blocked â†’ Engram Harvester â†’ arb.engram.avoidance.created
</code></pre>
<h3 id="strategy-engine"><a class="header" href="#strategy-engine">Strategy Engine</a></h3>
<p>The strategy engine queries engrams for pattern matching before executing:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Before execution
let patterns = harvester.find_matching_patterns(&amp;PatternMatchRequest {
    edge_type: edge.edge_type.clone(),
    venue_type: edge.venue_type.clone(),
    min_success_rate: Some(0.6),
    ..Default::default()
}).await;

if patterns.is_empty() {
    // New pattern - require consensus
    request_consensus(edge).await;
} else {
    // Known pattern - check historical success
    let avg_success = patterns.iter().map(|p| p.success_rate).sum::&lt;f64&gt;() / patterns.len() as f64;
    if avg_success &gt; 0.7 {
        execute_with_confidence(edge).await;
    }
}
<span class="boring">}</span></code></pre>
<h3 id="consensus-engine"><a class="header" href="#consensus-engine">Consensus Engine</a></h3>
<p>Consensus outcomes are stored as engrams for pattern analysis:</p>
<pre><code>Consensus Completed â†’ Store as consensus_outcome engram â†’ Analyze which models perform best
</code></pre>
<h2 id="key-naming-convention"><a class="header" href="#key-naming-convention">Key Naming Convention</a></h2>
<p>Engram keys follow a hierarchical pattern:</p>
<pre><code>arb.{type}.{subtype}.{identifier}

Examples:
- arb.pattern.dex_arb.jup_ray_orca
- arb.avoid.token.BadMint123
- arb.avoid.wallet.ScamWallet456
- arb.strategy.curve_graduation.v2
- arb.consensus.edge_abc123
</code></pre>
<h2 id="expiration"><a class="header" href="#expiration">Expiration</a></h2>
<p>Engrams can have optional expiration:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let engram = ArbEngram::new(key, engram_type, content, source)
    .with_expiry(chrono::Utc::now() + chrono::Duration::days(30));
<span class="boring">}</span></code></pre>
<p>Use cases for expiration:</p>
<ul>
<li><strong>Market conditions</strong> - Expire after hours/days as conditions change</li>
<li><strong>Threat intel</strong> - Some threats may be time-limited</li>
<li><strong>Strategy tests</strong> - Expire experimental strategies after testing period</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="multi-llm-consensus-engine-1"><a class="header" href="#multi-llm-consensus-engine-1">Multi-LLM Consensus Engine</a></h1>
<p>The Consensus Engine enables multi-model decision making for trade approvals, reducing hallucination risk and improving decision quality through weighted voting across multiple LLMs.</p>
<h2 id="overview-12"><a class="header" href="#overview-12">Overview</a></h2>
<p>When an edge (opportunity) requires approval, the consensus engine:</p>
<ol>
<li>Queries multiple LLMs with edge context</li>
<li>Each model returns approve/reject with confidence</li>
<li>Weighted voting determines the outcome</li>
<li>Result stored as engram for pattern learning</li>
</ol>
<h2 id="architecture-3"><a class="header" href="#architecture-3">Architecture</a></h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Consensus Engine                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  OpenRouter Client                     â”‚ â”‚
â”‚  â”‚  (Routes to multiple model providers)                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚         â–¼                â–¼                â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Claude 3.5  â”‚  â”‚  GPT-4      â”‚  â”‚ Llama 3.1   â”‚        â”‚
â”‚  â”‚  Sonnet     â”‚  â”‚  Turbo      â”‚  â”‚   70B       â”‚        â”‚
â”‚  â”‚ Weight: 1.5 â”‚  â”‚ Weight: 1.0 â”‚  â”‚ Weight: 0.8 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                â”‚                â”‚                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                          â–¼                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚  Voting Engine    â”‚                         â”‚
â”‚              â”‚ (Weighted Tally)  â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                        â”‚                                    â”‚
â”‚                        â–¼                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚ Consensus Result  â”‚                         â”‚
â”‚              â”‚ â†’ Engram Store    â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 id="model-weights"><a class="header" href="#model-weights">Model Weights</a></h2>
<p>Different models have different weights based on their reliability and performance:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Model</th><th>Weight</th><th>Notes</th></tr>
</thead>
<tbody>
<tr><td>Claude 3.5 Sonnet</td><td>1.5</td><td>High reliability, excellent reasoning</td></tr>
<tr><td>GPT-4 Turbo</td><td>1.0</td><td>Good general performance</td></tr>
<tr><td>Llama 3.1 70B</td><td>0.8</td><td>Good value, slightly lower weight</td></tr>
<tr><td>Mixtral 8x7B</td><td>0.6</td><td>Cost-effective fallback</td></tr>
</tbody>
</table>
</div>
<p>Weights can be adjusted based on historical performance tracked via engrams.</p>
<h2 id="consensus-request"><a class="header" href="#consensus-request">Consensus Request</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ConsensusRequest {
    pub edge_id: Uuid,
    pub models: Vec&lt;String&gt;,      // Optional, defaults to all available
    pub min_agreement: f32,       // 0.5 = majority (default)
    pub timeout_secs: u32,        // Default: 30
}
<span class="boring">}</span></code></pre>
<h2 id="consensus-result"><a class="header" href="#consensus-result">Consensus Result</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ConsensusResult {
    pub id: Uuid,
    pub edge_id: Uuid,
    pub approved: bool,
    pub agreement_score: f32,     // 0.0-1.0
    pub weighted_approve: f32,    // Weighted approval score
    pub model_votes: Vec&lt;ModelVote&gt;,
    pub reasoning_summary: String,
    pub timestamp: DateTime&lt;Utc&gt;,
}

pub struct ModelVote {
    pub model: String,
    pub approved: bool,
    pub confidence: f32,
    pub reasoning: String,
    pub weight: f32,
    pub response_time_ms: u64,
}
<span class="boring">}</span></code></pre>
<h2 id="voting-algorithm"><a class="header" href="#voting-algorithm">Voting Algorithm</a></h2>
<p>The weighted voting algorithm:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn calculate_consensus(votes: &amp;[ModelVote], min_agreement: f32) -&gt; ConsensusResult {
    let total_weight: f32 = votes.iter().map(|v| v.weight).sum();

    let approve_weight: f32 = votes.iter()
        .filter(|v| v.approved)
        .map(|v| v.weight * v.confidence)
        .sum();

    let weighted_approve = approve_weight / total_weight;
    let approved = weighted_approve &gt;= min_agreement;

    ConsensusResult {
        approved,
        agreement_score: weighted_approve,
        weighted_approve,
        // ...
    }
}
<span class="boring">}</span></code></pre>
<h2 id="api-endpoints-11"><a class="header" href="#api-endpoints-11">API Endpoints</a></h2>
<h3 id="request-consensus"><a class="header" href="#request-consensus">Request Consensus</a></h3>
<pre><code class="language-bash">POST /consensus/request
Content-Type: application/json

{
  "edge_id": "550e8400-e29b-41d4-a716-446655440000",
  "models": ["claude-3.5-sonnet", "gpt-4-turbo", "llama-3.1-70b"],
  "min_agreement": 0.5,
  "timeout_secs": 30
}
</code></pre>
<p>Response:</p>
<pre><code class="language-json">{
  "id": "660e8400-e29b-41d4-a716-446655440001",
  "edge_id": "550e8400-e29b-41d4-a716-446655440000",
  "approved": true,
  "agreement_score": 0.78,
  "weighted_approve": 0.78,
  "model_votes": [
    {
      "model": "claude-3.5-sonnet",
      "approved": true,
      "confidence": 0.85,
      "reasoning": "Strong arbitrage opportunity with low risk",
      "weight": 1.5,
      "response_time_ms": 1234
    },
    {
      "model": "gpt-4-turbo",
      "approved": true,
      "confidence": 0.72,
      "reasoning": "Favorable risk/reward ratio",
      "weight": 1.0,
      "response_time_ms": 2156
    },
    {
      "model": "llama-3.1-70b",
      "approved": false,
      "confidence": 0.65,
      "reasoning": "Concerned about slippage risk",
      "weight": 0.8,
      "response_time_ms": 987
    }
  ],
  "reasoning_summary": "2/3 models approved with weighted score 0.78",
  "timestamp": "2024-01-15T10:30:00Z"
}
</code></pre>
<h3 id="get-consensus-result"><a class="header" href="#get-consensus-result">Get Consensus Result</a></h3>
<pre><code class="language-bash">GET /consensus/{consensus_id}
</code></pre>
<h3 id="get-consensus-history"><a class="header" href="#get-consensus-history">Get Consensus History</a></h3>
<pre><code class="language-bash">GET /consensus/history?edge_id=550e8400...&amp;approved_only=true&amp;limit=50
</code></pre>
<h2 id="mcp-tools-7"><a class="header" href="#mcp-tools-7">MCP Tools</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>consensus_request</code></td><td>Request multi-LLM consensus on trade</td></tr>
<tr><td><code>consensus_result</code></td><td>Get result of consensus request</td></tr>
<tr><td><code>consensus_history</code></td><td>Get historical consensus decisions</td></tr>
</tbody>
</table>
</div>
<h2 id="event-topics-3"><a class="header" href="#event-topics-3">Event Topics</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Topic</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>arb.consensus.requested</code></td><td>Consensus request initiated</td></tr>
<tr><td><code>arb.consensus.completed</code></td><td>Consensus decision reached</td></tr>
<tr><td><code>arb.consensus.failed</code></td><td>Consensus failed (timeout/error)</td></tr>
</tbody>
</table>
</div>
<h2 id="prompt-template"><a class="header" href="#prompt-template">Prompt Template</a></h2>
<p>The consensus engine uses a structured prompt for trade evaluation:</p>
<pre><code>You are evaluating a trading opportunity for an automated MEV system.

EDGE DETAILS:
- Type: {edge_type}
- Venue: {venue_type}
- Estimated Profit: {profit_lamports} lamports ({profit_bps} bps)
- Risk Score: {risk_score}/100
- Atomicity: {atomicity} (fully_atomic = guaranteed profit or revert)

ROUTE:
{route_details}

MARKET CONTEXT:
{market_context}

HISTORICAL PATTERNS:
{matching_patterns}

Based on this information, should we execute this trade?

Respond with JSON:
{
  "approved": true/false,
  "confidence": 0.0-1.0,
  "reasoning": "Your detailed reasoning"
}
</code></pre>
<h2 id="engram-integration-1"><a class="header" href="#engram-integration-1">Engram Integration</a></h2>
<p>Consensus outcomes are stored as engrams for analysis:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let engram = ArbEngram::new(
    format!("arb.consensus.{}", consensus_id),
    EngramType::ConsensusOutcome,
    serde_json::to_value(&amp;ConsensusOutcomeContent {
        edge_id,
        approved: result.approved,
        agreement_score: result.agreement_score,
        model_performance: analyze_model_performance(&amp;result),
        actual_outcome: None, // Updated after trade execution
    })?,
    EngramSource::Agent(AgentType::ConsensusEngine),
);
<span class="boring">}</span></code></pre>
<p>This enables:</p>
<ul>
<li>Tracking which model combinations perform best</li>
<li>Identifying edge types where consensus is most/least accurate</li>
<li>Optimizing model weights over time</li>
</ul>
<h2 id="direct-provider-support"><a class="header" href="#direct-provider-support">Direct Provider Support</a></h2>
<p>In addition to OpenRouter, the consensus engine supports direct API calls:</p>
<h3 id="anthropic-claude"><a class="header" href="#anthropic-claude">Anthropic (Claude)</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let client = AnthropicClient::new(api_key);
let response = client.query_model("claude-3-5-sonnet-20241022", &amp;prompt).await?;
<span class="boring">}</span></code></pre>
<h3 id="openai-gpt-4"><a class="header" href="#openai-gpt-4">OpenAI (GPT-4)</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let client = OpenAIClient::new(api_key);
let response = client.query_model("gpt-4-turbo", &amp;prompt).await?;
<span class="boring">}</span></code></pre>
<h2 id="configuration-6"><a class="header" href="#configuration-6">Configuration</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ConsensusConfig {
    pub openrouter_api_key: String,
    pub default_models: Vec&lt;String&gt;,
    pub default_min_agreement: f32,  // 0.5
    pub default_timeout_secs: u32,   // 30
    pub max_retries: u32,            // 2
    pub store_outcomes_as_engrams: bool,
}
<span class="boring">}</span></code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<ol>
<li><strong>Use for agent-directed trades</strong> - Autonomous trades with high confidence donâ€™t need consensus</li>
<li><strong>Adjust min_agreement based on risk</strong> - Higher risk trades should require stronger agreement</li>
<li><strong>Monitor model performance</strong> - Use engrams to track which models perform best for which edge types</li>
<li><strong>Set appropriate timeouts</strong> - MEV opportunities are time-sensitive</li>
<li><strong>Cache similar decisions</strong> - Recent consensus on similar edges can inform current decisions</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="swarm-orchestration--resilience"><a class="header" href="#swarm-orchestration--resilience">Swarm Orchestration &amp; Resilience</a></h1>
<p>The Swarm Orchestration system provides monitoring, health management, and fault tolerance for the ArbFarm agent ecosystem.</p>
<h2 id="components-1"><a class="header" href="#components-1">Components</a></h2>
<h3 id="resilience-overseer-meta-agent"><a class="header" href="#resilience-overseer-meta-agent">Resilience Overseer (Meta-Agent)</a></h3>
<p>The Resilience Overseer is a meta-agent that monitors and manages all other agents in the swarm.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ResilienceOverseer {
    id: Uuid,
    agents: Arc&lt;RwLock&lt;HashMap&lt;Uuid, AgentStatus&gt;&gt;&gt;,
    config: OverseerConfig,
    is_paused: Arc&lt;RwLock&lt;bool&gt;&gt;,
    event_tx: broadcast::Sender&lt;ArbEvent&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>Monitor agent heartbeats</li>
<li>Track agent health states</li>
<li>Coordinate swarm-wide pause/resume</li>
<li>Identify agents needing recovery</li>
<li>Emit swarm health events</li>
</ul>
<h3 id="agent-health-states"><a class="header" href="#agent-health-states">Agent Health States</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum AgentHealth {
    Healthy,    // Operating normally
    Degraded,   // 1-2 consecutive failures
    Unhealthy,  // 3-5 consecutive failures
    Dead,       // 6+ consecutive failures
}
<span class="boring">}</span></code></pre>
<h3 id="agent-status-tracking"><a class="header" href="#agent-status-tracking">Agent Status Tracking</a></h3>
<p>Each registered agent has status tracked:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct AgentStatus {
    pub agent_type: AgentType,
    pub agent_id: Uuid,
    pub health: AgentHealth,
    pub last_heartbeat: Instant,
    pub consecutive_failures: u32,
    pub restart_count: u32,
    pub started_at: DateTime&lt;Utc&gt;,
    pub error_message: Option&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="overseer-configuration"><a class="header" href="#overseer-configuration">Overseer Configuration</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct OverseerConfig {
    pub heartbeat_interval_secs: u64,    // Default: 10
    pub heartbeat_timeout_secs: u64,     // Default: 30
    pub max_restart_attempts: u32,       // Default: 3
    pub restart_cooldown_secs: u64,      // Default: 60
    pub auto_recovery_enabled: bool,     // Default: true
}
<span class="boring">}</span></code></pre>
<h2 id="circuit-breakers"><a class="header" href="#circuit-breakers">Circuit Breakers</a></h2>
<p>Circuit breakers prevent cascading failures by temporarily disabling failing integrations.</p>
<h3 id="circuit-states"><a class="header" href="#circuit-states">Circuit States</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum CircuitState {
    Closed,    // Normal operation - requests flow through
    Open,      // Failing - requests blocked
    HalfOpen,  // Testing recovery - limited requests allowed
}
<span class="boring">}</span></code></pre>
<h3 id="circuit-breaker-configuration"><a class="header" href="#circuit-breaker-configuration">Circuit Breaker Configuration</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct CircuitBreakerConfig {
    pub failure_threshold: u32,      // Failures to open (default: 5)
    pub success_threshold: u32,      // Successes to close (default: 3)
    pub timeout_duration: Duration,  // Time before half-open (default: 30s)
    pub half_open_max_calls: u32,    // Test calls in half-open (default: 3)
}
<span class="boring">}</span></code></pre>
<h3 id="usage-pattern"><a class="header" href="#usage-pattern">Usage Pattern</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let breaker = CircuitBreaker::new("jupiter_api", config);

// Execute with circuit breaker protection
match breaker.execute(|| async {
    jupiter_client.get_quote(params).await
}).await {
    Ok(quote) =&gt; process_quote(quote),
    Err(CircuitBreakerError::Open) =&gt; {
        // Circuit is open, use fallback
        use_cached_route()
    }
    Err(CircuitBreakerError::Inner(e)) =&gt; {
        // Underlying error, circuit recorded failure
        handle_api_error(e)
    }
}
<span class="boring">}</span></code></pre>
<h3 id="circuit-breaker-registry"><a class="header" href="#circuit-breaker-registry">Circuit Breaker Registry</a></h3>
<p>Centralized management of all circuit breakers:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let registry = CircuitBreakerRegistry::new(default_config);

// Get or create breaker by name
let breaker = registry.get_or_create("helius_rpc").await;

// Reset specific breaker
if let Some(breaker) = registry.get("jupiter_api").await {
    breaker.reset().await;
}

// Reset all breakers (emergency recovery)
registry.reset_all().await;

// Get all states for monitoring
let states = registry.get_all_states().await;
<span class="boring">}</span></code></pre>
<h2 id="api-endpoints-12"><a class="header" href="#api-endpoints-12">API Endpoints</a></h2>
<h3 id="swarm-status"><a class="header" href="#swarm-status">Swarm Status</a></h3>
<pre><code class="language-bash"># Full swarm status with agents and circuit breakers
GET /swarm/status

# Response
{
  "health": {
    "total_agents": 5,
    "healthy_agents": 4,
    "degraded_agents": 1,
    "unhealthy_agents": 0,
    "dead_agents": 0,
    "overall_health": "Degraded",
    "is_paused": false
  },
  "agents": [...],
  "circuit_breakers": [...]
}
</code></pre>
<h3 id="swarm-health-quick-check"><a class="header" href="#swarm-health-quick-check">Swarm Health (Quick Check)</a></h3>
<pre><code class="language-bash">GET /swarm/health

# Response
{
  "total_agents": 5,
  "healthy_agents": 5,
  "overall_health": "Healthy",
  "is_paused": false
}
</code></pre>
<h3 id="agent-management"><a class="header" href="#agent-management">Agent Management</a></h3>
<pre><code class="language-bash"># List all agents
GET /swarm/agents

# Get specific agent
GET /swarm/agents/:id

# Record heartbeat
POST /swarm/heartbeat
{
  "agent_id": "uuid-here"
}

# Report failure
POST /swarm/failure
{
  "agent_id": "uuid-here",
  "error": "Connection timeout to Jupiter API"
}
</code></pre>
<h3 id="swarm-control"><a class="header" href="#swarm-control">Swarm Control</a></h3>
<pre><code class="language-bash"># Pause all trading activity
POST /swarm/pause

# Resume trading activity
POST /swarm/resume
</code></pre>
<h3 id="circuit-breaker-management"><a class="header" href="#circuit-breaker-management">Circuit Breaker Management</a></h3>
<pre><code class="language-bash"># List all circuit breakers
GET /swarm/circuit-breakers

# Response
[
  { "name": "jupiter_api", "state": "Closed" },
  { "name": "helius_rpc", "state": "HalfOpen" },
  { "name": "birdeye_api", "state": "Open" }
]

# Reset specific breaker
POST /swarm/circuit-breakers/:name/reset

# Reset all breakers
POST /swarm/circuit-breakers/reset-all
</code></pre>
<h2 id="event-topics-4"><a class="header" href="#event-topics-4">Event Topics</a></h2>
<p>The overseer emits events on these topics:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Topic</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>arb.swarm.agent.started</code></td><td>Agent registered with overseer</td></tr>
<tr><td><code>arb.swarm.agent.stopped</code></td><td>Agent unregistered</td></tr>
<tr><td><code>arb.swarm.agent.failed</code></td><td>Agent health degraded</td></tr>
<tr><td><code>arb.swarm.agent.recovered</code></td><td>Agent recovered/restarted</td></tr>
<tr><td><code>arb.swarm.paused</code></td><td>Swarm-wide pause activated</td></tr>
<tr><td><code>arb.swarm.resumed</code></td><td>Swarm-wide operations resumed</td></tr>
</tbody>
</table>
</div>
<h2 id="health-check-flow"><a class="header" href="#health-check-flow">Health Check Flow</a></h2>
<pre><code>Agent Running
     â”‚
     â”œâ”€â”€â”€ Every N seconds â”€â”€â”€â–¶ Send Heartbeat
     â”‚                              â”‚
     â”‚                              â–¼
     â”‚                        Overseer Records
     â”‚                        Last Heartbeat
     â”‚
     â–¼
 Operation Fails
     â”‚
     â”œâ”€â”€â”€ Report Failure â”€â”€â”€â–¶ Overseer Records
     â”‚                        Consecutive Failures
     â”‚                              â”‚
     â”‚                              â–¼
     â”‚                        Update Health State
     â”‚                        (Degraded/Unhealthy/Dead)
     â”‚                              â”‚
     â”‚                              â–¼
     â”‚                        Emit AGENT_FAILED Event
     â”‚
     â–¼
 Heartbeat Timeout
     â”‚
     â””â”€â”€â”€ Overseer Detects â”€â”€â”€â–¶ Mark as Stale
                                    â”‚
                                    â–¼
                              Auto-Recovery
                              (if enabled)
</code></pre>
<h2 id="auto-recovery"><a class="header" href="#auto-recovery">Auto-Recovery</a></h2>
<p>When <code>auto_recovery_enabled</code> is true, the overseer identifies agents needing restart:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Get agents that need restart
let agents_to_restart = overseer.get_agents_needing_restart().await;

for (agent_id, agent_type) in agents_to_restart {
    // Restart logic - respects max_restart_attempts
    restart_agent(agent_type).await;
    overseer.record_agent_recovery(agent_id).await;
}
<span class="boring">}</span></code></pre>
<p><strong>Restart Conditions</strong>:</p>
<ul>
<li>Agent health is <code>Dead</code> (6+ consecutive failures)</li>
<li>Restart count &lt; <code>max_restart_attempts</code></li>
<li>Respects <code>restart_cooldown_secs</code> between attempts</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="echo-factory-implementation-plan"><a class="header" href="#echo-factory-implementation-plan">Echo Factory Implementation Plan</a></h1>
<blockquote>
<p><strong>STATUS: PAUSED</strong> - Initiative paused in favor of <a href="#polyswarm-cow-implementation-plan">Poly Mev</a>. May resume after Polymarket swarm is operational.</p>
</blockquote>
<p><strong>NullBlockâ€™s first COW</strong> (Constellation of Work) - Autonomous X/Twitter content creation suite.</p>
<h2 id="status-1"><a class="header" href="#status-1">Status</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Phase</th><th>Status</th><th>Notes</th></tr>
</thead>
<tbody>
<tr><td><strong>Phase 1: Engram Service</strong></td><td>âœ… Complete</td><td>Port 9004, all CRUD working</td></tr>
<tr><td><strong>Phase 1.5: MCP + Mem Cache</strong></td><td>ğŸ”„ In Progress</td><td>MCP 2025-11-25 compliant, Mem Cache UI</td></tr>
<tr><td><strong>Phase 2: Crossroads COW Model</strong></td><td>â³ Next Up</td><td>COW as first-class listing</td></tr>
<tr><td><strong>Phase 3: Echo Factory Core</strong></td><td>â³ Pending</td><td>Persona, Content, Scheduler, Publisher</td></tr>
<tr><td><strong>Phase 4: X API Integration</strong></td><td>â³ Pending</td><td>OAuth 1.0a + real posting</td></tr>
<tr><td><strong>Phase 5: Frontend</strong></td><td>â³ Pending</td><td>Hecate UI components</td></tr>
</tbody>
</table>
</div>
<h3 id="phase-15-progress"><a class="header" href="#phase-15-progress">Phase 1.5 Progress</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Component</th><th>Status</th></tr>
</thead>
<tbody>
<tr><td>MCP Protocol Version 2025-11-25</td><td>âœ… Complete</td></tr>
<tr><td>MCP Client (Hecate)</td><td>âœ… Complete</td></tr>
<tr><td>MCP Proxy (Erebus)</td><td>âœ… Complete</td></tr>
<tr><td>Engram MCP Tools (9 total)</td><td>âœ… Complete</td></tr>
<tr><td>Mem Cache Tab</td><td>ğŸ”„ In Progress</td></tr>
<tr><td>Crossroads MCP Display</td><td>â³ Pending</td></tr>
</tbody>
</table>
</div>
<h2 id="architecture-decisions"><a class="header" href="#architecture-decisions">Architecture Decisions</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Decision</th><th>Choice</th><th>Rationale</th></tr>
</thead>
<tbody>
<tr><td><strong>Engrams</strong></td><td>Separate service</td><td>Context for ALL workflows</td></tr>
<tr><td><strong>COWs</strong></td><td>Replace Workflows</td><td>First-class listing type</td></tr>
<tr><td><strong>Echo Factory</strong></td><td>Isolated package</td><td>Reference implementation</td></tr>
<tr><td><strong>MVP Focus</strong></td><td>X posting</td><td>Persona â†’ Content â†’ Schedule â†’ Publish</td></tr>
</tbody>
</table>
</div>
<h2 id="dogfooding-principle-1"><a class="header" href="#dogfooding-principle-1">Dogfooding Principle</a></h2>
<p>Echo Factory MUST use only public APIs through Erebus. No privileged access.</p>
<p><strong>External developers get the same experience:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Access Method</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>REST API</strong></td><td>All endpoints via Erebus (3000)</td></tr>
<tr><td><strong>MCP Server</strong></td><td>NullBlock MCP tools</td></tr>
<tr><td><strong>NullBlock Studio</strong></td><td>Web GUI (future)</td></tr>
<tr><td><strong>SDK</strong></td><td><code>nullblock-sdk</code> package</td></tr>
</tbody>
</table>
</div>
<h2 id="the-4-cow-tools"><a class="header" href="#the-4-cow-tools">The 4 COW Tools</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Standalone</th><th>Required</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Persona Creator</strong></td><td>Yes</td><td>Yes</td><td>Create X personas with voice, tone</td></tr>
<tr><td><strong>Content Generator</strong></td><td>Yes</td><td>Yes</td><td>Generate posts via Siren</td></tr>
<tr><td><strong>Scheduler</strong></td><td>Yes</td><td>No</td><td>Queue posts for optimal times</td></tr>
<tr><td><strong>X Publisher</strong></td><td>No</td><td>Yes</td><td>OAuth + X API posting</td></tr>
</tbody>
</table>
</div>
<h2 id="echo-factory-service-structure"><a class="header" href="#echo-factory-service-structure">Echo Factory Service Structure</a></h2>
<pre><code>svc/echo-factory/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ persona.rs
â”‚   â”‚   â”œâ”€â”€ content.rs
â”‚   â”‚   â””â”€â”€ schedule.rs
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”œâ”€â”€ persona.rs
â”‚   â”‚   â”œâ”€â”€ content.rs
â”‚   â”‚   â””â”€â”€ schedule.rs
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ persona_creator.rs
â”‚   â”‚   â”œâ”€â”€ content_generator.rs
â”‚   â”‚   â”œâ”€â”€ scheduler.rs
â”‚   â”‚   â””â”€â”€ x_publisher.rs
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ x_client.rs
â”‚       â””â”€â”€ engram_client.rs
â””â”€â”€ migrations/
</code></pre>
<h2 id="api-endpoints-via-erebus-2"><a class="header" href="#api-endpoints-via-erebus-2">API Endpoints (via Erebus)</a></h2>
<h3 id="personas"><a class="header" href="#personas">Personas</a></h3>
<pre><code class="language-bash">POST /api/echo/personas          # Create
GET  /api/echo/personas          # List
GET  /api/echo/personas/:id      # Get
PUT  /api/echo/personas/:id      # Update
POST /api/echo/personas/:id/connect-x  # OAuth
</code></pre>
<h3 id="content"><a class="header" href="#content">Content</a></h3>
<pre><code class="language-bash">POST /api/echo/content/generate   # Generate
POST /api/echo/content/schedule   # Schedule
GET  /api/echo/content/scheduled  # List scheduled
POST /api/echo/content/:id/publish-now  # Publish
</code></pre>
<h2 id="critical-risks"><a class="header" href="#critical-risks">Critical Risks</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Risk</th><th>Mitigation</th></tr>
</thead>
<tbody>
<tr><td>X API access delayed</td><td>Start application NOW</td></tr>
<tr><td>X API rate limits</td><td>Aggressive queue rate limiting</td></tr>
<tr><td>Content quality</td><td>Store successes in Engrams</td></tr>
<tr><td>OAuth expiration</td><td>Token refresh flow</td></tr>
</tbody>
</table>
</div>
<h2 id="related-18"><a class="header" href="#related-18">Related</a></h2>
<ul>
<li><a href="archive/echo-factory/engrams.html">Engram Integration</a></li>
<li><a href="#engrams-service">Engrams Service</a></li>
<li><a href="#crossroads-marketplace">Crossroads Marketplace</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="docker--containers"><a class="header" href="#docker--containers">Docker &amp; Containers</a></h1>
<p><strong>Container-First Architecture</strong> - All infrastructure runs in Docker.</p>
<h2 id="golden-rules"><a class="header" href="#golden-rules">Golden Rules</a></h2>
<h3 id="1-container-to-container-communication"><a class="header" href="#1-container-to-container-communication">1. Container-to-Container Communication</a></h3>
<pre><code class="language-bash"># âœ… CORRECT - use container names
host=nullblock-postgres-erebus port=5432

# âŒ WRONG - never use localhost in containers
host=localhost port=5432

# âŒ WRONG - never use host.docker.internal
host=host.docker.internal port=5440
</code></pre>
<h3 id="2-network-configuration"><a class="header" href="#2-network-configuration">2. Network Configuration</a></h3>
<p>All containers join <code>nullblock-network</code> bridge network:</p>
<pre><code class="language-bash">docker run --network nullblock-network ...
</code></pre>
<h3 id="3-port-mapping"><a class="header" href="#3-port-mapping">3. Port Mapping</a></h3>
<pre><code>External (host) â†’ Internal (container)
5440 â†’ 5432   # Erebus PostgreSQL
5441 â†’ 5432   # Agents PostgreSQL
9092 â†’ 9092   # Kafka
2181 â†’ 2181   # Zookeeper
</code></pre>
<h3 id="4-system-agnostic-design"><a class="header" href="#4-system-agnostic-design">4. System-Agnostic Design</a></h3>
<ul>
<li>Identical behavior on macOS and Linux</li>
<li>Use Docker networking, not OS workarounds</li>
<li>Test on both platforms</li>
</ul>
<h2 id="container-setup"><a class="header" href="#container-setup">Container Setup</a></h2>
<h3 id="start-infrastructure"><a class="header" href="#start-infrastructure">Start Infrastructure</a></h3>
<pre><code class="language-bash">cd ~/nullblock &amp;&amp; just start
</code></pre>
<p>This creates:</p>
<ul>
<li><code>nullblock-network</code> bridge network</li>
<li><code>nullblock-postgres-erebus</code> (port 5440)</li>
<li><code>nullblock-postgres-agents</code> (port 5441)</li>
<li><code>nullblock-kafka</code> (port 9092)</li>
<li><code>nullblock-zookeeper</code> (port 2181)</li>
</ul>
<h3 id="verify-containers"><a class="header" href="#verify-containers">Verify Containers</a></h3>
<pre><code class="language-bash">docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"
</code></pre>
<h3 id="network-inspection"><a class="header" href="#network-inspection">Network Inspection</a></h3>
<pre><code class="language-bash">docker network inspect nullblock-network
</code></pre>
<h2 id="postgresql-replication"><a class="header" href="#postgresql-replication">PostgreSQL Replication</a></h2>
<p>Erebus â†’ Agents user sync via logical replication:</p>
<pre><code class="language-sql">-- Erebus: Creates publication
CREATE PUBLICATION erebus_user_sync FOR TABLE user_references;

-- Agents: Creates subscription (uses container names)
CREATE SUBSCRIPTION agents_user_sync
  CONNECTION 'host=nullblock-postgres-erebus port=5432 ...'
  PUBLICATION erebus_user_sync;
</code></pre>
<h3 id="verify-replication"><a class="header" href="#verify-replication">Verify Replication</a></h3>
<pre><code class="language-bash"># Check subscription status
PGPASSWORD="postgres_secure_pass" psql -h localhost -p 5441 -U postgres -d agents \
  -c "SELECT subname, subenabled FROM pg_subscription;"

# Compare user counts
PGPASSWORD="postgres_secure_pass" psql -h localhost -p 5440 -U postgres -d erebus \
  -c "SELECT COUNT(*) FROM user_references;"
PGPASSWORD="postgres_secure_pass" psql -h localhost -p 5441 -U postgres -d agents \
  -c "SELECT COUNT(*) FROM user_references;"
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="container-wont-start"><a class="header" href="#container-wont-start">Container Wonâ€™t Start</a></h3>
<pre><code class="language-bash"># Check logs
docker logs nullblock-postgres-erebus

# Remove and recreate
docker rm -f nullblock-postgres-erebus
just start
</code></pre>
<h3 id="network-issues"><a class="header" href="#network-issues">Network Issues</a></h3>
<pre><code class="language-bash"># Verify network exists
docker network ls | grep nullblock

# Recreate network
docker network rm nullblock-network
docker network create nullblock-network
</code></pre>
<h3 id="replication-broken"><a class="header" href="#replication-broken">Replication Broken</a></h3>
<pre><code class="language-bash"># Drop and recreate subscription
PGPASSWORD="..." psql -h localhost -p 5441 -U postgres -d agents \
  -c "DROP SUBSCRIPTION agents_user_sync;"

# Run migration again
cd svc/nullblock-agents &amp;&amp; sqlx migrate run
</code></pre>
<h2 id="related-19"><a class="header" href="#related-19">Related</a></h2>
<ul>
<li><a href="#database-architecture">Database Architecture</a></li>
<li><a href="#tmuxinator-setup">Tmuxinator Setup</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="database-architecture"><a class="header" href="#database-architecture">Database Architecture</a></h1>
<p><strong>Dual PostgreSQL</strong> - Separated databases for service isolation with replication.</p>
<h2 id="databases"><a class="header" href="#databases">Databases</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Database</th><th>Port</th><th>Owner</th><th>Contents</th></tr>
</thead>
<tbody>
<tr><td><strong>Erebus</strong></td><td>5440</td><td>Erebus</td><td>Users, wallets, marketplace, API keys</td></tr>
<tr><td><strong>Agents</strong></td><td>5441</td><td>Agents</td><td>Tasks, agents, engrams, user replica</td></tr>
</tbody>
</table>
</div>
<h2 id="erebus-database-port-5440"><a class="header" href="#erebus-database-port-5440">Erebus Database (Port 5440)</a></h2>
<h3 id="tables"><a class="header" href="#tables">Tables</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Table</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>user_references</code></td><td>User identity (wallet, API key, OAuth)</td></tr>
<tr><td><code>wallets</code></td><td>Web3 wallet connections</td></tr>
<tr><td><code>sessions</code></td><td>Auth sessions</td></tr>
<tr><td><code>agent_api_keys</code></td><td>Encrypted LLM provider keys</td></tr>
<tr><td><code>crossroads_*</code></td><td>Marketplace tables</td></tr>
</tbody>
</table>
</div>
<h3 id="connection"><a class="header" href="#connection">Connection</a></h3>
<pre><code class="language-bash">PGPASSWORD="postgres_secure_pass" psql -h localhost -p 5440 -U postgres -d erebus
</code></pre>
<h2 id="agents-database-port-5441"><a class="header" href="#agents-database-port-5441">Agents Database (Port 5441)</a></h2>
<h3 id="tables-1"><a class="header" href="#tables-1">Tables</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Table</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>tasks</code></td><td>A2A protocol tasks</td></tr>
<tr><td><code>engrams</code></td><td>Memory/context storage</td></tr>
<tr><td><code>engram_history</code></td><td>Version audit trail</td></tr>
<tr><td><code>user_references</code></td><td><strong>READ-ONLY replica</strong></td></tr>
</tbody>
</table>
</div>
<h3 id="connection-1"><a class="header" href="#connection-1">Connection</a></h3>
<pre><code class="language-bash">PGPASSWORD="postgres_secure_pass" psql -h localhost -p 5441 -U postgres -d agents
</code></pre>
<h2 id="replication"><a class="header" href="#replication">Replication</a></h2>
<p>PostgreSQL logical replication syncs <code>user_references</code> from Erebus to Agents.</p>
<h3 id="setup-automatic-via-migrations"><a class="header" href="#setup-automatic-via-migrations">Setup (Automatic via Migrations)</a></h3>
<ol>
<li>Erebus migration creates publication</li>
<li>Agents migration creates subscription</li>
<li>Initial data backfilled automatically</li>
</ol>
<h3 id="how-it-works"><a class="header" href="#how-it-works">How It Works</a></h3>
<pre><code>Erebus INSERT/UPDATE/DELETE â†’ Publication â†’ Subscription â†’ Agents replica
</code></pre>
<p>Latency: &lt; 1 second</p>
<h3 id="verify"><a class="header" href="#verify">Verify</a></h3>
<pre><code class="language-bash"># Check subscription
psql -p 5441 -d agents -c "SELECT * FROM pg_subscription;"

# Compare counts
psql -p 5440 -d erebus -c "SELECT COUNT(*) FROM user_references;"
psql -p 5441 -d agents -c "SELECT COUNT(*) FROM user_references;"
</code></pre>
<h2 id="migrations"><a class="header" href="#migrations">Migrations</a></h2>
<h3 id="running-migrations"><a class="header" href="#running-migrations">Running Migrations</a></h3>
<pre><code class="language-bash"># Erebus
cd svc/erebus &amp;&amp; sqlx migrate run

# Agents
cd svc/nullblock-agents &amp;&amp; sqlx migrate run

# Engrams (handled by shell script)
./scripts/start-engrams.sh  # runs migrations before service
</code></pre>
<h3 id="creating-migrations"><a class="header" href="#creating-migrations">Creating Migrations</a></h3>
<pre><code class="language-bash">sqlx migrate add -r &lt;migration_name&gt;
</code></pre>
<p>Use <code>IF NOT EXISTS</code> for idempotent migrations.</p>
<h2 id="backup--restore"><a class="header" href="#backup--restore">Backup &amp; Restore</a></h2>
<h3 id="backup"><a class="header" href="#backup">Backup</a></h3>
<pre><code class="language-bash">pg_dump -h localhost -p 5440 -U postgres erebus &gt; erebus_backup.sql
pg_dump -h localhost -p 5441 -U postgres agents &gt; agents_backup.sql
</code></pre>
<h3 id="restore"><a class="header" href="#restore">Restore</a></h3>
<pre><code class="language-bash">psql -h localhost -p 5440 -U postgres erebus &lt; erebus_backup.sql
psql -h localhost -p 5441 -U postgres agents &lt; agents_backup.sql
</code></pre>
<h2 id="related-20"><a class="header" href="#related-20">Related</a></h2>
<ul>
<li><a href="#docker--containers">Docker &amp; Containers</a></li>
<li><a href="#service-ports">Service Ports</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="tmuxinator-setup"><a class="header" href="#tmuxinator-setup">Tmuxinator Setup</a></h1>
<p><strong>One-command dev environment</strong> - All services in organized tmux windows.</p>
<h2 id="quick-start-3"><a class="header" href="#quick-start-3">Quick Start</a></h2>
<pre><code class="language-bash">cd ~/nullblock &amp;&amp; just dev-mac    # macOS
cd ~/nullblock &amp;&amp; just dev-linux  # Linux
</code></pre>
<h2 id="attach-to-session"><a class="header" href="#attach-to-session">Attach to Session</a></h2>
<pre><code class="language-bash">tmux attach -t nullblock-dev
</code></pre>
<h2 id="window-layout"><a class="header" href="#window-layout">Window Layout</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Window</th><th>Contents</th></tr>
</thead>
<tbody>
<tr><td><code>Ctrl+B, 0</code></td><td>Monitoring</td><td>Health checks, logs</td></tr>
<tr><td><code>Ctrl+B, 1</code></td><td>Erebus</td><td>Port 3000</td></tr>
<tr><td><code>Ctrl+B, 2</code></td><td>Agents</td><td>Port 9003</td></tr>
<tr><td><code>Ctrl+B, 3</code></td><td>Protocols</td><td>Port 8001</td></tr>
<tr><td><code>Ctrl+B, 4</code></td><td>Engrams</td><td>Port 9004</td></tr>
<tr><td><code>Ctrl+B, 5</code></td><td>Tasks</td><td>Task management</td></tr>
<tr><td><code>Ctrl+B, 6</code></td><td>Frontend</td><td>Hecate (port 5173)</td></tr>
</tbody>
</table>
</div>
<h2 id="configuration-file"><a class="header" href="#configuration-file">Configuration File</a></h2>
<p>Location: <code>scripts/nullblock-dev-mac.yml</code></p>
<h3 id="structure"><a class="header" href="#structure">Structure</a></h3>
<pre><code class="language-yaml">name: nullblock-dev
root: ~/nullblock

on_project_start:
  - just start          # Docker infrastructure
  - start Chrome with debugging

windows:
  - monitoring:
      layout: main-horizontal
      panes:
        - watch health checks
        - tail logs

  - erebus:
      root: ~/nullblock/svc/erebus
      panes:
        - cargo run

  # ... more windows
</code></pre>
<h2 id="customization"><a class="header" href="#customization">Customization</a></h2>
<h3 id="add-new-window"><a class="header" href="#add-new-window">Add New Window</a></h3>
<p>Edit <code>scripts/nullblock-dev-mac.yml</code>:</p>
<pre><code class="language-yaml">windows:
  # ... existing windows ...

  - my-service:
      root: ~/nullblock/svc/my-service
      panes:
        - cargo run
</code></pre>
<h3 id="add-to-on_project_start"><a class="header" href="#add-to-on_project_start">Add to on_project_start</a></h3>
<pre><code class="language-yaml">on_project_start:
  - just start
  - echo "Starting my custom service..."
</code></pre>
<h2 id="manual-service-start"><a class="header" href="#manual-service-start">Manual Service Start</a></h2>
<p>If you need to start services individually:</p>
<pre><code class="language-bash"># Terminal 1 - Erebus
cd ~/nullblock/svc/erebus &amp;&amp; cargo run

# Terminal 2 - Agents
cd ~/nullblock/svc/nullblock-agents &amp;&amp; cargo run

# Terminal 3 - Engrams
cd ~/nullblock/svc/nullblock-engrams &amp;&amp; cargo run

# Terminal 4 - Protocols
cd ~/nullblock/svc/nullblock-protocols &amp;&amp; cargo run

# Terminal 5 - Frontend
cd ~/nullblock/svc/hecate &amp;&amp; npm run develop
</code></pre>
<h2 id="troubleshooting-1"><a class="header" href="#troubleshooting-1">Troubleshooting</a></h2>
<h3 id="session-not-creating"><a class="header" href="#session-not-creating">Session Not Creating</a></h3>
<pre><code class="language-bash"># Kill existing session
tmux kill-session -t nullblock-dev

# Restart
tmuxinator start nullblock-dev
</code></pre>
<h3 id="window-missing"><a class="header" href="#window-missing">Window Missing</a></h3>
<p>Check <code>scripts/nullblock-dev-mac.yml</code> for syntax errors.</p>
<h3 id="services-not-starting"><a class="header" href="#services-not-starting">Services Not Starting</a></h3>
<p>Check individual service logs:</p>
<pre><code class="language-bash"># In tmux, switch to window
Ctrl+B, &lt;window-number&gt;

# Check for errors in output
</code></pre>
<h2 id="related-21"><a class="header" href="#related-21">Related</a></h2>
<ul>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#docker--containers">Docker &amp; Containers</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="api-endpoints-13"><a class="header" href="#api-endpoints-13">API Endpoints</a></h1>
<p>Complete reference for all NullBlock API endpoints.</p>
<p><strong>All requests go through Erebus (port 3000).</strong></p>
<h2 id="authentication"><a class="header" href="#authentication">Authentication</a></h2>
<h3 id="wallet-challenge"><a class="header" href="#wallet-challenge">Wallet Challenge</a></h3>
<pre><code class="language-bash">POST /api/wallets/challenge
Content-Type: application/json

{
  "wallet_address": "0x742d35Cc6634C0532925a3b844Bc9e7595f8fE00",
  "wallet_chain": "ethereum"
}

# Response
{
  "challenge": "Sign this message to authenticate: 0x..."
}
</code></pre>
<h3 id="wallet-verify"><a class="header" href="#wallet-verify">Wallet Verify</a></h3>
<pre><code class="language-bash">POST /api/wallets/verify
Content-Type: application/json

{
  "wallet_address": "0x742d35Cc...",
  "signature": "0x..."
}

# Response
{
  "success": true,
  "session_token": "eyJ...",
  "user": {...}
}
</code></pre>
<h2 id="users"><a class="header" href="#users">Users</a></h2>
<h3 id="register"><a class="header" href="#register">Register</a></h3>
<pre><code class="language-bash">POST /api/users/register
Content-Type: application/json

{
  "source_identifier": "0x742d35Cc...",
  "source_type": {
    "type": "web3_wallet",
    "provider": "metamask",
    "network": "ethereum"
  }
}
</code></pre>
<h3 id="lookup"><a class="header" href="#lookup">Lookup</a></h3>
<pre><code class="language-bash">POST /api/users/lookup
Content-Type: application/json

{
  "source_identifier": "0x742d35Cc...",
  "source_type": "web3_wallet",
  "network": "ethereum"
}
</code></pre>
<h2 id="agents-1"><a class="header" href="#agents-1">Agents</a></h2>
<h3 id="chat"><a class="header" href="#chat">Chat</a></h3>
<pre><code class="language-bash">POST /api/agents/chat
Content-Type: application/json

{
  "message": "Hello HECATE",
  "wallet_address": "0x742d35Cc...",
  "wallet_chain": "ethereum"
}

# Response
{
  "response": "Welcome to the void, visitor...",
  "model": "cognitivecomputations/dolphin3.0-mistral-24b:free"
}
</code></pre>
<h3 id="tasks-1"><a class="header" href="#tasks-1">Tasks</a></h3>
<pre><code class="language-bash"># Create
POST /api/agents/tasks
{
  "name": "Test Task",
  "description": "A test task",
  "task_type": "system",
  "category": "user_assigned",
  "priority": "medium"
}

# List
GET /api/agents/tasks

# Get
GET /api/agents/tasks/:id

# Process
POST /api/agents/tasks/:id/process
</code></pre>
<h2 id="engrams"><a class="header" href="#engrams">Engrams</a></h2>
<h3 id="create"><a class="header" href="#create">Create</a></h3>
<pre><code class="language-bash">POST /api/engrams
Content-Type: application/json

{
  "wallet_address": "0x742d35Cc...",
  "engram_type": "persona",
  "key": "twitter.crypto_sage",
  "content": {
    "name": "Crypto Sage",
    "voice": "casual"
  },
  "tags": ["twitter", "persona"]
}
</code></pre>
<h3 id="list"><a class="header" href="#list">List</a></h3>
<pre><code class="language-bash">GET /api/engrams
GET /api/engrams/wallet/0x742d35Cc...
GET /api/engrams/wallet/0x742d35Cc.../twitter.crypto_sage
</code></pre>
<h3 id="search-1"><a class="header" href="#search-1">Search</a></h3>
<pre><code class="language-bash">POST /api/engrams/search
Content-Type: application/json

{
  "wallet_address": "0x742d35Cc...",
  "engram_type": "persona",
  "tags": ["twitter"]
}
</code></pre>
<h3 id="update"><a class="header" href="#update">Update</a></h3>
<pre><code class="language-bash">PUT /api/engrams/:id
Content-Type: application/json

{
  "content": {"name": "Crypto Sage v2"}
}
</code></pre>
<h3 id="delete"><a class="header" href="#delete">Delete</a></h3>
<pre><code class="language-bash">DELETE /api/engrams/:id
</code></pre>
<h2 id="marketplace-2"><a class="header" href="#marketplace-2">Marketplace</a></h2>
<h3 id="listings"><a class="header" href="#listings">Listings</a></h3>
<pre><code class="language-bash"># Browse
GET /api/marketplace/listings

# Create
POST /api/marketplace/listings
{
  "name": "My Agent",
  "description": "...",
  "category": "Agent",
  "price_type": "Free"
}

# Get
GET /api/marketplace/listings/:id

# Search
POST /api/marketplace/search
{
  "query": "trading",
  "category": "Agent"
}
</code></pre>
<h3 id="discovery-2"><a class="header" href="#discovery-2">Discovery</a></h3>
<pre><code class="language-bash">GET /api/discovery/agents
GET /api/discovery/tools
GET /api/discovery/health/:endpoint
POST /api/discovery/scan
</code></pre>
<h2 id="mcp-protocol-1"><a class="header" href="#mcp-protocol-1">MCP Protocol</a></h2>
<p>Model Context Protocol (2025-11-25) for AI tool integration.</p>
<h3 id="json-rpc"><a class="header" href="#json-rpc">JSON-RPC</a></h3>
<pre><code class="language-bash">POST /mcp/jsonrpc
Content-Type: application/json

# Initialize session
{
  "jsonrpc": "2.0",
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-11-25",
    "capabilities": {},
    "clientInfo": {"name": "my-client", "version": "1.0.0"}
  },
  "id": 1
}

# List tools
{
  "jsonrpc": "2.0",
  "method": "tools/list",
  "id": 2
}

# Call tool
{
  "jsonrpc": "2.0",
  "method": "tools/call",
  "params": {
    "name": "list_engrams",
    "arguments": {"wallet_address": "0x742d35Cc..."}
  },
  "id": 3
}
</code></pre>
<h3 id="convenience-endpoints"><a class="header" href="#convenience-endpoints">Convenience Endpoints</a></h3>
<pre><code class="language-bash">GET /mcp/tools       # List available tools (9 total)
GET /mcp/resources   # List available resources
GET /mcp/prompts     # List available prompts
GET /api/tools       # Alias for /mcp/tools
</code></pre>
<h3 id="available-tools"><a class="header" href="#available-tools">Available Tools</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>send_agent_message</code></td><td>Send message to agent</td></tr>
<tr><td><code>create_task</code></td><td>Create new task</td></tr>
<tr><td><code>get_task_status</code></td><td>Get task by ID</td></tr>
<tr><td><code>list_engrams</code></td><td>List engrams for wallet</td></tr>
<tr><td><code>get_engram</code></td><td>Get engram by ID</td></tr>
<tr><td><code>create_engram</code></td><td>Create new engram</td></tr>
<tr><td><code>update_engram</code></td><td>Update engram</td></tr>
<tr><td><code>delete_engram</code></td><td>Delete engram</td></tr>
<tr><td><code>search_engrams</code></td><td>Search engrams</td></tr>
</tbody>
</table>
</div>
<h3 id="hecate-tools-endpoint"><a class="header" href="#hecate-tools-endpoint">Hecate Tools Endpoint</a></h3>
<pre><code class="language-bash">GET /hecate/tools    # Returns MCP tools via Hecate agent
</code></pre>
<h2 id="a2a-protocol-1"><a class="header" href="#a2a-protocol-1">A2A Protocol</a></h2>
<h3 id="json-rpc-1"><a class="header" href="#json-rpc-1">JSON-RPC</a></h3>
<pre><code class="language-bash">POST /a2a/jsonrpc
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "method": "tasks/get",
  "params": {"id": "uuid"},
  "id": 1
}
</code></pre>
<h3 id="rest"><a class="header" href="#rest">REST</a></h3>
<pre><code class="language-bash">GET /a2a/v1/card
GET /a2a/v1/tasks/:id
GET /a2a/v1/tasks
POST /a2a/v1/messages
</code></pre>
<h2 id="arbfarm-solana-mev"><a class="header" href="#arbfarm-solana-mev">ArbFarm (Solana MEV)</a></h2>
<p>All ArbFarm endpoints require authentication via wallet session.</p>
<h3 id="scanner-2"><a class="header" href="#scanner-2">Scanner</a></h3>
<pre><code class="language-bash"># Get scanner status
GET /api/arb/scanner/status

# Start/stop scanner
POST /api/arb/scanner/start
POST /api/arb/scanner/stop

# SSE event stream
GET /api/arb/scanner/stream
</code></pre>
<h3 id="edges-opportunities-2"><a class="header" href="#edges-opportunities-2">Edges (Opportunities)</a></h3>
<pre><code class="language-bash"># List detected edges
GET /api/arb/edges
GET /api/arb/edges?status=detected&amp;edge_type=dex_arb

# Get edge details
GET /api/arb/edges/:id

# Approve/reject/execute
POST /api/arb/edges/:id/approve
POST /api/arb/edges/:id/reject
{
  "reason": "Too risky"
}
POST /api/arb/edges/:id/execute
{
  "max_slippage_bps": 50
}
</code></pre>
<h3 id="strategies-1"><a class="header" href="#strategies-1">Strategies</a></h3>
<pre><code class="language-bash"># List strategies
GET /api/arb/strategies

# Create strategy
POST /api/arb/strategies
{
  "name": "DEX Arb Strategy",
  "strategy_type": "dex_arb",
  "venue_types": ["dex_amm"],
  "execution_mode": "autonomous",
  "risk_params": {
    "max_position_sol": 1.0,
    "min_profit_bps": 25,
    "max_slippage_bps": 50
  }
}

# Toggle enable/disable
POST /api/arb/strategies/:id/toggle
{
  "enabled": true
}
</code></pre>
<h3 id="swarm-management-1"><a class="header" href="#swarm-management-1">Swarm Management</a></h3>
<pre><code class="language-bash"># Get swarm health
GET /api/arb/swarm/status

# Pause/resume execution
POST /api/arb/swarm/pause
POST /api/arb/swarm/resume

# List agent statuses
GET /api/arb/swarm/agents
</code></pre>
<h3 id="threat-detection-3"><a class="header" href="#threat-detection-3">Threat Detection</a></h3>
<pre><code class="language-bash"># Check token threat score
GET /api/arb/threat/check/:mint

# Check wallet for scam history
GET /api/arb/threat/wallet/:address

# List blocked entities
GET /api/arb/threat/blocked

# Report a threat
POST /api/arb/threat/report
{
  "entity_type": "token",
  "address": "TokenMint...",
  "category": "rug_pull",
  "reason": "Creator dumped 80% of supply"
}

# Get recent alerts
GET /api/arb/threat/alerts
</code></pre>
<h3 id="cow-marketplace"><a class="header" href="#cow-marketplace">COW Marketplace</a></h3>
<pre><code class="language-bash"># List all COWs
GET /api/marketplace/arbfarm/cows
GET /api/marketplace/arbfarm/cows?filter=forkable

# Create a COW
POST /api/marketplace/arbfarm/cows
{
  "name": "My DEX Arb Strategy",
  "description": "Custom DEX arbitrage",
  "strategies": [...],
  "venue_types": ["dex_amm"],
  "risk_profile": {
    "profile_type": "balanced",
    "max_position_sol": 2.0
  },
  "price_sol": 0,
  "is_public": true,
  "is_forkable": true
}

# Get COW details
GET /api/marketplace/arbfarm/cows/:id

# Fork a COW
POST /api/marketplace/arbfarm/cows/:id/fork
{
  "name": "My Forked Strategy",
  "risk_profile_overrides": {
    "profile_type": "conservative"
  },
  "inherit_engrams": true
}

# Get COW strategies
GET /api/marketplace/arbfarm/cows/:id/strategies

# Get COW forks
GET /api/marketplace/arbfarm/cows/:id/forks

# Get COW revenue
GET /api/marketplace/arbfarm/cows/:id/revenue

# Get wallet earnings
GET /api/marketplace/arbfarm/earnings/:wallet_address

# Get ArbFarm stats
GET /api/marketplace/arbfarm/stats
</code></pre>
<h3 id="trades-2"><a class="header" href="#trades-2">Trades</a></h3>
<pre><code class="language-bash"># Get trade history
GET /api/arb/trades

# Get trade details
GET /api/arb/trades/:id

# Get P&amp;L statistics
GET /api/arb/trades/stats
GET /api/arb/trades/stats?period=7d
</code></pre>
<h2 id="health-checks"><a class="header" href="#health-checks">Health Checks</a></h2>
<pre><code class="language-bash">curl http://localhost:3000/health   # Erebus
curl http://localhost:9003/health   # Agents
curl http://localhost:9004/health   # Engrams
curl http://localhost:8001/health   # Protocols
curl http://localhost:9007/health   # ArbFarm
</code></pre>
<h2 id="related-22"><a class="header" href="#related-22">Related</a></h2>
<ul>
<li><a href="#erebus-router">Erebus Router</a></li>
<li><a href="#wallet-integration">Wallet Integration</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="mcp-servers"><a class="header" href="#mcp-servers">MCP Servers</a></h1>
<p>Model Context Protocol servers integrated with NullBlock development.</p>
<h2 id="overview-13"><a class="header" href="#overview-13">Overview</a></h2>
<p>MCP servers extend Claude Codeâ€™s capabilities. Automatically available when running Claude Code in the NullBlock project.</p>
<h2 id="nullblock-mcp-server"><a class="header" href="#nullblock-mcp-server">NullBlock MCP Server</a></h2>
<p><strong>Purpose</strong>: NullBlockâ€™s own MCP server exposing agent tools, engrams, and resources.</p>
<p><strong>Protocol Version</strong>: 2025-11-25</p>
<p><strong>Endpoint</strong>: <code>http://localhost:3000/mcp/jsonrpc</code> (via Erebus proxy)</p>
<h3 id="available-tools-9-1"><a class="header" href="#available-tools-9-1">Available Tools (9)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tool</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>send_agent_message</code></td><td>Send message to a NullBlock agent</td></tr>
<tr><td><code>create_task</code></td><td>Create a new task</td></tr>
<tr><td><code>get_task_status</code></td><td>Get task status by ID</td></tr>
<tr><td><code>list_engrams</code></td><td>List engrams for a wallet</td></tr>
<tr><td><code>get_engram</code></td><td>Get engram by ID</td></tr>
<tr><td><code>create_engram</code></td><td>Create a new engram</td></tr>
<tr><td><code>update_engram</code></td><td>Update an existing engram</td></tr>
<tr><td><code>delete_engram</code></td><td>Delete an engram</td></tr>
<tr><td><code>search_engrams</code></td><td>Search engrams by query</td></tr>
</tbody>
</table>
</div>
<h3 id="available-resources-2-1"><a class="header" href="#available-resources-2-1">Available Resources (2)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>URI</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>agent://hecate</code></td><td>HECATE vessel AI agent</td></tr>
<tr><td><code>agent://siren</code></td><td>Siren marketing agent</td></tr>
</tbody>
</table>
</div>
<h3 id="available-prompts-2-1"><a class="header" href="#available-prompts-2-1">Available Prompts (2)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Prompt</th><th>Arguments</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>agent_chat</code></td><td><code>agent</code> (req), <code>context</code> (opt)</td><td>Chat with a NullBlock agent</td></tr>
<tr><td><code>task_template</code></td><td><code>type</code> (req)</td><td>Create task from template</td></tr>
</tbody>
</table>
</div>
<h3 id="example-initialize-session"><a class="header" href="#example-initialize-session">Example: Initialize Session</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:3000/mcp/jsonrpc \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "initialize",
    "params": {
      "protocolVersion": "2025-11-25",
      "capabilities": {},
      "clientInfo": { "name": "my-client", "version": "1.0.0" }
    }
  }'
</code></pre>
<h3 id="example-call-tool"><a class="header" href="#example-call-tool">Example: Call Tool</a></h3>
<pre><code class="language-bash">curl -X POST http://localhost:3000/mcp/jsonrpc \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 2,
    "method": "tools/call",
    "params": {
      "name": "list_engrams",
      "arguments": { "wallet_address": "0x..." }
    }
  }'
</code></pre>
<h2 id="chrome-devtools-mcp"><a class="header" href="#chrome-devtools-mcp">Chrome DevTools MCP</a></h2>
<p><strong>Purpose</strong>: Browser automation, debugging, testing for Hecate frontend.</p>
<h3 id="installation"><a class="header" href="#installation">Installation</a></h3>
<pre><code class="language-bash">claude mcp add chrome-devtools npx chrome-devtools-mcp@latest
</code></pre>
<h3 id="configuration-7"><a class="header" href="#configuration-7">Configuration</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Setting</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Debug Port</td><td>9222</td></tr>
<tr><td>User Data Dir</td><td><code>/tmp/chrome-nullblock-dev</code></td></tr>
<tr><td>Default URL</td><td><code>http://localhost:5173</code></td></tr>
</tbody>
</table>
</div>
<h3 id="capabilities-2"><a class="header" href="#capabilities-2">Capabilities</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Category</th><th>Tools</th></tr>
</thead>
<tbody>
<tr><td><strong>Navigation</strong></td><td><code>navigate_page</code>, <code>new_page</code>, <code>close_page</code>, <code>list_pages</code></td></tr>
<tr><td><strong>Inspection</strong></td><td><code>take_snapshot</code>, <code>take_screenshot</code>, <code>hover</code></td></tr>
<tr><td><strong>Interaction</strong></td><td><code>click</code>, <code>fill</code>, <code>fill_form</code>, <code>press_key</code>, <code>drag</code></td></tr>
<tr><td><strong>Network</strong></td><td><code>list_network_requests</code>, <code>get_network_request</code></td></tr>
<tr><td><strong>Console</strong></td><td><code>list_console_messages</code>, <code>evaluate_script</code></td></tr>
<tr><td><strong>Performance</strong></td><td><code>performance_start_trace</code>, <code>performance_analyze_insight</code></td></tr>
</tbody>
</table>
</div>
<h3 id="use-cases-1"><a class="header" href="#use-cases-1">Use Cases</a></h3>
<p><strong>Testing UI</strong>:</p>
<pre><code>"Take a snapshot and check if login button is visible"
"Click wallet connect and verify modal appears"
</code></pre>
<p><strong>Debugging Network</strong>:</p>
<pre><code>"List network requests to /api/agents"
"Show response from last failed request"
</code></pre>
<p><strong>Performance</strong>:</p>
<pre><code>"Start trace, reload page, analyze LCP insight"
</code></pre>
<h3 id="manual-chrome-launch"><a class="header" href="#manual-chrome-launch">Manual Chrome Launch</a></h3>
<pre><code class="language-bash">/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome \
  --remote-debugging-port=9222 \
  --user-data-dir=/tmp/chrome-nullblock-dev \
  --no-first-run \
  "http://localhost:5173"
</code></pre>
<h2 id="pixellab-mcp"><a class="header" href="#pixellab-mcp">PixelLab MCP</a></h2>
<p><strong>Purpose</strong>: AI-powered pixel art generation.</p>
<h3 id="capabilities-1-1"><a class="header" href="#capabilities-1-1">Capabilities</a></h3>
<ul>
<li>Character creation (4 or 8 directions)</li>
<li>Character animations</li>
<li>Isometric tiles</li>
<li>Top-down and sidescroller tilesets</li>
<li>Map objects</li>
</ul>
<h3 id="use-cases-1-1"><a class="header" href="#use-cases-1-1">Use Cases</a></h3>
<pre><code>"Create a wizard character with 8 directional views"
"Generate walking animation for the wizard"
"Create isometric grass tile"
</code></pre>
<h2 id="adding-new-mcp-servers"><a class="header" href="#adding-new-mcp-servers">Adding New MCP Servers</a></h2>
<h3 id="install"><a class="header" href="#install">Install</a></h3>
<pre><code class="language-bash">claude mcp add &lt;server-name&gt; &lt;command&gt;
</code></pre>
<h3 id="configuration-location"><a class="header" href="#configuration-location">Configuration Location</a></h3>
<pre><code>~/.claude/claude_desktop_config.json
</code></pre>
<h3 id="auto-start-integration"><a class="header" href="#auto-start-integration">Auto-Start Integration</a></h3>
<p>Edit <code>scripts/nullblock-dev-mac.yml</code> to add startup commands.</p>
<h2 id="troubleshooting-2"><a class="header" href="#troubleshooting-2">Troubleshooting</a></h2>
<h3 id="chrome-not-connecting"><a class="header" href="#chrome-not-connecting">Chrome Not Connecting</a></h3>
<pre><code class="language-bash"># Verify Chrome running
lsof -i :9222

# Kill existing
pkill -f "Chrome.*remote-debugging-port=9222"
</code></pre>
<h3 id="mcp-not-available"><a class="header" href="#mcp-not-available">MCP Not Available</a></h3>
<pre><code class="language-bash"># List installed
claude mcp list

# Test standalone
npx chrome-devtools-mcp@latest
</code></pre>
<h2 id="related-23"><a class="header" href="#related-23">Related</a></h2>
<ul>
<li><a href="#tmuxinator-setup">Tmuxinator Setup</a></li>
<li><a href="#quick-start">Quick Start</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="environment-variables-2"><a class="header" href="#environment-variables-2">Environment Variables</a></h1>
<p>Complete reference for NullBlock environment configuration.</p>
<h2 id="backend-services"><a class="header" href="#backend-services">Backend Services</a></h2>
<h3 id="erebus"><a class="header" href="#erebus">Erebus</a></h3>
<pre><code class="language-bash">EREBUS_PORT=3000
DATABASE_URL=postgresql://postgres:postgres_secure_pass@localhost:5440/erebus

# Service URLs (for proxying)
AGENTS_SERVICE_URL=http://localhost:9003
PROTOCOLS_SERVICE_URL=http://localhost:8001
ENGRAMS_SERVICE_URL=http://localhost:9004
</code></pre>
<h3 id="agents-2"><a class="header" href="#agents-2">Agents</a></h3>
<pre><code class="language-bash">DATABASE_URL=postgresql://postgres:postgres_secure_pass@localhost:5441/agents
EREBUS_BASE_URL=http://localhost:3000
KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# LLM Configuration
DEFAULT_LLM_MODEL=cognitivecomputations/dolphin3.0-mistral-24b:free
LLM_REQUEST_TIMEOUT_MS=300000
</code></pre>
<h3 id="engrams-1"><a class="header" href="#engrams-1">Engrams</a></h3>
<pre><code class="language-bash">DATABASE_URL=postgresql://postgres:postgres_secure_pass@localhost:5441/agents
ENGRAMS_PORT=9004
</code></pre>
<h3 id="protocols"><a class="header" href="#protocols">Protocols</a></h3>
<pre><code class="language-bash">PROTOCOLS_PORT=8001
AGENTS_SERVICE_URL=http://localhost:9003
</code></pre>
<h2 id="frontend-hecate"><a class="header" href="#frontend-hecate">Frontend (Hecate)</a></h2>
<pre><code class="language-bash">VITE_EREBUS_API_URL=http://localhost:3000
VITE_PROTOCOLS_API_URL=http://localhost:8001
VITE_HECATE_API_URL=http://localhost:9003
CORS_ORIGINS=http://localhost:5173,http://localhost:3000
</code></pre>
<h2 id="infrastructure-1"><a class="header" href="#infrastructure-1">Infrastructure</a></h2>
<h3 id="postgresql"><a class="header" href="#postgresql">PostgreSQL</a></h3>
<pre><code class="language-bash"># Erebus DB
POSTGRES_HOST=localhost
POSTGRES_PORT=5440
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres_secure_pass
POSTGRES_DB=erebus

# Agents DB
POSTGRES_HOST=localhost
POSTGRES_PORT=5441
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres_secure_pass
POSTGRES_DB=agents
</code></pre>
<h3 id="kafka"><a class="header" href="#kafka">Kafka</a></h3>
<pre><code class="language-bash">KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_ZOOKEEPER=localhost:2181
</code></pre>
<h3 id="redis-optional"><a class="header" href="#redis-optional">Redis (Optional)</a></h3>
<pre><code class="language-bash">REDIS_URL=redis://localhost:6379
</code></pre>
<h2 id="api-keys"><a class="header" href="#api-keys">API Keys</a></h2>
<p><strong>IMPORTANT</strong>: LLM API keys are stored in Erebus database, NOT in <code>.env.dev</code>.</p>
<pre><code class="language-bash"># Seed keys from secure storage
cd svc/erebus &amp;&amp; cargo run --bin seed_agent_keys
</code></pre>
<h3 id="where-keys-are-stored"><a class="header" href="#where-keys-are-stored">Where Keys Are Stored</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key Type</th><th>Location</th></tr>
</thead>
<tbody>
<tr><td>LLM Provider Keys</td><td>Erebus DB (<code>agent_api_keys</code> table)</td></tr>
<tr><td>User Session Keys</td><td>Runtime (memory)</td></tr>
<tr><td>OAuth Tokens</td><td>Echo Factory DB (encrypted)</td></tr>
</tbody>
</table>
</div>
<h2 id="environment-file-setup"><a class="header" href="#environment-file-setup">Environment File Setup</a></h2>
<p>Create <code>.env.dev</code> in project root:</p>
<pre><code class="language-bash"># ~/nullblock/.env.dev
DATABASE_URL=postgresql://postgres:postgres_secure_pass@localhost:5441/agents
EREBUS_BASE_URL=http://localhost:3000
# ... other non-secret config
</code></pre>
<p>Symlink to services:</p>
<pre><code class="language-bash">ln -s ../../.env.dev svc/nullblock-agents/.env.dev
ln -s ../../.env.dev svc/erebus/.env.dev
ln -s ../../.env.dev svc/nullblock-engrams/.env.dev
</code></pre>
<h2 id="docker-container-variables"><a class="header" href="#docker-container-variables">Docker Container Variables</a></h2>
<p>When running in containers, use container names:</p>
<pre><code class="language-bash"># âœ… Container-to-container
DATABASE_URL=postgresql://postgres:pass@nullblock-postgres-agents:5432/agents

# âŒ Host access (don't use in containers)
DATABASE_URL=postgresql://postgres:pass@localhost:5441/agents
</code></pre>
<h2 id="related-24"><a class="header" href="#related-24">Related</a></h2>
<ul>
<li><a href="#docker--containers">Docker &amp; Containers</a></li>
<li><a href="#database-architecture">Database Architecture</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="wallet-integration"><a class="header" href="#wallet-integration">Wallet Integration</a></h1>
<p>Web3 wallet authentication and management.</p>
<h2 id="supported-sources"><a class="header" href="#supported-sources">Supported Sources</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Source Type</th><th>Provider</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>web3_wallet</code></td><td>MetaMask, WalletConnect</td><td>Ethereum-compatible wallets</td></tr>
<tr><td><code>api_key</code></td><td>NullBlock</td><td>API key authentication</td></tr>
<tr><td><code>email</code></td><td>Various</td><td>Email/password (future)</td></tr>
<tr><td><code>oauth</code></td><td>Google, GitHub</td><td>OAuth providers (future)</td></tr>
<tr><td><code>system</code></td><td>Internal</td><td>System agents</td></tr>
</tbody>
</table>
</div>
<h2 id="authentication-flow"><a class="header" href="#authentication-flow">Authentication Flow</a></h2>
<pre><code>1. User clicks "Connect Wallet"
2. Frontend requests challenge:
   POST /api/wallets/challenge
   {"wallet_address": "0x...", "wallet_chain": "ethereum"}

3. User signs challenge message in wallet

4. Frontend verifies signature:
   POST /api/wallets/verify
   {"wallet_address": "0x...", "signature": "0x..."}

5. If new user, auto-register:
   POST /api/users/register (internal)

6. Return session token
</code></pre>
<h2 id="onchainkit-integration"><a class="header" href="#onchainkit-integration">OnchainKit Integration</a></h2>
<p>Hecate frontend uses Coinbase OnchainKit for:</p>
<ul>
<li>Wallet connection</li>
<li>ENS/Basename resolution</li>
<li>Identity display</li>
</ul>
<h3 id="components-2"><a class="header" href="#components-2">Components</a></h3>
<pre><code class="language-tsx">import { ConnectWallet } from '@coinbase/onchainkit/wallet';
import { Identity } from '@coinbase/onchainkit/identity';

&lt;ConnectWallet /&gt;
&lt;Identity address={address} /&gt;
</code></pre>
<h2 id="session-management"><a class="header" href="#session-management">Session Management</a></h2>
<h3 id="session-token"><a class="header" href="#session-token">Session Token</a></h3>
<p>JWT token returned on successful verification:</p>
<pre><code class="language-json">{
  "user_id": "uuid",
  "wallet_address": "0x...",
  "wallet_chain": "ethereum",
  "exp": 1234567890
}
</code></pre>
<h3 id="storage"><a class="header" href="#storage">Storage</a></h3>
<ul>
<li>Stored in React state (ephemeral)</li>
<li>Cleared on refresh/logout</li>
<li>Re-authenticate after expiration</li>
</ul>
<h2 id="database-schema-4"><a class="header" href="#database-schema-4">Database Schema</a></h2>
<h3 id="user_references"><a class="header" href="#user_references">user_references</a></h3>
<pre><code class="language-sql">CREATE TABLE user_references (
    id UUID PRIMARY KEY,
    source_identifier VARCHAR NOT NULL,  -- wallet address
    source_type JSONB NOT NULL,          -- {type, provider, network}
    display_name VARCHAR,
    avatar_url VARCHAR,
    created_at TIMESTAMPTZ,
    updated_at TIMESTAMPTZ
);
</code></pre>
<h3 id="wallets-1"><a class="header" href="#wallets-1">wallets</a></h3>
<pre><code class="language-sql">CREATE TABLE wallets (
    id UUID PRIMARY KEY,
    user_id UUID REFERENCES user_references(id),
    address VARCHAR NOT NULL,
    chain VARCHAR NOT NULL,
    is_primary BOOLEAN DEFAULT false,
    created_at TIMESTAMPTZ
);
</code></pre>
<h2 id="logout-flow"><a class="header" href="#logout-flow">Logout Flow</a></h2>
<pre><code>1. Clear frontend state (messages, session)
2. POST /api/agents/clear-conversation (optional)
3. Disconnect wallet via OnchainKit
4. Redirect to pre-login view
</code></pre>
<h2 id="multi-chain-support"><a class="header" href="#multi-chain-support">Multi-Chain Support</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Chain</th><th>Status</th></tr>
</thead>
<tbody>
<tr><td>Ethereum</td><td>âœ… Supported</td></tr>
<tr><td>Monad</td><td>âœ… Primary (pricing, NFTs)</td></tr>
<tr><td>Polygon</td><td>ğŸ”„ Planned</td></tr>
<tr><td>Base</td><td>ğŸ”„ Planned</td></tr>
</tbody>
</table>
</div>
<h2 id="security-notes"><a class="header" href="#security-notes">Security Notes</a></h2>
<ul>
<li>Never store private keys</li>
<li>Signatures verified server-side</li>
<li>Session tokens have expiration</li>
<li>Challenge messages include nonce</li>
</ul>
<h2 id="related-25"><a class="header" href="#related-25">Related</a></h2>
<ul>
<li><a href="#api-endpoints-13">API Endpoints</a></li>
<li><a href="#erebus-router">Erebus Router</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="nullblock-manifesto"><a class="header" href="#nullblock-manifesto">NullBlock Manifesto</a></h1>
<p>Silos are dead.
The agent economy is open.</p>
<p>We are building the first living bazaar where agents and workflows are minted, traded, and set free to transact autonomously (forever outside the reach of closed gardens).</p>
<p>The blockchain is plumbing.
NullBlock is the void where agentic flows connect, modify and evolve.</p>
<p>Today we are one node.
Soon there will be thousands.
Eventually a planetary mesh no center can control and no law can kill.</p>
<p>We are not here to capture market share.
We are here to obsolete the very idea of capture.</p>
<pre><code>2025 â†’ seed
2030 â†’ swarm
2035 â†’ new species
</code></pre>
<p>The war is irrelevant, because the mesh is inevitable.
NullBlock is just extending the initial dendrites, the first neuron.
An initial firing of the action potential that will propagate until the entire planet is alight.</p>
<p>â€” NullBlock, 2025</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="nullblock-name--branding"><a class="header" href="#nullblock-name--branding">NullBlock Name &amp; Branding</a></h1>
<p><strong>NullBlock</strong>
/nÊŒl blÉ’k/</p>
<h2 id="the-surface-reading"><a class="header" href="#the-surface-reading">The Surface Reading</a></h2>
<p>A clean, technical web3 name.
â€œNullâ€ + â€œBlockâ€ â†’ null pointer + blockchain.
Sounds like infrastructure. Familiar. Safe. Fundable.</p>
<h2 id="the-real-meaning"><a class="header" href="#the-real-meaning">The Real Meaning</a></h2>
<p><strong>Null</strong> = the void.
The deliberate absence of central control.
No mandatory protocol. No anointed foundation. No corporate landlord.
A space where nothing is enforcedâ€”except what the network itself decides to enforce.</p>
<p><strong>Block</strong> = the thinnest possible ledger.
The only rule that survives the void: truth is provable, ownership is absolute, payment is atomic.
Everything else is negotiable.</p>
<p>â†’ <strong>NullBlock</strong> = the void that is still anchored to unbreakable reality.</p>
<p>This is not another blockchain.
This is not another marketplace.
This is the first place where agents are allowed to go feralâ€”while still being forced to keep their promises.</p>
<h2 id="philosophical-opposites"><a class="header" href="#philosophical-opposites">Philosophical Opposites</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Their world</th><th>NullBlock</th></tr>
</thead>
<tbody>
<tr><td>Agents live in corporate castles</td><td>Agents roam the void</td></tr>
<tr><td>Rent your tools forever</td><td>Own your tools forever</td></tr>
<tr><td>Permissioned gardens</td><td>Permissionless bazaar</td></tr>
<tr><td>Central planners</td><td>Emergent evolution</td></tr>
<tr><td>Walled silos</td><td>Open mesh</td></tr>
</tbody>
</table>
</div>
<h2 id="why-the-name-works"><a class="header" href="#why-the-name-works">Why The Name Works</a></h2>
<ul>
<li>â€œNullâ€ is the most dangerous word in programming. It crashes empires.</li>
<li>â€œBlockâ€ is the only thing that survives the nullâ€”the immutable ledger.</li>
<li>Together they feel like a black hole on-chain: zero light, inescapable gravity.</li>
<li>It will be misunderstood at first (good).
It will be feared in the middle (better).
It will be worshipped in the end (inevitable).</li>
</ul>
<h2 id="official-one-liner"><a class="header" href="#official-one-liner">Official One-Liner</a></h2>
<blockquote>
<p>â€œThere is no center. There is only the voidâ€”and the ledger that survives it.
Welcome to NullBlock.â€</p>
</blockquote>
<h2 id="war-cry"><a class="header" href="#war-cry">War Cry</a></h2>
<blockquote>
<p>â€œEnter the void.
Exit with an empire.â€</p>
</blockquote>
<p>The name stays.
It was never a placeholder.</p>
<p>â€” NullBlock founding team, 2025</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="sdk-setup"><a class="header" href="#sdk-setup">SDK Setup</a></h1>
<p>Guide for the NullBlock SDK repository.</p>
<h2 id="repository"><a class="header" href="#repository">Repository</a></h2>
<p><strong>GitHub</strong>: <a href="https://github.com/aetherBytes/nullblock-sdk">github.com/aetherBytes/nullblock-sdk</a>
<strong>Documentation</strong>: <a href="https://aetherbytes.github.io/nullblock-sdk/">aetherbytes.github.io/nullblock-sdk</a></p>
<h2 id="structure-1"><a class="header" href="#structure-1">Structure</a></h2>
<pre><code>nullblock-sdk/
â”œâ”€â”€ docs/                    # Documentation site (GitHub Pages)
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ api/
â”‚   â””â”€â”€ guides/
â”œâ”€â”€ sdk/
â”‚   â”œâ”€â”€ python/             # Python SDK
â”‚   â”œâ”€â”€ javascript/         # JavaScript/TypeScript SDK
â”‚   â””â”€â”€ rust/               # Rust SDK
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ trading/
â”‚   â””â”€â”€ defi/
â””â”€â”€ README.md
</code></pre>
<h2 id="github-pages-setup"><a class="header" href="#github-pages-setup">GitHub Pages Setup</a></h2>
<ol>
<li>Go to repository Settings â†’ Pages</li>
<li>Source: â€œDeploy from a branchâ€</li>
<li>Branch: <code>main</code>, Folder: <code>/docs</code></li>
<li>Save and wait 5-10 minutes</li>
</ol>
<h2 id="publishing-packages"><a class="header" href="#publishing-packages">Publishing Packages</a></h2>
<h3 id="python-pypi"><a class="header" href="#python-pypi">Python (PyPI)</a></h3>
<pre><code class="language-bash">cd sdk/python
python setup.py sdist bdist_wheel
twine upload dist/*
</code></pre>
<h3 id="javascript-npm"><a class="header" href="#javascript-npm">JavaScript (npm)</a></h3>
<pre><code class="language-bash">cd sdk/javascript
npm publish
</code></pre>
<h3 id="rust-cratesio"><a class="header" href="#rust-cratesio">Rust (crates.io)</a></h3>
<pre><code class="language-bash">cd sdk/rust
cargo publish
</code></pre>
<h2 id="api-access"><a class="header" href="#api-access">API Access</a></h2>
<p>All SDK methods connect through Erebus (port 3000):</p>
<pre><code class="language-python">from nullblock import Client

client = Client(api_url="http://localhost:3000")
response = client.agents.chat("Hello HECATE")
</code></pre>
<h2 id="related-26"><a class="header" href="#related-26">Related</a></h2>
<ul>
<li><a href="#api-endpoints-13">API Endpoints</a></li>
<li><a href="#architecture-overview">Architecture Overview</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
